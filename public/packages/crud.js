function ___$insertStyle(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}Object.defineProperty(exports,"__esModule",{value:!0});var utils=require("./utils-b67d22d4.js"),index$1=require("./index-d49c6ca9.js"),index=require("./index-d62d7ccf.js"),ignoreStatuses=["OK","NO_ROWS"],crudAfterMiddleware=function(e){return function(p){return function(e){if(/.*_FAILURE$/gi.test(e.type)&&401!==e.meta.status)return p({type:"ADD_NOTIFICATION",notification:{id:parseInt(Math.random().toString().split(".")[1],10),duration:7e3,message:"Something went wrong. Try again later.",type:"NOTIFICATION_TYPE_ERROR",canDismiss:!0}}),Promise.reject(p(e));if(/.*_SUCCESS$/gi.test(e.type)){var t=index.lodash_clonedeep(e);if(t.payload.status&&t.payload.status.length||(t.payload.status="EMPTY_STATUS_FROM_BACKEND"),"object"!==index$1._typeof_1(t.payload.payload)&&(t.payload.payload={item:{},items:[]}),"object"!==index$1._typeof_1(t.payload._meta)&&(t.payload._meta={}),t.meta&&t.meta.validStatuses&&t.payload){var i=t.payload,r=void 0===i?{status:"INTERNAL_ERROR"}:i,d=t.meta,n=d.validStatuses,a=void 0===n?[]:n,o=d.errorMessagesByStatus,s=void 0===o?{}:o,u=r.status;if(ignoreStatuses.indexOf(u)<0&&a.indexOf(u)<0){var l=s[u]?s[u]:"Something went wrong. Try again later.";return p({type:"ADD_NOTIFICATION",notification:{id:parseInt(Math.random().toString().split(".")[1],10),duration:7e3,message:l,type:"NOTIFICATION_TYPE_ERROR",canDismiss:!0}}),Promise.reject(p(e))}}return p(t)}return p(e)}}},RSAA="@@redux-api-middleware/RSAA",listRegexp=/^LIST_(.*)_REQUEST$/,crudBeforeMiddleware=function(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"dr-pa-token";return function(r){return function(i){return function(e){if(e.isCrud){var t=index.lodash_clonedeep(e);if(delete t.isCrud,listRegexp.test(e[RSAA].types[0])){if(r.getState()[e.reducer].isLoading)return!1;delete t.reducer}return t[RSAA].body&&"application/json"===t[RSAA].headers["Content-Type"]&&"string"!=typeof t[RSAA].body&&(t[RSAA].body=JSON.stringify(t[RSAA].body)),e.needToken&&(t[RSAA].headers.Authorization="Bearer ".concat(utils.getCookie(d)),delete t.needToken),i(t)}return i(e)}}}},initialState={isLoading:{}},crudReducer=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:initialState,i=1<arguments.length?arguments[1]:void 0;if(i.type.includes("CRUD_ACTION_REQUEST")){var r=i.type.split("_")[0];(e=index.lodash_clonedeep(t)).isLoading[r]=!0}if(i.type.includes("CRUD_ACTION_SUCCESS")||i.type.includes("CRUD_ACTION_FAILURE")){var d=i.type.split("_")[0];(e=index.lodash_clonedeep(t)).isLoading[d]=!1}return e||t};exports.CRUD_ACTION_FAILURE=utils.CRUD_ACTION_FAILURE,exports.CRUD_ACTION_REQUEST=utils.CRUD_ACTION_REQUEST,exports.CRUD_ACTION_SUCCESS=utils.CRUD_ACTION_SUCCESS,exports.crud=utils.crud,exports.crudAfterMiddleware=crudAfterMiddleware,exports.crudBeforeMiddleware=crudBeforeMiddleware,exports.crudReducer=crudReducer;
