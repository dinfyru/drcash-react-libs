function ___$insertStyle(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}Object.defineProperty(exports,"__esModule",{value:!0});var index$1=require("./index-e637b4d0.js"),index=require("./index-d49c6ca9.js"),React=require("react"),utils=require("./utils-d39286dc.js"),toConsumableArray=require("./toConsumableArray-441b01c5.js");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var win,React__default=_interopDefaultLegacy(React),window_1=win="undefined"!=typeof window?window:void 0!==index.commonjsGlobal?index.commonjsGlobal:"undefined"!=typeof self?self:{},navigator$1=window_1.navigator,isIos=function(e){return/iPad|iPhone|iPod/.test(e)}(navigator$1?navigator$1.userAgent:""),getAfterLineObjs=function(e,t,a){var r={};if(e&&Object.keys(t).length){var n,i=Object.keys(t);if(i.length){n=t[i[0]].key;var l=a.filter(function(e){return 0<=i.indexOf(e[n].toString())});if(l.length)for(var s=0;s<l.length;s+=1){var o=l[s][n];r[o]=t[o]}}}return r},TBodyPart=function(e){function o(e){var m;index$1.classCallCheck(this,o),m=index$1.possibleConstructorReturn(this,index$1.getPrototypeOf(o).call(this,e)),index.defineProperty(index$1.assertThisInitialized(m),"generateFromTemplate",function(){return m.mainFabric()}),index.defineProperty(index$1.assertThisInitialized(m),"mainFabric",function(){function e(s){var e=Object.keys(l);if(e.length){var t=i[e[0]].key;0<=e.indexOf(d[s][t].toString())&&(f[s]={id:d[s][t],items:[]})}var o=[];r&&Array.isArray(r)&&r.forEach(function(e,t){var a=e.columns.map(function(){return t});o.push.apply(o,toConsumableArray.toConsumableArray(a))}),a.forEach(function(e,t){var a=e.tbody;if(!p||p[t]){var r,n,i=d[s];if(u[s]||(u[s]=[],i.id&&(u[s].id=i.id)),"function"==typeof a.value)try{r=a.value(i)}catch(e){r="n/a"}else"string"==typeof a.value?r=a.value:!a.value&&a.key&&(r=i[a.key]);"function"==typeof a.className&&(n=a.className(i));var l=a.props?utils.lodash_clonedeep(a.props):{};o.length&&(l["js-title-index"]=o[t]),u[s][t]=n?React__default.default.createElement("td",toConsumableArray._extends_1({className:n},l),r):React__default.default.createElement("td",l,r)}})}for(var t=m.props,a=t.tableTemplate,r=t.titleTemplate,d=t.partItems,p=t.visibleColumns,n=t.afterLineTemplate,i=t.afterLineData,l=m.state.afterLineObjs,u=[],f=[],s=[],o=0;o<d.length;o+=1)e(o);if(f.length){f.forEach(function(e,u){function t(d){n.forEach(function(e,t){var a=e.tbody;if(!p||p[t]){f[u].items[d]||(f[u].items[d]=[]);var r,n,i=c[d];if("function"==typeof a.value)try{r=a.value(i)}catch(e){r="n/a"}else r="string"==typeof a.value?a.value:!(a.value||!a.key)&&i[a.key];if("function"==typeof a.className){for(var l={},s="string"==typeof a.key?[a.key]:a.key,o=0;o<s.length;o+=1)l[s[o]]=i[s[o]];n=a.className(l)}f[u].items[d][t]=n?React__default.default.createElement("td",toConsumableArray._extends_1({className:n},a.props),r):React__default.default.createElement("td",a.props,r)}})}for(var c=l[e.id].items,a=0;a<c.length;a+=1)t(a);c.length||f[u].items.push([React__default.default.createElement("td",{className:"no-border",colSpan:p.length},React__default.default.createElement("span",{className:"loading"},React__default.default.createElement("span",null)))])});var c=0;f.forEach(function(e,t){u.splice.apply(u,[t+c+1,0].concat(toConsumableArray.toConsumableArray(e.items)));for(var a=0;a<e.items.length;a++)s.push(a+t+c+1);c+=e.items.length})}return{items:u,afterLineIndexes:s}});var t=m.props,a=t.rerenderById,r=t.partItems,n=t.afterLineTemplate,i=t.afterLineData,l=null;a&&r.find(function(e){return e.id===a})&&(l=a);var s=getAfterLineObjs(n,i,e.partItems);return m.state={rerenderById:l,afterLineObjs:s},m}return index$1.inherits(o,e),index$1.createClass(o,[{key:"shouldComponentUpdate",value:function(e,t){var a=this.props,r=this.state.afterLineObjs,n=JSON.stringify(a.partItems)!==JSON.stringify(e.partItems),i=JSON.stringify(a.dataForRender)!==JSON.stringify(e.dataForRender),l=Boolean(t.rerenderById)&&a.rerenderById!==e.rerenderById,s=JSON.stringify(a.visibleColumns)!==JSON.stringify(e.visibleColumns),o=JSON.stringify(t.afterLineObjs)!==JSON.stringify(r);return n||i||l||s||o}},{key:"render",value:function(){var e=this.generateFromTemplate(),t=e.items,r=e.afterLineIndexes;return t.map(function(e,t){var a=0<=r.indexOf(t)?"mt_subline":"mt_line";return React__default.default.createElement("tr",{key:t,"data-id":e.id?e.id:t,className:a},React__default.default.createElement("td",{className:"padding-table"}," "),e.map(function(e,t){return React__default.default.createElement(React__default.default.Fragment,{key:t},e)}),React__default.default.createElement("td",{className:"padding-table"}," "))})}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(t.rerenderById&&!e.rerenderById&&t.partItems.find(function(e){return e.id===t.rerenderById}))return{rerenderById:t.rerenderById};return t.afterLineTemplate?{afterLineObjs:getAfterLineObjs(t.afterLineTemplate,t.afterLineData,t.partItems)}:null}}]),o}(React.Component);index.defineProperty(TBodyPart,"defaultProps",{rerenderById:null,visibleColumns:null,afterLineData:null,afterLineTemplate:null}),index.defineProperty(TBodyPart,"propTypes",{tableTemplate:index$1.propTypes.array.isRequired,partItems:index$1.propTypes.array.isRequired,dataForRender:index$1.propTypes.object.isRequired,rerenderById:index$1.propTypes.number,visibleColumns:index$1.propTypes.array,afterLineData:index$1.propTypes.object,afterLineTemplate:index$1.propTypes.array}),TBodyPart.displayName="TBodyPart";var TBody=function(e){function i(){var e,t;index$1.classCallCheck(this,i);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return t=index$1.possibleConstructorReturn(this,(e=index$1.getPrototypeOf(i)).call.apply(e,[this].concat(r))),index.defineProperty(index$1.assertThisInitialized(t),"blockedItemsPosition",function(){var s=t.props.refs.parent.current,o=document.querySelectorAll(".blocked-item");o.forEach(function(e,t){var a=o[t],r=a.getAttribute("item-data-id"),n=document.querySelector('tbody tr[data-id="'.concat(r,'"]'));if(!n.length){var i=s.scrollTop+(Math.abs(utils.elemOffset(n).top)-utils.elemOffset(s).top)+1,l=n.offsetHeight-1;a.style.top="".concat(i,"px"),a.style.height="".concat(l,"px"),a.style.lineHeight="".concat(l,"px")}})}),t}return index$1.inherits(i,e),index$1.createClass(i,[{key:"componentDidMount",value:function(){utils.addEvent(window,"resize",this.blockedItemsPosition)}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,a=JSON.stringify(t.items)!==JSON.stringify(e.items),r=JSON.stringify(t.dataForRender)!==JSON.stringify(e.dataForRender),n=t.rerenderById!==e.rerenderById,i=JSON.stringify(t.visibleColumns)!==JSON.stringify(e.visibleColumns),l=JSON.stringify(t.afterLineData)!==JSON.stringify(e.afterLineData),s=JSON.stringify(t.blockedItems)!==JSON.stringify(e.blockedItems);return a||r||n||i||l||s}},{key:"componentDidUpdate",value:function(){this.blockedItemsPosition()}},{key:"componentWillUnmount",value:function(){utils.removeEvent(window,"resize",this.blockedItemsPosition)}},{key:"render",value:function(){var e=this.props,t=e.items,a=e.tableTemplate,r=e.dataForRender,n=e.rerenderById,i=e.visibleColumns,l=e.afterLineTemplate,s=e.blockedItems,o=e.afterLineData,d=e.titleTemplate;return React__default.default.createElement(React__default.default.Fragment,null,t.map(function(e,t){return React__default.default.createElement(TBodyPart,{key:t,index:t,partItems:e,dataForRender:r,tableTemplate:a,rerenderById:n,visibleColumns:i,afterLineTemplate:l,afterLineData:o,titleTemplate:d})}),s.map(function(e){return React__default.default.createElement("tr",{className:"blocked-item",key:e,"item-data-id":e},React__default.default.createElement("td",null,React__default.default.createElement("span",{className:"loading"})))}))}}]),i}(React.Component);TBody.displayName="TBody";var ORDER_BY_DESC="DESC",ORDER_BY_ASC="ASC",THead=function(e){function n(){var e,R;index$1.classCallCheck(this,n);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return R=index$1.possibleConstructorReturn(this,(e=index$1.getPrototypeOf(n)).call.apply(e,[this].concat(a))),index.defineProperty(index$1.assertThisInitialized(R),"changeSortType",function(e,t){return t.sort_by!==e?ORDER_BY_DESC:t.sort_type===ORDER_BY_DESC?ORDER_BY_ASC:ORDER_BY_DESC}),index.defineProperty(index$1.assertThisInitialized(R),"generateFromTemplate",function(){var e=R.props,t=e.tableTemplate,p=e.filtersValue,f=e.reducer,m=e.getItems,_=e.items,T=e.changeFiltersValue,y=e.softSort,b=e.sortType,E=e.sortBy,h=e.visibleColumns,a=e.titleTemplate,g=e.setItems,S=[],v=[];return a&&Array.isArray(a)&&a.forEach(function(e,t){var a=e.columns.map(function(){return t});v.push.apply(v,toConsumableArray.toConsumableArray(a))}),t.forEach(function(e,t){if(!h||h[t]){var a=e.thead,r=a.className,n=a.value,i=a.title,l=a.sortKey,s=a.sortLtr,o=e.thead,d=n;"function"==typeof n&&(d=n());var u=o.props?utils.lodash_clonedeep(o.props):{};v.length&&(u["js-title-index"]=v[t]);var c=React__default.default.createElement("th",toConsumableArray._extends_1({key:t,title:i||n,className:"".concat(r||"").concat(l?" cup":""),onClick:function(){if(!l)return!1;var i=R.changeSortType(l,p);if(y){T({sort_type:i,sort_by:l},f);var a=[];_.forEach(function(e){var t;(t=a).push.apply(t,toConsumableArray.toConsumableArray(utils.lodash_clonedeep(e)))}),a=a.sort(function(e,t){var a=e[l],r=t[l],n=0;return r<a?n="DESC"===i?-1:1:a<r&&(n="DESC"===i?1:-1),n}),g(a,f)}else m({sort_type:i,sort_by:l,offset:0},f)}},u),!(!s||!l)&&React__default.default.createElement("span",{className:"sorting ltr ".concat(E===l?b.toLowerCase():"")}),d,!(s||!l)&&React__default.default.createElement("span",{className:"sorting fal ".concat(E===l?b.toLowerCase():"")}));S.push(c)}}),S}),R}return index$1.inherits(n,e),index$1.createClass(n,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,a=JSON.stringify(t.items)!==JSON.stringify(e.items),r=JSON.stringify(t.tableTemplate)!==JSON.stringify(e.tableTemplate),n=JSON.stringify(t.sortType)!==JSON.stringify(e.sortType),i=JSON.stringify(t.sortBy)!==JSON.stringify(e.sortBy),l=JSON.stringify(t.visibleColumns)!==JSON.stringify(e.visibleColumns),s=JSON.stringify(t.dataForRender)!==JSON.stringify(e.dataForRender);return r||n||i||l||s||a}},{key:"render",value:function(){var e=this.props,t=e.isHidden,a=e.setRef,r=this.generateFromTemplate();return React__default.default.createElement("thead",{ref:a,className:t?"no-js":"js"},React__default.default.createElement("tr",null,React__default.default.createElement("th",{className:"padding-table"}," "),r,React__default.default.createElement("th",{className:"padding-table"}," ")))}}]),n}(React.Component);index.defineProperty(THead,"defaultProps",{getItems:function(){console.log('not imported function "getItems"')},reducer:"",filtersValue:{},sortType:null,sortBy:null,isHidden:!1,softSort:!1,visibleColumns:null}),index.defineProperty(THead,"propTypes",{tableTemplate:index$1.propTypes.array.isRequired,reducer:index$1.propTypes.string,getItems:index$1.propTypes.func,filtersValue:index$1.propTypes.object,sortType:index$1.propTypes.string,sortBy:index$1.propTypes.string,isHidden:index$1.propTypes.bool,setRef:index$1.propTypes.object.isRequired,changeFiltersValue:index$1.propTypes.func.isRequired,setItems:index$1.propTypes.func.isRequired,softSort:index$1.propTypes.bool,visibleColumns:index$1.propTypes.array}),THead.displayName="THead";var TTitle=function(e){function i(){var e,a;index$1.classCallCheck(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return a=index$1.possibleConstructorReturn(this,(e=index$1.getPrototypeOf(i)).call.apply(e,[this].concat(r))),index.defineProperty(index$1.assertThisInitialized(a),"generateFromTemplate",function(){var e=a.props,t=e.titleTemplate,s=e.visibleColumns,o=[],d=0;return t.forEach(function(e,t){var a,r=e.props,n=e.value,i=toConsumableArray.toConsumableArray(e.columns);if(s&&i.forEach(function(){s[d]&&(a=!0),d++}),!s||a){var l=React__default.default.createElement("th",toConsumableArray._extends_1({key:t,"js-title-index":t},r),React__default.default.createElement("span",null,n));o.push(l)}}),o}),a}return index$1.inherits(i,e),index$1.createClass(i,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,a=JSON.stringify(t.titleTemplate)!==JSON.stringify(e.titleTemplate),r=JSON.stringify(t.visibleColumns)!==JSON.stringify(e.visibleColumns);return a||r}},{key:"render",value:function(){var e=this.props.setRef,t=this.generateFromTemplate();return React__default.default.createElement("thead",{ref:e},React__default.default.createElement("tr",null,React__default.default.createElement("th",{className:"padding-table"}," "),t,React__default.default.createElement("th",{className:"padding-table"}," ")))}}]),i}(React.Component);index.defineProperty(TTitle,"defaultProps",{visibleColumns:null}),index.defineProperty(TTitle,"propTypes",{titleTemplate:index$1.propTypes.array.isRequired,visibleColumns:index$1.propTypes.array}),TTitle.displayName="TTitle";var TFoot=function(e){function i(){var e,r;index$1.classCallCheck(this,i);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return r=index$1.possibleConstructorReturn(this,(e=index$1.getPrototypeOf(i)).call.apply(e,[this].concat(a))),index.defineProperty(index$1.assertThisInitialized(r),"generateFromTemplate",function(){var e=r.props,t=e.tableTemplate,i=e.visibleColumns,a=e.tfootItem,l=[],s=a?a.item:null;return!!a&&(t.forEach(function(e,t){var a,r,n=e.tfoot;if(!i||!0===i[t])if(n){if("function"==typeof n.value)try{a=n.value(s)}catch(e){a="n/a"}else"string"==typeof n.value?a=n.value:!n.value&&n.key&&(a=s[n.key]);"function"==typeof n.className&&(r=n.className(s)),l[t]=r?React__default.default.createElement("td",toConsumableArray._extends_1({key:t,className:r},n.props),a):React__default.default.createElement("td",toConsumableArray._extends_1({key:t},n.props),a)}else l[t]=React__default.default.createElement("td",{key:t})}),l)}),r}return index$1.inherits(i,e),index$1.createClass(i,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,a=JSON.stringify(t.tableTemplate)!==JSON.stringify(e.tableTemplate),r=JSON.stringify(t.visibleColumns)!==JSON.stringify(e.visibleColumns),n=JSON.stringify(t.dataForRender)!==JSON.stringify(e.dataForRender),i=JSON.stringify(t.tfootItem)!==JSON.stringify(e.tfootItem),l=JSON.stringify(t.items)!==JSON.stringify(e.items),s=JSON.stringify(t.tfootDataForRender)!==JSON.stringify(e.tfootDataForRender);return a||r||n||i||l||s}},{key:"render",value:function(){var e=this.props,t=e.setRef,a=e.tfootItem,r=e.isHidden,n=a?a.item:null,i=a?a.isLoading:null,l=this.generateFromTemplate();return React__default.default.createElement("tfoot",{ref:t,className:r?"no-js":"js"},!r&&this.props.tfootOtherTemplate,React__default.default.createElement("tr",{className:"tfoot-data",id:r?"":"tfoot-data"},React__default.default.createElement("td",{className:"padding-table"}," "),l,React__default.default.createElement("td",{className:"padding-table"}," ")),!(!n||!i||Object.keys(n).length||r)&&React__default.default.createElement("tr",{className:"tfoot-loading no-border"},React__default.default.createElement("td",null,React__default.default.createElement("span",{className:"loading"},React__default.default.createElement("span",null)))))}}]),i}(React.Component);function ownKeys$3(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)}return a}function _objectSpread$3(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$3(a,!0).forEach(function(e){index.defineProperty(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys$3(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}index.defineProperty(TFoot,"defaultProps",{visibleColumns:null,tfootItem:null,dataForRender:{},items:[],tfootDataForRender:null}),index.defineProperty(TFoot,"propTypes",{tableTemplate:index$1.propTypes.array.isRequired,setRef:index$1.propTypes.object.isRequired,dataForRender:index$1.propTypes.object,visibleColumns:index$1.propTypes.array,tfootItem:index$1.propTypes.object,items:index$1.propTypes.array,tfootDataForRender:index$1.propTypes.object}),TFoot.displayName="TFoot";var mobileAndTabletcheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t};mobileAndTabletcheck();var MainTableComponent=function(e){function t(e){var k;return index$1.classCallCheck(this,t),k=index$1.possibleConstructorReturn(this,index$1.getPrototypeOf(t).call(this,e)),index.defineProperty(index$1.assertThisInitialized(k),"scrollHeads",function(){var e=k.table,t=e.parent.current,a=e.theadVisible.current,r=e.tfoot.current,n=e.ttitle.current,i=k.props,l=i.id,s=i.tfootItem,o=i.leftMenuWidth,d=i.titleTemplate,u=i.tfootOtherTemplate,c=i.offsetHeight,p=i.fixedFooter;if(t){var f=o-t.scrollLeft;isIos||mobileAndTabletcheck()||(f-=document.body.scrollLeft||document.documentElement.scrollLeft),a.style.left="".concat(f,"px"),(s||u)&&(r.style.left="".concat(f,"px"),r.style.width="".concat(t.clientWidth+t.scrollLeft,"px")),d&&(n.style.left="".concat(f,"px"),n.style.width="".concat(t.clientWidth+t.scrollLeft,"px"))}var m=document.getElementsByClassName("page__content");if(m.length){var _=k.table,T=_.theadVisible.current,y=_.ttitle.current,b=document.getElementsByClassName("table__filters")[0],E=document.getElementsByClassName("switch__pages")[0],h=b?b.offsetHeight:0,g=E?E.offsetHeight:0,S=y?y.offsetHeight:0;g&&!h&&(g+=20);var v=61+h+g,R=T.getAttribute("js-data-top");if(!R)R=+window.getComputedStyle(T).top.split("px")[0],T.setAttribute("js-data-top",R);if(k.addNewStyle(".page__content #".concat(l," .table__thead thead { top: ").concat(v+S+c-m[0].scrollTop,"px !important }")),r&&p){var I=32+h+g;r.style.top="".concat(I+S+c+t.offsetHeight-m[0].scrollTop-(t.offsetHeight-t.clientHeight),"px"),r.style.bottom="initial"}}}),index.defineProperty(index$1.assertThisInitialized(k),"addNewStyle",function(e){var t=k.props.id,a=document.getElementById("".concat(t,"_js"));a||((a=document.createElement("style")).type="text/css",a.id="".concat(t,"_js"),document.getElementsByTagName("body")[0].appendChild(a)),a.innerHTML=e}),index.defineProperty(index$1.assertThisInitialized(k),"resizeTableColumns",function(){var e=k.props,t=e.data,a=e.reducer,r=e.tfootItem,n=e.tfootOtherTemplate,i=e.titleTemplate;e.disableLazyLoad;var l=e.offsetHeight,s=e.fixedFooter,o=t[a],d=o.items,u=o.isLoading,c=o.isLastPage,p=k.table,f=p.parent.current,m=p.tbody.current,_=p.theadHidden.current,T=p.theadVisible.current,y=p.tfoot.current,b=p.ttitle.current,E=document.getElementsByClassName("table__filters")[0],h=document.getElementsByClassName("switch__pages")[0],g=E?E.offsetHeight:0,S=h?h.offsetHeight:0,v=b?b.offsetHeight:0;S&&!g&&(S+=20);var R=32+g+S,I=61+g+S;if(f.style.top="".concat(R+v+l,"px"),T.style.top="".concat(I+v+l,"px"),b&&(b.style.top="".concat(I,"px")),!u&&d.length||u&&null===c||!u&&null==c||!u&&!d.length&&c){if(T.style.width="".concat(m.offsetWidth,"px"),i){var x=document.getElementsByTagName("html")[0];b.style.width="".concat(f.clientWidth+f.scrollLeft+x.scrollLeft,"px")}if(r||n){var L=document.getElementsByClassName("page__content"),A=document.getElementsByTagName("html")[0];y.style.width="".concat(f.clientWidth+f.scrollLeft+A.scrollLeft,"px"),s?(y.style.top="".concat(R+v+l+f.offsetHeight-L[0].scrollTop-(f.offsetHeight-f.clientHeight),"px"),y.style.bottom="initial"):y.style.bottom="".concat(f.offsetHeight-f.clientHeight,"px")}for(var C,M=(d.length?(C="td",m.getElementsByTagName("tr")):(C="th",_.getElementsByTagName("tr")))[0].getElementsByTagName(C),O=T.getElementsByTagName("th"),N=0;N<M.length;N+=1){var P=Math.floor(M[N].offsetWidth);O[N].style.width="".concat(P,"px")}if(r&&!y.getElementsByClassName("no-border").length)for(var D=y.getElementsByTagName("td"),$=0;$<M.length;$+=1){var U=Math.floor(M[$].offsetWidth);D[$].style.width="".concat(U,"px")}if(i){var w={};Array.prototype.forEach.call(M,function(e){var t=e.getAttribute("js-title-index");t&&(w[t]||(w[t]=0),w[t]+=+Math.floor(e.offsetWidth))}),Array.prototype.forEach.call(b.getElementsByTagName("th"),function(e,t){var a=e.getAttribute("js-title-index"),r=0;r=a?w[a]:0===t?+Math.floor(M[t].offsetWidth):+Math.floor(M[M.length-1].offsetWidth),e.style.width="".concat(r,"px")})}}k.scrollHeads()}),index.defineProperty(index$1.assertThisInitialized(k),"lazyLoad",function(){var e=k.props,t=e.data,a=e.reducer;if(e.disableLazyLoad)return!1;var r=t[a],n=r.isLastPage,i=r.isLoading;if(n||i)return!1;var l=k.table.parent.current,s=k.table.tbody.current,o=s.offsetHeight-l.offsetHeight,d=Math.abs(utils.elemOffset(s).top-utils.elemOffset(l).top);o-document.getElementsByTagName("html")[0].offsetHeight/2<d&&k.getItems()}),index.defineProperty(index$1.assertThisInitialized(k),"getItems",function(e){var t=k.props,a=t.listGet,r=t.changeFiltersValue,n=t.reducer,i=t.url,l=t.data,s=t.reloadItemsOnRequest,o=t.disableFilters,d=t.requiredFilters,u=l[n],c=u.filtersValue,p=c.offset,f=c.limit,m=u.filtersValue;r(e||{offset:p+f},n);var _=!0,T=_objectSpread$3({},utils.lodash_clonedeep(m),{},utils.lodash_clonedeep(e||{}));if(k.props.requiredFilterValues.forEach(function(e){T[e]||(_=!1)}),!k.state.canDoRequest||!_)return!1;a(n,i,s,o,d)}),k.state={colsCount:e.tableTemplate.length+2,canDoRequest:!e.requiredFilterValues.length},k.table={parent:React__default.default.createRef(),ttitle:React__default.default.createRef(),theadVisible:React__default.default.createRef(),theadHidden:React__default.default.createRef(),tbody:React__default.default.createRef(),tfoot:React__default.default.createRef(),tfootHidden:React__default.default.createRef()},k}return index$1.inherits(t,e),index$1.createClass(t,[{key:"componentDidMount",value:function(){var e=this.props.onInit;"function"==typeof e&&e(this.getItems);var t=this.table.parent.current,a=this.props,r=a.reducer,n=a.listGet,i=a.url,l=a.data,s=a.history.action,o=a.initFiltersValue,d=a.changeFiltersValue,u=a.refreshTableOnPush,c=a.reloadItemsOnRequest,p=a.disableFilters,f=a.requiredFilters;o&&(Object.keys(l[r].filtersValue).length&&(!u||"PUSH"!==s&&"POP"!==s)||d(o,r)),(u&&("PUSH"===s||"POP"===s)||!l[r].items.length&&null===l[r].isLastPage)&&this.state.canDoRequest&&i&&n(r,i,c,p,f);var m=document.getElementsByClassName("page__content");utils.addEvent(window,"resize",this.resizeTableColumns),utils.addEvent(t,"scroll",this.scrollHeads),utils.addEvent(window,"scroll",this.scrollHeads),utils.addEvent(document.body,"scroll",this.scrollHeads),m.length&&utils.addEvent(m[0],"scroll",this.scrollHeads),this.resizeTableColumns();var _=l[r],T=_.items,y=_.scroll;if(y){var b=y.scrollLeft,E=y.scrollTop;T.length&&(E||b)&&this.table.parent.current.scrollTo(b,E)}}},{key:"componentDidUpdate",value:function(){var e=new Event("resize");window.dispatchEvent(e)}},{key:"componentWillUnmount",value:function(){var e=this.table.parent,t=e.current,a=e.current,r=a.scrollTop,n=a.scrollLeft,i=this.props,l=i.saveTableScroll,s=i.reducer,o=document.getElementsByTagName("html")[0],d=document.getElementsByClassName("page__content");l({scrollTop:r,scrollLeft:n},s),utils.removeEvent(window,"resize",this.resizeTableColumns),utils.removeEvent(t,"scroll",this.scrollHeads),utils.removeEvent(o,"scroll",this.scrollHeads),utils.removeEvent(document.body,"scroll",this.scrollHeads),d.length&&utils.removeEvent(d[0],"scroll",this.scrollHeads)}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.className,r=e.data,n=e.tableTemplate,i=e.reducer,l=e.changeFiltersValue,s=e.dataForRender,o=e.rerenderById,d=e.afterLineTemplate,u=e.tfootItem,c=e.tfootOtherTemplate,p=e.titleTemplate,f=e.visibleColumnsMiddleware,m=e.requiredFilterValuesMessage,_=e.noDataContent,T=e.setItems,y=e.softSort,b=r[i],E=b.isLoading,h=b.isLastPage,g=b.items,S=b.filtersValue,v=b.visibleColumns,R=b.blockedItems,I=b.subLineData,x=this.state,L=x.colsCount,A=x.canDoRequest,C=f(v),M=!g.length&&h&&!E&&A;return React__default.default.createElement("div",{id:t,ref:this.table.parent,className:"table-list__parent ".concat(a).concat(M?" table__no-data":""),onWheel:this.lazyLoad,onTouchMove:this.lazyLoad},!!p&&React__default.default.createElement("table",{className:"table__title table-list"},React__default.default.createElement(TTitle,{setRef:this.table.ttitle,titleTemplate:p,visibleColumns:C})),React__default.default.createElement("table",{className:"table__thead table-list"},React__default.default.createElement(THead,{setRef:this.table.theadVisible,tableTemplate:n,changeFiltersValue:l,filtersValue:S,isLastPage:h,getItems:this.getItems,reducer:i,softSort:y,setItems:T,sortType:S.sort_type,sortBy:S.sort_by,visibleColumns:C,dataForRender:utils.lodash_clonedeep(s),items:utils.lodash_clonedeep(g)})),React__default.default.createElement("table",{className:"table__tbody table-list"},React__default.default.createElement(THead,{setRef:this.table.theadHidden,changeFiltersValue:l,tableTemplate:n,titleTemplate:p,filtersValue:S,isLastPage:h,getItems:this.getItems,reducer:i,softSort:y,setItems:T,isHidden:!0,sortType:S.sort_type,sortBy:S.sort_by,visibleColumns:C,dataForRender:utils.lodash_clonedeep(s),items:utils.lodash_clonedeep(g)}),React__default.default.createElement("tbody",{ref:this.table.tbody},A?React__default.default.createElement(TBody,{items:utils.lodash_clonedeep(g),tableTemplate:n,titleTemplate:p,rerenderById:o,dataForRender:utils.lodash_clonedeep(s),visibleColumns:C,afterLineTemplate:d,afterLineData:I,blockedItems:R,refs:this.table}):React__default.default.createElement("tr",{className:"no-border"},React__default.default.createElement("td",{colSpan:L},React__default.default.createElement("span",{className:"no-data"},m))),!!M&&React__default.default.createElement("tr",{className:"no-border"},React__default.default.createElement("td",{colSpan:L},React__default.default.createElement("span",{className:"no-data"},_))),!!E&&React__default.default.createElement("tr",{className:"no-border"},React__default.default.createElement("td",{colSpan:L},React__default.default.createElement("span",{className:"loading"},React__default.default.createElement("span",null))))),!!u&&React__default.default.createElement(TFoot,{tableTemplate:n,dataForRender:utils.lodash_clonedeep(s),tfootItem:u,isHidden:!0,setRef:this.table.tfootHidden,visibleColumns:C})),!(!u&&!c)&&React__default.default.createElement("table",{className:"table__thead table-list"},React__default.default.createElement(TFoot,{tableTemplate:n,dataForRender:utils.lodash_clonedeep(s),tfootItem:u,items:utils.lodash_clonedeep(g),tfootDataForRender:this.props.tfootDataForRender,tfootOtherTemplate:this.props.tfootOtherTemplate,setRef:this.table.tfoot,visibleColumns:C})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!e.url)return{};if(e.requiredFilterValues.length&&!t.canDoRequest){var a=!0,r=e.reducer,n=e.data,i=e.listGet,l=e.url,s=e.reloadItemsOnRequest,o=e.disableFilters,d=e.requiredFilters,u=n[r].filtersValue;return e.requiredFilterValues.forEach(function(e){u[e]||(a=!1)}),a&&i(r,l,s,o,d),{canDoRequest:a}}if(e.requiredFilterValues.length){var c=!0,p=e.reducer,f=e.data[p].filtersValue;if(e.requiredFilterValues.forEach(function(e){f[e]||(c=!1)}),!c)return{canDoRequest:c}}return{}}}]),t}(React.Component);function ownKeys$2(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)}return a}function _objectSpread$2(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$2(a,!0).forEach(function(e){index.defineProperty(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys$2(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}index.defineProperty(MainTableComponent,"defaultProps",{url:null,reducer:"",className:"",dataForRender:{},rerenderById:null,initFiltersValue:null,refreshTableOnPush:!1,onInit:null,afterLineTemplate:null,tfootItem:null,tfootDataForRender:null,reloadItemsOnRequest:!1,disableFilters:!1,leftMenuWidth:200,offsetHeight:0,titleTemplate:null,disableLazyLoad:!1,requiredFilters:[],softSort:!1,requiredFilterValues:[],visibleColumnsMiddleware:function(e){return e},requiredFilterValuesMessage:"Empty required filters",noDataContent:"No data"}),index.defineProperty(MainTableComponent,"propTypes",{url:index$1.propTypes.string,id:index$1.propTypes.string.isRequired,tableTemplate:index$1.propTypes.array.isRequired,titleTemplate:index$1.propTypes.array,reducer:index$1.propTypes.string,data:index$1.propTypes.object.isRequired,className:index$1.propTypes.string,dataForRender:index$1.propTypes.object,rerenderById:index$1.propTypes.number,offsetHeight:index$1.propTypes.number,initFiltersValue:index$1.propTypes.object,refreshTableOnPush:index$1.propTypes.bool,listGet:index$1.propTypes.func.isRequired,reloadItemsOnRequest:index$1.propTypes.bool,saveTableScroll:index$1.propTypes.func.isRequired,changeFiltersValue:index$1.propTypes.func.isRequired,history:index$1.propTypes.object.isRequired,onInit:index$1.propTypes.func,softSort:index$1.propTypes.bool,setItems:index$1.propTypes.func.isRequired,afterLineTemplate:index$1.propTypes.array,tfootItem:index$1.propTypes.object,tfootDataForRender:index$1.propTypes.object,leftMenuWidth:index$1.propTypes.number,disableFilters:index$1.propTypes.bool,requiredFilters:index$1.propTypes.array,visibleColumnsMiddleware:index$1.propTypes.func,requiredFilterValues:index$1.propTypes.array,disableLazyLoad:index$1.propTypes.bool,requiredFilterValuesMessage:index$1.propTypes.string,noDataContent:index$1.propTypes.oneOfType([index$1.propTypes.string,index$1.propTypes.object])}),MainTableComponent.displayName="MainTableComponent";var REQUEST_REGEXP=/^MT_LIST@(.+)_REQUEST$/,RSAA="@@redux-api-middleware/RSAA",mainTableBeforeMiddleware=function(f){return function(p){return function(e){if(e[RSAA]){var t=_objectSpread$2({},e),a="object"===index._typeof_1(e[RSAA].types[0])?e[RSAA].types[0].type:e[RSAA].types[0];if(REQUEST_REGEXP.test(a)){var r=a.match(REQUEST_REGEXP)[1],n=f.getState().mainTable[r],i=n.isLoading,l=n.filtersValue;if(i)return!1;if(l&&Object.keys(l).length){var s=utils.lodash_clonedeep(l);Object.entries(s).forEach(function(e){var t=utils.slicedToArray(e,2),a=t[0],r=t[1],n=Array.isArray(r)?r:[r];s[a]=utils.lodash_compact(n)});var o=t[RSAA].types[0].meta,d=o.disableFilters,u=o.requiredFilters;d&&u&&u.length&&Object.keys(s).forEach(function(e){u.indexOf(e)<0&&delete s[e]});var c=utils.queryString.stringify(s);c.length&&(t[RSAA].endpoint="".concat(t[RSAA].endpoint,"?").concat(c))}return p(t)}return p(t)}return p(e)}}};function ownKeys$1(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)}return a}function _objectSpread$1(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$1(a,!0).forEach(function(e){index.defineProperty(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys$1(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var MT_SAVE_TABLE_SCROLL="MT_SAVE_TABLE_SCROLL",saveTableScrollAction=function(e,t){return{type:MT_SAVE_TABLE_SCROLL,scroll:e,reducer:t}},MT_CHANGE_FILTERS_VALUE="MT_CHANGE_FILTERS_VALUE",changeFiltersValueAction=function(e,t){return{type:MT_CHANGE_FILTERS_VALUE,data:e,reducer:t}},MT_UPDATE_VISIBLE_COLUMNS="MT_UPDATE_VISIBLE_COLUMNS",updateVisibleColumnsAction=function(e,t){return{type:MT_UPDATE_VISIBLE_COLUMNS,data:e,reducer:t}},MT_GET_SUBLINE_DATA_REQUEST="MT_GET_SUBLINE_DATA_REQUEST",MT_GET_SUBLINE_DATA_SUCCESS="MT_GET_SUBLINE_DATA_SUCCESS",MT_GET_SUBLINE_DATA_FAILURE="MT_GET_SUBLINE_DATA_FAILURE",MTgetSubLineData=function(e){var t=e.id,a=e.subLineKey,r=void 0===a?"id":a,n=e.query,i=void 0===n?{}:n,l=e.url,s=e.reducer;return utils.crud({endpoint:l,query:_objectSpread$1({},i,index.defineProperty({},r,t)),crudTypes:{request:MT_GET_SUBLINE_DATA_REQUEST,success:MT_GET_SUBLINE_DATA_SUCCESS,failure:MT_GET_SUBLINE_DATA_FAILURE},meta:{reducer:s,subLineKey:r,id:t}})},MT_REMOVE_SUBLINE_DATA="MT_REMOVE_SUBLINE_DATA",MTremoveSubLineData=function(e){var t=e.id,a=e.reducer;return function(e){return e({type:MT_REMOVE_SUBLINE_DATA,id:t,reducer:a})}},MT_LIST_UPDATE_ITEMS="MT_LIST_UPDATE_ITEMS",MTupdateItemsAction=function(e,t){return{type:MT_LIST_UPDATE_ITEMS,items:e,reducer:t}},MT_LIST_AUTO_UPDATE_ITEM="MT_LIST_AUTO_UPDATE_ITEM",MTautoUpdateItemAction=function(e,t,a){return{type:MT_LIST_AUTO_UPDATE_ITEM,item:e,reducer:t,key:a}},MT_LIST_AUTO_UPDATE_ITEMS="MT_LIST_AUTO_UPDATE_ITEMS",MTautoUpdateItems=function(e,t){return{type:MT_LIST_AUTO_UPDATE_ITEMS,items:e,reducer:t}},MT_LIST_REMOVE_ITEM="MT_LIST_REMOVE_ITEM",MTlistRemoveItemAction=function(e,t,a){return{type:MT_LIST_REMOVE_ITEM,id:e,reducer:t,key:2<arguments.length&&void 0!==a?a:"id"}},MT_SET_ITEMS="MT_SET_ITEMS",MTsetItems=function(e,t){return{type:MT_SET_ITEMS,items:e,reducer:t}},filtersDataGetAction=function(e,t,a,r){return utils.crud({endpoint:t,query:a,meta:{modifyResponse:r},crudTypes:{request:"MT_FILTERS_DATA@".concat(e,"_REQUEST"),success:"MT_FILTERS_DATA@".concat(e,"_SUCCESS"),failure:"MT_FILTERS_DATA@".concat(e,"_FAILURE")}})},MT_DISABLE_ITEM_SWITCHER="MT_DISABLE_ITEM_SWITCH",disableItemSwitcherAction=function(e,t,a){return{type:MT_DISABLE_ITEM_SWITCHER,data:e,reducer:t,byIndex:a}},listGetAction=function(e,t,a,r,n){return utils.crud({endpoint:t,crudTypes:{request:"MT_LIST@".concat(e,"_REQUEST"),success:"MT_LIST@".concat(e,"_SUCCESS"),failure:"MT_LIST@".concat(e,"_FAILURE")},meta:{reloadItemsOnRequest:a,mainTableRequest:!0,disableFilters:r,requiredFilters:n}})},MTsaveTableScroll=function(t,a){return function(e){return e(saveTableScrollAction(t,a))}},MTchangeFiltersValue=function(t,a){return function(e){return e(changeFiltersValueAction(t,a))}},MTfiltersDataGet=function(t,a,r,n){return function(e){return e(filtersDataGetAction(t,a,r,n))}},MTupdateItems=function(t,a){return function(e){return e(MTupdateItemsAction(t,a))}},MTupdateVisibleColumns=function(t,a){return function(e){return e(updateVisibleColumnsAction(t,a))}},MTautoUpdateItem=function(t,a,r){return function(e){return e(MTautoUpdateItemAction(t,a,r))}},MTlistRemoveItem=function(t,a,r){return function(e){return e(MTlistRemoveItemAction(t,a,r))}},MTdisableItemSwitcher=function(t,a,r){return function(e){return e(disableItemSwitcherAction(t,a,r))}},MTlistGet=function(t,a,r,n,i){return function(e){return e(listGetAction(t,a,r,n,i))}};function ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)}return a}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(a,!0).forEach(function(e){index.defineProperty(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var REQUEST_LIST_REGEXP=/^MT_LIST@(.+)_REQUEST$/,SUCCESS_LIST_REGEXP=/^MT_LIST@(.+)_SUCCESS$/,FAILURE_LIST_REGEXP=/^MT_LIST@(.+)_FAILURE$/,SUCCESS_FILTERS_DATA_REGEXP=/^MT_FILTERS_DATA@(.+)_SUCCESS$/,tableExample={items:[],isLastPage:null,isLoading:!1,scroll:{},subLineData:{},filtersValue:{},blockedItems:[]},initialState={filtersData:{}},mainTableReducer=function(e,t){var a,r=0<arguments.length&&void 0!==e?e:initialState,n=1<arguments.length?t:void 0;if(n.type===MT_REMOVE_SUBLINE_DATA){var i=n.id,l=n.reducer;(a=utils.lodash_clonedeep(r))[l].subLineData[i]&&delete a[l].subLineData[i]}if(n.type===MT_GET_SUBLINE_DATA_REQUEST){var s=n.meta,o=s.id,d=s.subLineKey,u=s.reducer;(a=utils.lodash_clonedeep(r))[u].subLineData[o]={isLoading:!0,items:[],key:d}}if(n.type===MT_GET_SUBLINE_DATA_FAILURE){var c=n.meta,p=c.id,f=c.reducer;(a=utils.lodash_clonedeep(r))[f].subLineData[p]&&delete a[f].subLineData[p]}if(n.type===MT_GET_SUBLINE_DATA_SUCCESS){var m=n.meta,_=m.id,T=m.reducer,y=n.payload,b=y.status,E=y.payload,h=!!(a=utils.lodash_clonedeep(r))[T].subLineData[_];"OK"===b&&E.items.length&&h?(a[T].subLineData[_].isLoading=!1,a[T].subLineData[_].items=toConsumableArray.toConsumableArray(E.items)):h&&delete a[T].subLineData[_]}if(n.type===MT_LIST_REMOVE_ITEM){var g=n.id,S=n.reducer,v=n.key,R=void 0===v?"id":v,I=utils.lodash_clonedeep(r[S].items);I=(I=I.map(function(e){var t=utils.lodash_clonedeep(e),a=t.findIndex(function(e){return e[R]===g});return 0<=a&&delete t[a],t.filter(function(e){return Boolean(e)})})).filter(function(e){return Array.isArray(e)&&e.length}).filter(function(e){return Boolean(e)}),(a=utils.lodash_clonedeep(r))[S].items=I}if(n.type===MT_LIST_AUTO_UPDATE_ITEM){var x=n.item,L=n.reducer,A=n.key,C=void 0===A?"id":A,M=x[C],O=utils.lodash_clonedeep(r[L].items);O=O.map(function(e){var t=utils.lodash_clonedeep(e),a=t.findIndex(function(e){return e[C]===M});return 0<=a&&(t[a]=x),t}),(a=utils.lodash_clonedeep(r))[L].items=O}if(n.type===MT_SAVE_TABLE_SCROLL){var N=n.reducer,P=n.scroll,D=utils.lodash_clonedeep(r);a=_objectSpread({},D,index.defineProperty({},N,_objectSpread({},D[N],{scroll:P})))}if(n.type===MT_CHANGE_FILTERS_VALUE){var $=n.reducer,U=n.data,w=utils.lodash_clonedeep(r),k=_objectSpread({},w[$],{filtersValue:_objectSpread({},w[$].filtersValue,{},U)});Object.entries(k.filtersValue).forEach(function(e){var t=utils.slicedToArray(e,2),a=t[0],r=t[1];!1!==r&&void 0!==r||delete k.filtersValue[a]}),0===U.offset&&(k.items=[]),a=_objectSpread({},r,index.defineProperty({},n.reducer,k))}if(SUCCESS_FILTERS_DATA_REGEXP.test(n.type)){var F=n.type.match(SUCCESS_FILTERS_DATA_REGEXP)[1];if("OK"===n.payload.status){var j=n.payload.payload.items,B=n.meta.modifyResponse;(a=utils.lodash_clonedeep(r)).filtersData[F]=B?j.map(function(e){return{label:e[B.label],value:e[B.value]}}):j||[]}}if(n.type===MT_DISABLE_ITEM_SWITCHER){var V=n.data,q=n.reducer,H=n.byIndex;a=utils.lodash_clonedeep(r),H||Object.keys(V).forEach(function(e){if(V[e]){a[q].blockedItems.indexOf(e)<0&&a[q].blockedItems.push(e)}else{var t=a[q].blockedItems.indexOf(e);0<=t&&delete a[q].blockedItems[t]}}),a[q].blockedItems=a[q].blockedItems.filter(function(e){return e})}if(n.type===MT_SET_ITEMS){var G=n.items,J=n.reducer;(a=utils.lodash_clonedeep(r))[J].items=[utils.lodash_clonedeep(G)]}if(REQUEST_LIST_REGEXP.test(n.type)){var z=n.type.match(REQUEST_LIST_REGEXP)[1];(a=utils.lodash_clonedeep(r))[z].isLoading=!0}if(SUCCESS_LIST_REGEXP.test(n.type)){var W=n.type.match(SUCCESS_LIST_REGEXP)[1];if((a=utils.lodash_clonedeep(r))[W].isLoading=!1,"OK"===n.payload.status){var K=n.payload,Q=K.payload,X=Q.items,Y=Q.item,Z=K._meta,ee=void 0===Z?{is_last_page:!1,total:0}:Z,te=n.meta.reloadItemsOnRequest,ae=ee.is_last_page,re=ee.total;a[W].isLastPage=ae,a[W].total=re,X&&X.length||Y?a[W].items=te?[X||[Y]]:[].concat(toConsumableArray.toConsumableArray(a[W].items),[X||[Y]]):a[W].isLastPage=!0}else a[W].isLastPage=!0}if(FAILURE_LIST_REGEXP.test(n.type)){var ne=n.type.match(FAILURE_LIST_REGEXP)[1];(a=utils.lodash_clonedeep(r))[ne].isLoading=!1,a[ne].isLastPage=!0}if(n.type===MT_LIST_UPDATE_ITEMS){var ie=n.items,le=n.reducer;(a=utils.lodash_clonedeep(r))[le].items=ie}if(n.type===MT_UPDATE_VISIBLE_COLUMNS){var se=n.data,oe=n.reducer;(a=utils.lodash_clonedeep(r))[oe].visibleColumns=se}return a||r},mainTableReducer$1=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e){initialState[e]=utils.lodash_clonedeep(tableExample)}),mainTableReducer},FilterColumns=function(e){function s(e){var i;index$1.classCallCheck(this,s),i=index$1.possibleConstructorReturn(this,index$1.getPrototypeOf(s).call(this,e)),index.defineProperty(index$1.assertThisInitialized(i),"changeColumnState",function(r){i.setState(function(e){var t=utils.lodash_clonedeep(e.settingsColumns);t[r].active=!t[r].active;var a=[];return Object.keys(t).forEach(function(e){t[e].active&&a.push(t[e].active)}),a.length?{settingsColumns:t}:null},function(){i.updateSettingsColumnsStorage(),i.getVisibleColumns()})}),index.defineProperty(index$1.assertThisInitialized(i),"updateSettingsColumnsStorage",function(e){var t=i.props.tableName,a=JSON.stringify(e||i.state.settingsColumns);localStorage.setItem(t,a)}),index.defineProperty(index$1.assertThisInitialized(i),"getVisibleColumns",function(){var t=i.state.settingsColumns,e=i.props,a=e.mainTableName,r=e.dispatch,n=[];Object.keys(t).forEach(function(e){n.push(t[e].active)}),r(MTupdateVisibleColumns(n,a))}),index.defineProperty(index$1.assertThisInitialized(i),"selectMultiOpener",function(){i.setState(function(e){return{selectMultiOpened:!e.selectMultiOpened}})}),index.defineProperty(index$1.assertThisInitialized(i),"clickOut",function(e){var t=e.target;!document.querySelector(".select-multi").classList.contains("active")||t.classList.contains("select-multi")||t.closest(".select-multi")||i.setState({selectMultiOpened:!1})});var t=e.tableName,a=e.columnCategories,r=e.settingsColumns,n=localStorage.getItem(t),l=r;return n?l=JSON.parse(n):i.updateSettingsColumnsStorage(l),i.state={selectMultiOpened:!1,settingsColumns:l,columnCategories:a},i}return index$1.inherits(s,e),index$1.createClass(s,[{key:"componentDidMount",value:function(){this.getVisibleColumns(),utils.addEvent(window,"click",this.clickOut)}},{key:"componentWillUnmount",value:function(){utils.removeEvent(window,"click",this.clickOut)}},{key:"render",value:function(){var a=this,e=this.state,t=e.selectMultiOpened,r=e.columnCategories,n=e.settingsColumns;return React__default.default.createElement("div",{className:t?"select-multi active":"select-multi"},React__default.default.createElement("div",{role:"presentation",className:"select-multi__label",onClick:this.selectMultiOpener},this.props.title),React__default.default.createElement("ul",{className:"select-multi__list"},Object.keys(r).map(function(e){return React__default.default.createElement("li",{key:e},React__default.default.createElement("span",{className:"cat"},r[e]),utils.findByValue(n,e,"cat").map(function(e){var t=n[e];return React__default.default.createElement("span",{key:e,onClick:function(){if(t.fixed)return!1;a.changeColumnState(e)},className:"item".concat(t.active?" active":"").concat(t.fixed?" fixed":"")},t.name)}))})))}}]),s}(React.Component);index.defineProperty(FilterColumns,"defaultProps",{columnCategories:{0:"Колонки"},mainTableName:null,title:"Настройка колонок"}),index.defineProperty(FilterColumns,"propTypes",{tableName:index$1.propTypes.string.isRequired,columnCategories:index$1.propTypes.object,settingsColumns:index$1.propTypes.object.isRequired,mainTableName:index$1.propTypes.string,title:index$1.propTypes.string,dispatch:index$1.propTypes.func.isRequired}),FilterColumns.displayName="FilterColumns",exports.FilterColumns=FilterColumns,exports.MT_CHANGE_FILTERS_VALUE=MT_CHANGE_FILTERS_VALUE,exports.MT_DISABLE_ITEM_SWITCHER=MT_DISABLE_ITEM_SWITCHER,exports.MT_GET_SUBLINE_DATA_FAILURE=MT_GET_SUBLINE_DATA_FAILURE,exports.MT_GET_SUBLINE_DATA_REQUEST=MT_GET_SUBLINE_DATA_REQUEST,exports.MT_GET_SUBLINE_DATA_SUCCESS=MT_GET_SUBLINE_DATA_SUCCESS,exports.MT_LIST_AUTO_UPDATE_ITEM=MT_LIST_AUTO_UPDATE_ITEM,exports.MT_LIST_AUTO_UPDATE_ITEMS=MT_LIST_AUTO_UPDATE_ITEMS,exports.MT_LIST_REMOVE_ITEM=MT_LIST_REMOVE_ITEM,exports.MT_LIST_UPDATE_ITEMS=MT_LIST_UPDATE_ITEMS,exports.MT_REMOVE_SUBLINE_DATA=MT_REMOVE_SUBLINE_DATA,exports.MT_SAVE_TABLE_SCROLL=MT_SAVE_TABLE_SCROLL,exports.MT_UPDATE_VISIBLE_COLUMNS=MT_UPDATE_VISIBLE_COLUMNS,exports.MTautoUpdateItem=MTautoUpdateItem,exports.MTautoUpdateItems=MTautoUpdateItems,exports.MTchangeFiltersValue=MTchangeFiltersValue,exports.MTdisableItemSwitcher=MTdisableItemSwitcher,exports.MTfiltersDataGet=MTfiltersDataGet,exports.MTgetSubLineData=MTgetSubLineData,exports.MTlistGet=MTlistGet,exports.MTlistRemoveItem=MTlistRemoveItem,exports.MTremoveSubLineData=MTremoveSubLineData,exports.MTsaveTableScroll=MTsaveTableScroll,exports.MTsetItems=MTsetItems,exports.MTupdateItems=MTupdateItems,exports.MTupdateVisibleColumns=MTupdateVisibleColumns,exports.MainTable=MainTableComponent,exports.mainTableBeforeMiddleware=mainTableBeforeMiddleware,exports.mainTableReducer=mainTableReducer$1;
