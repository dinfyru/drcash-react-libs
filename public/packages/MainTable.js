function ___$insertStyle(e){if(e&&"undefined"!=typeof window){const t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}Object.defineProperty(exports,"__esModule",{value:!0});var getPrototypeOf=require("./getPrototypeOf-c2e42e90.js"),index=require("./index-8f50ebe2.js"),React=require("react"),index$1=require("./index-2a7a8792.js"),index$2=require("./index-565a9c6e.js"),_extends=require("./extends-748f8651.js"),utils=require("./utils-943d3f75.js");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var React__default=_interopDefaultLegacy(React),win="undefined"!=typeof window?window:void 0!==index.commonjsGlobal?index.commonjsGlobal:"undefined"!=typeof self?self:{},window_1=win,navigator$1=win.navigator,isIos=function(e){return/iPad|iPhone|iPod/.test(e.userAgent||"")||"MacIntel"===e.platform&&1<e.maxTouchPoints}(navigator$1||{});function _createSuper$6(r){var n=_isNativeReflectConstruct$6();return function(){var e,t=getPrototypeOf._getPrototypeOf(r);return t=n?(e=getPrototypeOf._getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),getPrototypeOf._possibleConstructorReturn(this,t)}}function _isNativeReflectConstruct$6(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var getAfterLineObjs=function(e,t,r){var n={};if(e&&Object.keys(t).length){var a=Object.keys(t);if(a.length){var o=t[a[0]].key,i=r.filter(function(e){return 0<=a.indexOf(e[o].toString())});if(i.length)for(var l=0;l<i.length;l+=1){var s=i[l][o];n[s]=t[s]}}}return n},TBodyPart=function(e){getPrototypeOf._inherits(l,e);var i=_createSuper$6(l);function l(e){var d;getPrototypeOf._classCallCheck(this,l),d=i.call(this,e),index._defineProperty(getPrototypeOf._assertThisInitialized(d),"generateFromTemplate",function(){return d.mainFabric()}),index._defineProperty(getPrototypeOf._assertThisInitialized(d),"mainFabric",function(){for(var n,e=d.props,r=e.tableTemplate,a=e.titleTemplate,l=e.partItems,u=e.visibleColumns,o=e.afterLineTemplate,s=e.afterLineData,p=d.state.afterLineObjs,c=[],f=[],i=[],t=0;t<l.length;t+=1)!function(o){var e,t=Object.keys(p);t.length&&(e=s[t[0]].key,0<=t.indexOf(l[o][e].toString())&&(f[o]={id:l[o][e],items:[]}));var i=[];a&&Array.isArray(a)&&a.forEach(function(e,t){e=e.columns.map(function(){return t});i.push.apply(i,_extends._toConsumableArray(e))}),r.forEach(function(e,t){var r=e.tbody;if(!u||u[t]){var n,a,e=l[o];if(c[o]||(c[o]=[],e.id&&(c[o].id=e.id)),"function"==typeof r.value)try{n=r.value(e)}catch(e){n="n/a"}else"string"==typeof r.value?n=r.value:!r.value&&r.key&&(n=e[r.key]);"function"==typeof r.className&&(a=r.className(e));r=r.props?index$2.lodash_clonedeep(r.props):{};i.length&&(r["js-title-index"]=i[t]),c[o][t]=a?React__default.default.createElement("td",_extends._extends({className:a},r),n):React__default.default.createElement("td",r,n)}})}(t);return f.length&&(f.forEach(function(e,c){for(var d=p[e.id].items,t=0;t<d.length;t+=1)!function(s){o.forEach(function(e,t){e=e.tbody;if(!u||u[t]){f[c].items[s]||(f[c].items[s]=[]);var r,n,a=d[s];if("function"==typeof e.value)try{r=e.value(a)}catch(e){r="n/a"}else r="string"==typeof e.value?e.value:!(e.value||!e.key)&&a[e.key];if("function"==typeof e.className){for(var o={},i="string"==typeof e.key?[e.key]:e.key,l=0;l<i.length;l+=1)o[i[l]]=a[i[l]];n=e.className(o)}f[c].items[s][t]=n?React__default.default.createElement("td",_extends._extends({className:n},e.props),r):React__default.default.createElement("td",e.props,r)}})}(t);d.length||f[c].items.push([React__default.default.createElement("td",{className:"no-border",colSpan:u.length},React__default.default.createElement("span",{className:"loading"},React__default.default.createElement("span",null)))])}),n=0,f.forEach(function(e,t){c.splice.apply(c,[t+n+1,0].concat(_extends._toConsumableArray(e.items)));for(var r=0;r<e.items.length;r++)i.push(r+t+n+1);n+=e.items.length})),{items:c,afterLineIndexes:i}});var t=d.props,r=t.rerenderById,n=t.partItems,a=t.afterLineTemplate,o=t.afterLineData,t=null;r&&n.find(function(e){return e.id===r})&&(t=r);e=getAfterLineObjs(a,o,e.partItems);return d.state={rerenderById:t,afterLineObjs:e},d}return getPrototypeOf._createClass(l,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=this.state.afterLineObjs,a=JSON.stringify(r.partItems)!==JSON.stringify(e.partItems),o=JSON.stringify(r.dataForRender)!==JSON.stringify(e.dataForRender),i=Boolean(t.rerenderById)&&r.rerenderById!==e.rerenderById,e=JSON.stringify(r.visibleColumns)!==JSON.stringify(e.visibleColumns),n=JSON.stringify(t.afterLineObjs)!==JSON.stringify(n);return a||o||i||e||n}},{key:"render",value:function(){var e=this.generateFromTemplate(),t=e.items,n=e.afterLineIndexes;return t.map(function(e,t){var r=0<=n.indexOf(t)?"mt_subline":"mt_line";return React__default.default.createElement("tr",{key:t,"data-id":e.id||t,className:r},React__default.default.createElement("td",{className:"padding-table"}," "),e.map(function(e,t){return React__default.default.createElement(React__default.default.Fragment,{key:t},e)}),React__default.default.createElement("td",{className:"padding-table"}," "))})}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(t.rerenderById&&!e.rerenderById&&t.partItems.find(function(e){return e.id===t.rerenderById}))return{rerenderById:t.rerenderById};return t.afterLineTemplate?{afterLineObjs:getAfterLineObjs(t.afterLineTemplate,t.afterLineData,t.partItems)}:null}}]),l}(React.Component);function _createSuper$5(r){var n=_isNativeReflectConstruct$5();return function(){var e,t=getPrototypeOf._getPrototypeOf(r);return t=n?(e=getPrototypeOf._getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),getPrototypeOf._possibleConstructorReturn(this,t)}}function _isNativeReflectConstruct$5(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}index._defineProperty(TBodyPart,"defaultProps",{rerenderById:null,visibleColumns:null,afterLineData:null,afterLineTemplate:null}),index._defineProperty(TBodyPart,"propTypes",{tableTemplate:index$1.propTypes.array.isRequired,partItems:index$1.propTypes.array.isRequired,dataForRender:index$1.propTypes.object.isRequired,rerenderById:index$1.propTypes.number,visibleColumns:index$1.propTypes.array,afterLineData:index$1.propTypes.object,afterLineTemplate:index$1.propTypes.array}),TBodyPart.displayName="TBodyPart";var TBody=function(e){getPrototypeOf._inherits(o,e);var a=_createSuper$5(o);function o(){var e;getPrototypeOf._classCallCheck(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=a.call.apply(a,[this].concat(r)),index._defineProperty(getPrototypeOf._assertThisInitialized(e),"blockedItemsPosition",function(){var a=e.props.refs.parent.current,o=document.querySelectorAll(".blocked-item");o.forEach(function(e,t){var r=o[t],n=r.getAttribute("item-data-id"),t=document.querySelector('tbody tr[data-id="'.concat(n,'"]'));t.length||(n=a.scrollTop+(Math.abs(utils.elemOffset(t).top)-utils.elemOffset(a).top)+1,t=t.offsetHeight-1,r.style.top="".concat(n,"px"),r.style.height="".concat(t,"px"),r.style.lineHeight="".concat(t,"px"))})}),e}return getPrototypeOf._createClass(o,[{key:"componentDidMount",value:function(){utils.addEvent(window,"resize",this.blockedItemsPosition)}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,r=JSON.stringify(t.items)!==JSON.stringify(e.items),n=JSON.stringify(t.dataForRender)!==JSON.stringify(e.dataForRender),a=t.rerenderById!==e.rerenderById,o=JSON.stringify(t.visibleColumns)!==JSON.stringify(e.visibleColumns),i=JSON.stringify(t.afterLineData)!==JSON.stringify(e.afterLineData),e=JSON.stringify(t.blockedItems)!==JSON.stringify(e.blockedItems);return r||n||a||o||i||e}},{key:"componentDidUpdate",value:function(){this.blockedItemsPosition()}},{key:"componentWillUnmount",value:function(){utils.removeEvent(window,"resize",this.blockedItemsPosition)}},{key:"render",value:function(){var e=this.props,t=e.items,r=e.tableTemplate,n=e.dataForRender,a=e.rerenderById,o=e.visibleColumns,i=e.afterLineTemplate,l=e.blockedItems,s=e.afterLineData,c=e.titleTemplate;return React__default.default.createElement(React__default.default.Fragment,null,t.map(function(e,t){return React__default.default.createElement(TBodyPart,{key:t,index:t,partItems:e,dataForRender:n,tableTemplate:r,rerenderById:a,visibleColumns:o,afterLineTemplate:i,afterLineData:s,titleTemplate:c})}),l.map(function(e){return React__default.default.createElement("tr",{className:"blocked-item",key:e,"item-data-id":e},React__default.default.createElement("td",null,React__default.default.createElement("span",{className:"loading"})))}))}}]),o}(React.Component);function _createSuper$4(r){var n=_isNativeReflectConstruct$4();return function(){var e,t=getPrototypeOf._getPrototypeOf(r);return t=n?(e=getPrototypeOf._getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),getPrototypeOf._possibleConstructorReturn(this,t)}}function _isNativeReflectConstruct$4(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}TBody.displayName="TBody";var ORDER_BY_DESC="DESC",ORDER_BY_ASC="ASC",THead=function(e){getPrototypeOf._inherits(a,e);var n=_createSuper$4(a);function a(){var b;getPrototypeOf._classCallCheck(this,a);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return b=n.call.apply(n,[this].concat(t)),index._defineProperty(getPrototypeOf._assertThisInitialized(b),"changeSortType",function(e,t){return t.sort_by===e&&t.sort_type===ORDER_BY_DESC?ORDER_BY_ASC:ORDER_BY_DESC}),index._defineProperty(getPrototypeOf._assertThisInitialized(b),"generateFromTemplate",function(){var e=b.props,t=e.tableTemplate,s=e.filtersValue,c=e.reducer,d=e.getItems,u=e.items,p=e.changeFiltersValue,f=e.softSort,_=e.sortType,m=e.sortBy,y=e.visibleColumns,r=e.titleTemplate,T=e.setItems,h=[],g=[];return r&&Array.isArray(r)&&r.forEach(function(e,t){e=e.columns.map(function(){return t});g.push.apply(g,_extends._toConsumableArray(e))}),t.forEach(function(e,t){var r,n,a,o,i,l;y&&!y[t]||(r=(i=e.thead).className,n=i.value,a=i.title,o=i.sortKey,l=i.sortLtr,i=e.thead,"function"==typeof(e=n)&&(e=n()),i=i.props?index$2.lodash_clonedeep(i.props):{},g.length&&(i["js-title-index"]=g[t]),l=React__default.default.createElement("th",_extends._extends({key:t,title:a||n,className:"".concat(r||"").concat(o?" cup":""),onClick:function(){if(!o)return!1;var t,n=b.changeSortType(o,s);f?(p({sort_type:n,sort_by:o},c),t=[],u.forEach(function(e){t.push.apply(t,_extends._toConsumableArray(index$2.lodash_clonedeep(e)))}),t=t.sort(function(e,t){var r=e[o],e=t[o],t=0;return e<r?t="DESC"===n?-1:1:r<e&&(t="DESC"===n?1:-1),t}),T(t,c)):d({sort_type:n,sort_by:o,offset:0},c)}},i),!(!l||!o)&&React__default.default.createElement("span",{className:"sorting ltr ".concat(m===o?_.toLowerCase():"")}),e,!(l||!o)&&React__default.default.createElement("span",{className:"sorting fal ".concat(m===o?_.toLowerCase():"")})),h.push(l))}),h}),b}return getPrototypeOf._createClass(a,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,r=JSON.stringify(t.items)!==JSON.stringify(e.items),n=JSON.stringify(t.tableTemplate)!==JSON.stringify(e.tableTemplate),a=JSON.stringify(t.sortType)!==JSON.stringify(e.sortType),o=JSON.stringify(t.sortBy)!==JSON.stringify(e.sortBy),i=JSON.stringify(t.visibleColumns)!==JSON.stringify(e.visibleColumns),e=JSON.stringify(t.dataForRender)!==JSON.stringify(e.dataForRender);return n||a||o||i||e||r}},{key:"render",value:function(){var e=this.props,t=e.isHidden,r=e.setRef,e=this.generateFromTemplate();return React__default.default.createElement("thead",{ref:r,className:t?"no-js":"js"},React__default.default.createElement("tr",null,React__default.default.createElement("th",{className:"padding-table"}," "),e,React__default.default.createElement("th",{className:"padding-table"}," ")))}}]),a}(React.Component);function _createSuper$3(r){var n=_isNativeReflectConstruct$3();return function(){var e,t=getPrototypeOf._getPrototypeOf(r);return t=n?(e=getPrototypeOf._getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),getPrototypeOf._possibleConstructorReturn(this,t)}}function _isNativeReflectConstruct$3(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}index._defineProperty(THead,"defaultProps",{getItems:function(){console.log('not imported function "getItems"')},reducer:"",filtersValue:{},sortType:null,sortBy:null,isHidden:!1,softSort:!1,visibleColumns:null}),index._defineProperty(THead,"propTypes",{tableTemplate:index$1.propTypes.array.isRequired,reducer:index$1.propTypes.string,getItems:index$1.propTypes.func,filtersValue:index$1.propTypes.object,sortType:index$1.propTypes.string,sortBy:index$1.propTypes.string,isHidden:index$1.propTypes.bool,setRef:index$1.propTypes.object.isRequired,changeFiltersValue:index$1.propTypes.func.isRequired,setItems:index$1.propTypes.func.isRequired,softSort:index$1.propTypes.bool,visibleColumns:index$1.propTypes.array}),THead.displayName="THead";var TTitle=function(e){getPrototypeOf._inherits(o,e);var a=_createSuper$3(o);function o(){var r;getPrototypeOf._classCallCheck(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=a.call.apply(a,[this].concat(t)),index._defineProperty(getPrototypeOf._assertThisInitialized(r),"generateFromTemplate",function(){var e=r.props,t=e.titleTemplate,o=e.visibleColumns,i=[],l=0;return t.forEach(function(e,t){var r,n=e.props,a=e.value,e=_extends._toConsumableArray(e.columns);o&&e.forEach(function(){o[l]&&(r=!0),l++}),o&&!r||(a=React__default.default.createElement("th",_extends._extends({key:t,"js-title-index":t},n),React__default.default.createElement("span",null,a)),i.push(a))}),i}),r}return getPrototypeOf._createClass(o,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,r=JSON.stringify(t.titleTemplate)!==JSON.stringify(e.titleTemplate),e=JSON.stringify(t.visibleColumns)!==JSON.stringify(e.visibleColumns);return r||e}},{key:"render",value:function(){var e=this.props.setRef,t=this.generateFromTemplate();return React__default.default.createElement("thead",{ref:e},React__default.default.createElement("tr",null,React__default.default.createElement("th",{className:"padding-table"}," "),t,React__default.default.createElement("th",{className:"padding-table"}," ")))}}]),o}(React.Component);function _createSuper$2(r){var n=_isNativeReflectConstruct$2();return function(){var e,t=getPrototypeOf._getPrototypeOf(r);return t=n?(e=getPrototypeOf._getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),getPrototypeOf._possibleConstructorReturn(this,t)}}function _isNativeReflectConstruct$2(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}index._defineProperty(TTitle,"defaultProps",{visibleColumns:null}),index._defineProperty(TTitle,"propTypes",{titleTemplate:index$1.propTypes.array.isRequired,visibleColumns:index$1.propTypes.array}),TTitle.displayName="TTitle";var TFoot=function(e){getPrototypeOf._inherits(o,e);var a=_createSuper$2(o);function o(){var r;getPrototypeOf._classCallCheck(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=a.call.apply(a,[this].concat(t)),index._defineProperty(getPrototypeOf._assertThisInitialized(r),"generateFromTemplate",function(){var e=r.props,t=e.tableTemplate,a=e.visibleColumns,e=e.tfootItem,o=[],i=e?e.item:null;return!!e&&(t.forEach(function(e,t){var r,n,e=e.tfoot;if(!a||!0===a[t])if(e){if("function"==typeof e.value)try{r=e.value(i)}catch(e){r="n/a"}else"string"==typeof e.value?r=e.value:!e.value&&e.key&&(r=i[e.key]);"function"==typeof e.className&&(n=e.className(i)),o[t]=n?React__default.default.createElement("td",_extends._extends({key:t,className:n},e.props),r):React__default.default.createElement("td",_extends._extends({key:t},e.props),r)}else o[t]=React__default.default.createElement("td",{key:t})}),o)}),r}return getPrototypeOf._createClass(o,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,r=JSON.stringify(t.tableTemplate)!==JSON.stringify(e.tableTemplate),n=JSON.stringify(t.visibleColumns)!==JSON.stringify(e.visibleColumns),a=JSON.stringify(t.dataForRender)!==JSON.stringify(e.dataForRender),o=JSON.stringify(t.tfootItem)!==JSON.stringify(e.tfootItem),i=JSON.stringify(t.items)!==JSON.stringify(e.items),e=JSON.stringify(t.tfootDataForRender)!==JSON.stringify(e.tfootDataForRender);return r||n||a||o||i||e}},{key:"render",value:function(){var e=this.props,t=e.setRef,r=e.tfootItem,n=e.isHidden,a=r?r.item:null,e=r?r.isLoading:null,r=this.generateFromTemplate();return React__default.default.createElement("tfoot",{ref:t,className:n?"no-js":"js"},!n&&this.props.tfootOtherTemplate,React__default.default.createElement("tr",{className:"tfoot-data",id:n?"":"tfoot-data"},React__default.default.createElement("td",{className:"padding-table"}," "),r,React__default.default.createElement("td",{className:"padding-table"}," ")),!(!a||!e||Object.keys(a).length||n)&&React__default.default.createElement("tr",{className:"tfoot-loading no-border"},React__default.default.createElement("td",null,React__default.default.createElement("span",{className:"loading"},React__default.default.createElement("span",null)))))}}]),o}(React.Component);function ownKeys$3(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread$3(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$3(Object(r),!0).forEach(function(e){index._defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$3(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _createSuper$1(r){var n=_isNativeReflectConstruct$1();return function(){var e,t=getPrototypeOf._getPrototypeOf(r);return t=n?(e=getPrototypeOf._getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),getPrototypeOf._possibleConstructorReturn(this,t)}}function _isNativeReflectConstruct$1(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}index._defineProperty(TFoot,"defaultProps",{visibleColumns:null,tfootItem:null,dataForRender:{},items:[],tfootDataForRender:null}),index._defineProperty(TFoot,"propTypes",{tableTemplate:index$1.propTypes.array.isRequired,setRef:index$1.propTypes.object.isRequired,dataForRender:index$1.propTypes.object,visibleColumns:index$1.propTypes.array,tfootItem:index$1.propTypes.object,items:index$1.propTypes.array,tfootDataForRender:index$1.propTypes.object}),TFoot.displayName="TFoot";var mobileAndTabletcheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))?!0:t};mobileAndTabletcheck();var MainTableComponent=function(e){getPrototypeOf._inherits(r,e);var t=_createSuper$1(r);function r(e){var L;return getPrototypeOf._classCallCheck(this,r),L=t.call(this,e),index._defineProperty(getPrototypeOf._assertThisInitialized(L),"scrollHeads",function(){var e=L.table,t=e.parent.current,r=e.theadVisible.current,n=e.tfoot.current,a=e.ttitle.current,o=L.props,i=o.id,l=o.tfootItem,s=o.leftMenuWidth,c=o.titleTemplate,d=o.tfootOtherTemplate,e=o.offsetHeight,o=o.fixedFooter;t&&(u=s-t.scrollLeft,isIos||mobileAndTabletcheck()||(u-=document.body.scrollLeft||document.documentElement.scrollLeft),r.style.left="".concat(u,"px"),(l||d)&&(n.style.left="".concat(u,"px"),n.style.width="".concat(t.clientWidth+t.scrollLeft,"px")),c&&(a.style.left="".concat(u,"px"),a.style.width="".concat(t.clientWidth+t.scrollLeft,"px")));var u,s=document.getElementsByClassName("page__content");s.length&&(l=(r=L.table).theadVisible.current,d=r.ttitle.current,c=document.getElementsByClassName("table__filters")[0],u=document.getElementsByClassName("switch__pages")[0],a=c?c.offsetHeight:0,r=u?u.offsetHeight:0,c=d?d.offsetHeight:0,r&&!a&&(r+=20),u=61+a+r,(d=l.getAttribute("js-data-top"))||(d=+window.getComputedStyle(l).top.split("px")[0],l.setAttribute("js-data-top",d)),L.addNewStyle(".page__content #".concat(i," .table__thead thead { top: ").concat(u+c+e-s[0].scrollTop,"px !important }")),n&&o&&(n.style.top="".concat(32+a+r+c+e+t.offsetHeight-s[0].scrollTop-(t.offsetHeight-t.clientHeight),"px"),n.style.bottom="initial"))}),index._defineProperty(getPrototypeOf._assertThisInitialized(L),"addNewStyle",function(e){var t=L.props.id,r=document.getElementById("".concat(t,"_js"));r||((r=document.createElement("style")).type="text/css",r.id="".concat(t,"_js"),document.getElementsByTagName("body")[0].appendChild(r)),r.innerHTML=e}),index._defineProperty(getPrototypeOf._assertThisInitialized(L),"resizeTableColumns",function(){var e=L.props,t=e.data,r=e.reducer,n=e.tfootItem,a=e.tfootOtherTemplate,o=e.titleTemplate;e.disableLazyLoad;var i=e.offsetHeight,l=e.fixedFooter,s=t[r],c=s.items,d=s.isLoading,u=s.isLastPage,p=L.table,f=p.parent.current,_=p.tbody.current,m=p.theadHidden.current,y=p.theadVisible.current,T=p.tfoot.current,e=p.ttitle.current,t=document.getElementsByClassName("table__filters")[0],r=document.getElementsByClassName("switch__pages")[0],s=t?t.offsetHeight:0,p=r?r.offsetHeight:0,t=e?e.offsetHeight:0;p&&!s&&(p+=20);var h,g,r=32+s+p,p=61+s+p;if(f.style.top="".concat(r+t+i,"px"),y.style.top="".concat(p+t+i,"px"),e&&(e.style.top="".concat(p,"px")),!d&&c.length||d&&null===u||!d&&null==u||!d&&!c.length&&u){y.style.width="".concat(_.offsetWidth,"px"),o&&(h=document.getElementsByTagName("html")[0],e.style.width="".concat(f.clientWidth+f.scrollLeft+h.scrollLeft,"px")),(n||a)&&(h=document.getElementsByClassName("page__content"),a=document.getElementsByTagName("html")[0],T.style.width="".concat(f.clientWidth+f.scrollLeft+a.scrollLeft,"px"),l?(T.style.top="".concat(r+t+i+f.offsetHeight-h[0].scrollTop-(f.offsetHeight-f.clientHeight),"px"),T.style.bottom="initial"):T.style.bottom="".concat(f.offsetHeight-f.clientHeight,"px"));for(var b,E=(c.length?(g="td",_.getElementsByTagName("tr")):(g="th",m.getElementsByTagName("tr")))[0].getElementsByTagName(g),S=y.getElementsByTagName("th"),R=0;R<E.length;R+=1){var v=Math.floor(E[R].offsetWidth);S[R].style.width="".concat(v,"px")}if(n&&!T.getElementsByClassName("no-border").length)for(var O=T.getElementsByTagName("td"),I=0;I<E.length;I+=1){var x=Math.floor(E[I].offsetWidth);O[I].style.width="".concat(x,"px")}o&&(b={},Array.prototype.forEach.call(E,function(e){var t=e.getAttribute("js-title-index");t&&(b[t]||(b[t]=0),b[t]+=+Math.floor(e.offsetWidth))}),Array.prototype.forEach.call(e.getElementsByTagName("th"),function(e,t){var r=e.getAttribute("js-title-index"),n=0,n=r?b[r]:0===t?+Math.floor(E[t].offsetWidth):+Math.floor(E[E.length-1].offsetWidth);e.style.width="".concat(n,"px")}))}L.scrollHeads()}),index._defineProperty(getPrototypeOf._assertThisInitialized(L),"lazyLoad",function(){var e=L.props,t=e.data,r=e.reducer;if(e.disableLazyLoad)return!1;e=t[r],t=e.isLastPage,r=e.isLoading;if(t||r)return!1;e=L.table.parent.current,t=L.table.tbody.current,r=t.offsetHeight-e.offsetHeight,e=Math.abs(utils.elemOffset(t).top-utils.elemOffset(e).top);r-document.getElementsByTagName("html")[0].offsetHeight/2<e&&L.getItems()}),index._defineProperty(getPrototypeOf._assertThisInitialized(L),"getItems",function(e){var t=L.props,r=t.listGet,n=t.changeFiltersValue,a=t.reducer,o=t.url,i=t.data,l=t.reloadItemsOnRequest,s=t.disableFilters,c=t.requiredFilters,d=i[a],t=d.filtersValue,i=t.offset,t=t.limit,d=d.filtersValue;n(e||{offset:i+t},a);var u=!0,p=_objectSpread$3(_objectSpread$3({},index$2.lodash_clonedeep(d)),index$2.lodash_clonedeep(e||{}));if(L.props.requiredFilterValues.forEach(function(e){p[e]||(u=!1)}),!L.state.canDoRequest||!u)return!1;r(a,o,l,s,c)}),L.state={colsCount:e.tableTemplate.length+2,canDoRequest:!e.requiredFilterValues.length},L.table={parent:React__default.default.createRef(),ttitle:React__default.default.createRef(),theadVisible:React__default.default.createRef(),theadHidden:React__default.default.createRef(),tbody:React__default.default.createRef(),tfoot:React__default.default.createRef(),tfootHidden:React__default.default.createRef()},L}return getPrototypeOf._createClass(r,[{key:"componentDidMount",value:function(){var e=this.props.onInit;"function"==typeof e&&e(this.getItems);var t=this.table.parent.current,r=this.props,n=r.reducer,a=r.listGet,o=r.url,i=r.data,l=r.history.action,s=r.initFiltersValue,c=r.changeFiltersValue,d=r.refreshTableOnPush,u=r.reloadItemsOnRequest,e=r.disableFilters,r=r.requiredFilters;s&&(Object.keys(i[n].filtersValue).length&&(!d||"PUSH"!==l&&"POP"!==l)||c(s,n)),(d&&("PUSH"===l||"POP"===l)||!i[n].items.length&&null===i[n].isLastPage)&&this.state.canDoRequest&&o&&a(n,o,u,e,r);r=document.getElementsByClassName("page__content");utils.addEvent(window,"resize",this.resizeTableColumns),utils.addEvent(t,"scroll",this.scrollHeads),utils.addEvent(window,"scroll",this.scrollHeads),utils.addEvent(document.body,"scroll",this.scrollHeads),r.length&&utils.addEvent(r[0],"scroll",this.scrollHeads),this.resizeTableColumns();var r=i[n],i=r.items,n=r.scroll;n&&(r=n.scrollLeft,n=n.scrollTop,i.length&&(n||r)&&this.table.parent.current.scrollTo(r,n))}},{key:"componentDidUpdate",value:function(){var e=new Event("resize");window.dispatchEvent(e)}},{key:"componentWillUnmount",value:function(){var e=this.table.parent,t=e.current,r=e.current,n=r.scrollTop,a=r.scrollLeft,o=this.props,i=o.saveTableScroll,e=o.reducer,r=document.getElementsByTagName("html")[0],o=document.getElementsByClassName("page__content");i({scrollTop:n,scrollLeft:a},e),utils.removeEvent(window,"resize",this.resizeTableColumns),utils.removeEvent(t,"scroll",this.scrollHeads),utils.removeEvent(r,"scroll",this.scrollHeads),utils.removeEvent(document.body,"scroll",this.scrollHeads),o.length&&utils.removeEvent(o[0],"scroll",this.scrollHeads)}},{key:"render",value:function(){var e=this.props,t=e.id,r=e.className,n=e.data,a=e.tableTemplate,o=e.reducer,i=e.changeFiltersValue,l=e.dataForRender,s=e.rerenderById,c=e.afterLineTemplate,d=e.tfootItem,u=e.tfootOtherTemplate,p=e.titleTemplate,f=e.visibleColumnsMiddleware,_=e.requiredFilterValuesMessage,m=e.noDataContent,y=e.setItems,T=e.softSort,h=n[o],g=h.isLoading,b=h.isLastPage,E=h.items,S=h.filtersValue,R=h.visibleColumns,v=h.blockedItems,e=h.subLineData,n=this.state,h=n.colsCount,n=n.canDoRequest,f=f(R),R=!E.length&&b&&!g&&n;return React__default.default.createElement("div",{id:t,ref:this.table.parent,className:"table-list__parent ".concat(r).concat(R?" table__no-data":""),onWheel:this.lazyLoad,onTouchMove:this.lazyLoad},!!p&&React__default.default.createElement("table",{className:"table__title table-list"},React__default.default.createElement(TTitle,{setRef:this.table.ttitle,titleTemplate:p,visibleColumns:f})),React__default.default.createElement("table",{className:"table__thead table-list"},React__default.default.createElement(THead,{setRef:this.table.theadVisible,tableTemplate:a,changeFiltersValue:i,filtersValue:S,isLastPage:b,getItems:this.getItems,reducer:o,softSort:T,setItems:y,sortType:S.sort_type,sortBy:S.sort_by,visibleColumns:f,dataForRender:index$2.lodash_clonedeep(l),items:index$2.lodash_clonedeep(E)})),React__default.default.createElement("table",{className:"table__tbody table-list"},React__default.default.createElement(THead,{setRef:this.table.theadHidden,changeFiltersValue:i,tableTemplate:a,titleTemplate:p,filtersValue:S,isLastPage:b,getItems:this.getItems,reducer:o,softSort:T,setItems:y,isHidden:!0,sortType:S.sort_type,sortBy:S.sort_by,visibleColumns:f,dataForRender:index$2.lodash_clonedeep(l),items:index$2.lodash_clonedeep(E)}),React__default.default.createElement("tbody",{ref:this.table.tbody},n?React__default.default.createElement(TBody,{items:index$2.lodash_clonedeep(E),tableTemplate:a,titleTemplate:p,rerenderById:s,dataForRender:index$2.lodash_clonedeep(l),visibleColumns:f,afterLineTemplate:c,afterLineData:e,blockedItems:v,refs:this.table}):React__default.default.createElement("tr",{className:"no-border"},React__default.default.createElement("td",{colSpan:h},React__default.default.createElement("span",{className:"no-data"},_))),!!R&&React__default.default.createElement("tr",{className:"no-border"},React__default.default.createElement("td",{colSpan:h},React__default.default.createElement("span",{className:"no-data"},m))),!!g&&React__default.default.createElement("tr",{className:"no-border"},React__default.default.createElement("td",{colSpan:h},React__default.default.createElement("span",{className:"loading"},React__default.default.createElement("span",null))))),!!d&&React__default.default.createElement(TFoot,{tableTemplate:a,dataForRender:index$2.lodash_clonedeep(l),tfootItem:d,isHidden:!0,setRef:this.table.tfootHidden,visibleColumns:f})),!(!d&&!u)&&React__default.default.createElement("table",{className:"table__thead table-list"},React__default.default.createElement(TFoot,{tableTemplate:a,dataForRender:index$2.lodash_clonedeep(l),tfootItem:d,items:index$2.lodash_clonedeep(E),tfootDataForRender:this.props.tfootDataForRender,tfootOtherTemplate:this.props.tfootOtherTemplate,setRef:this.table.tfoot,visibleColumns:f})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!e.url)return{};if(e.requiredFilterValues.length&&!t.canDoRequest){var r=!0,n=e.reducer,a=e.data,o=e.listGet,i=e.url,l=e.reloadItemsOnRequest,t=e.disableFilters,s=e.requiredFilters,c=a[n].filtersValue;return e.requiredFilterValues.forEach(function(e){c[e]||(r=!1)}),r&&o(n,i,l,t,s),{canDoRequest:r}}if(e.requiredFilterValues.length){var d=!0,s=e.reducer,u=e.data[s].filtersValue;if(e.requiredFilterValues.forEach(function(e){u[e]||(d=!1)}),!d)return{canDoRequest:d}}return{}}}]),r}(React.Component);function ownKeys$2(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread$2(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$2(Object(r),!0).forEach(function(e){index._defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$2(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}index._defineProperty(MainTableComponent,"defaultProps",{url:null,reducer:"",className:"",dataForRender:{},rerenderById:null,initFiltersValue:null,refreshTableOnPush:!1,onInit:null,afterLineTemplate:null,tfootItem:null,tfootDataForRender:null,reloadItemsOnRequest:!1,disableFilters:!1,leftMenuWidth:200,offsetHeight:0,titleTemplate:null,disableLazyLoad:!1,requiredFilters:[],softSort:!1,requiredFilterValues:[],visibleColumnsMiddleware:function(e){return e},requiredFilterValuesMessage:"Empty required filters",noDataContent:"No data"}),index._defineProperty(MainTableComponent,"propTypes",{url:index$1.propTypes.string,id:index$1.propTypes.string.isRequired,tableTemplate:index$1.propTypes.array.isRequired,titleTemplate:index$1.propTypes.array,reducer:index$1.propTypes.string,data:index$1.propTypes.object.isRequired,className:index$1.propTypes.string,dataForRender:index$1.propTypes.object,rerenderById:index$1.propTypes.number,offsetHeight:index$1.propTypes.number,initFiltersValue:index$1.propTypes.object,refreshTableOnPush:index$1.propTypes.bool,listGet:index$1.propTypes.func.isRequired,reloadItemsOnRequest:index$1.propTypes.bool,saveTableScroll:index$1.propTypes.func.isRequired,changeFiltersValue:index$1.propTypes.func.isRequired,history:index$1.propTypes.object.isRequired,onInit:index$1.propTypes.func,softSort:index$1.propTypes.bool,setItems:index$1.propTypes.func.isRequired,afterLineTemplate:index$1.propTypes.array,tfootItem:index$1.propTypes.object,tfootDataForRender:index$1.propTypes.object,leftMenuWidth:index$1.propTypes.number,disableFilters:index$1.propTypes.bool,requiredFilters:index$1.propTypes.array,visibleColumnsMiddleware:index$1.propTypes.func,requiredFilterValues:index$1.propTypes.array,disableLazyLoad:index$1.propTypes.bool,requiredFilterValuesMessage:index$1.propTypes.string,noDataContent:index$1.propTypes.oneOfType([index$1.propTypes.string,index$1.propTypes.object])}),MainTableComponent.displayName="MainTableComponent";var REQUEST_REGEXP=/^MT_LIST@(.+)_REQUEST$/,RSAA="@@redux-api-middleware/RSAA",mainTableBeforeMiddleware=function(l){return function(i){return function(e){if(e[RSAA]){var t=_objectSpread$2({},e),r="object"===index._typeof(e[RSAA].types[0])?e[RSAA].types[0].type:e[RSAA].types[0];if(REQUEST_REGEXP.test(r)){var n,a,o=r.match(REQUEST_REGEXP)[1],r=l.getState().mainTable[o],o=r.isLoading,r=r.filtersValue;return o?!1:(r&&Object.keys(r).length&&(n=index$2.lodash_clonedeep(r),Object.entries(n).forEach(function(e){var t=index$2._slicedToArray(e,2),e=t[0],t=t[1],t=Array.isArray(t)?t:[t];n[e]=utils.lodash_compact(t)}),r=(o=t[RSAA].types[0].meta).disableFilters,a=o.requiredFilters,r&&a&&a.length&&Object.keys(n).forEach(function(e){a.indexOf(e)<0&&delete n[e]}),(r=utils.queryString.stringify(n)).length&&(t[RSAA].endpoint="".concat(t[RSAA].endpoint,"?").concat(r))),i(t))}return i(t)}return i(e)}}};function ownKeys$1(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread$1(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$1(Object(r),!0).forEach(function(e){index._defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var MT_SAVE_TABLE_SCROLL="MT_SAVE_TABLE_SCROLL",saveTableScrollAction=function(e,t){return{type:MT_SAVE_TABLE_SCROLL,scroll:e,reducer:t}},MT_CHANGE_FILTERS_VALUE="MT_CHANGE_FILTERS_VALUE",changeFiltersValueAction=function(e,t){return{type:MT_CHANGE_FILTERS_VALUE,data:e,reducer:t}},MT_UPDATE_VISIBLE_COLUMNS="MT_UPDATE_VISIBLE_COLUMNS",updateVisibleColumnsAction=function(e,t){return{type:MT_UPDATE_VISIBLE_COLUMNS,data:e,reducer:t}},MT_GET_SUBLINE_DATA_REQUEST="MT_GET_SUBLINE_DATA_REQUEST",MT_GET_SUBLINE_DATA_SUCCESS="MT_GET_SUBLINE_DATA_SUCCESS",MT_GET_SUBLINE_DATA_FAILURE="MT_GET_SUBLINE_DATA_FAILURE",MTgetSubLineData=function(e){var t=e.id,r=e.subLineKey,n=void 0===r?"id":r,a=e.query,r=e.url,e=e.reducer;return utils.crud({endpoint:r,query:_objectSpread$1(_objectSpread$1({},void 0===a?{}:a),{},index._defineProperty({},n,t)),crudTypes:{request:MT_GET_SUBLINE_DATA_REQUEST,success:MT_GET_SUBLINE_DATA_SUCCESS,failure:MT_GET_SUBLINE_DATA_FAILURE},meta:{reducer:e,subLineKey:n,id:t}})},MT_REMOVE_SUBLINE_DATA="MT_REMOVE_SUBLINE_DATA",MTremoveSubLineData=function(e){var t=e.id,r=e.reducer;return function(e){return e({type:MT_REMOVE_SUBLINE_DATA,id:t,reducer:r})}},MT_LIST_UPDATE_ITEMS="MT_LIST_UPDATE_ITEMS",MTupdateItemsAction=function(e,t){return{type:MT_LIST_UPDATE_ITEMS,items:e,reducer:t}},MT_LIST_AUTO_UPDATE_ITEM="MT_LIST_AUTO_UPDATE_ITEM",MTautoUpdateItemAction=function(e,t,r){return{type:MT_LIST_AUTO_UPDATE_ITEM,item:e,reducer:t,key:r}},MT_LIST_AUTO_UPDATE_ITEMS="MT_LIST_AUTO_UPDATE_ITEMS",MTautoUpdateItems=function(e,t){return{type:MT_LIST_AUTO_UPDATE_ITEMS,items:e,reducer:t}},MT_LIST_REMOVE_ITEM="MT_LIST_REMOVE_ITEM",MTlistRemoveItemAction=function(e,t){return{type:MT_LIST_REMOVE_ITEM,id:e,reducer:t,key:2<arguments.length&&void 0!==arguments[2]?arguments[2]:"id"}},MT_SET_ITEMS="MT_SET_ITEMS",MTsetItems=function(e,t){return{type:MT_SET_ITEMS,items:e,reducer:t}},filtersDataGetAction=function(e,t,r,n){return utils.crud({endpoint:t,query:r,meta:{modifyResponse:n},crudTypes:{request:"MT_FILTERS_DATA@".concat(e,"_REQUEST"),success:"MT_FILTERS_DATA@".concat(e,"_SUCCESS"),failure:"MT_FILTERS_DATA@".concat(e,"_FAILURE")}})},MT_DISABLE_ITEM_SWITCHER="MT_DISABLE_ITEM_SWITCH",disableItemSwitcherAction=function(e,t,r){return{type:MT_DISABLE_ITEM_SWITCHER,data:e,reducer:t,byIndex:r}},listGetAction=function(e,t,r,n,a){return utils.crud({endpoint:t,crudTypes:{request:"MT_LIST@".concat(e,"_REQUEST"),success:"MT_LIST@".concat(e,"_SUCCESS"),failure:"MT_LIST@".concat(e,"_FAILURE")},meta:{reloadItemsOnRequest:r,mainTableRequest:!0,disableFilters:n,requiredFilters:a}})},MTsaveTableScroll=function(t,r){return function(e){return e(saveTableScrollAction(t,r))}},MTchangeFiltersValue=function(t,r){return function(e){return e(changeFiltersValueAction(t,r))}},MTfiltersDataGet=function(t,r,n,a){return function(e){return e(filtersDataGetAction(t,r,n,a))}},MTupdateItems=function(t,r){return function(e){return e(MTupdateItemsAction(t,r))}},MTupdateVisibleColumns=function(t,r){return function(e){return e(updateVisibleColumnsAction(t,r))}},MTautoUpdateItem=function(t,r,n){return function(e){return e(MTautoUpdateItemAction(t,r,n))}},MTlistRemoveItem=function(t,r,n){return function(e){return e(MTlistRemoveItemAction(t,r,n))}},MTdisableItemSwitcher=function(t,r,n){return function(e){return e(disableItemSwitcherAction(t,r,n))}},MTlistGet=function(t,r,n,a,o){return function(e){return e(listGetAction(t,r,n,a,o))}};function ownKeys(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){index._defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var REQUEST_LIST_REGEXP=/^MT_LIST@(.+)_REQUEST$/,SUCCESS_LIST_REGEXP=/^MT_LIST@(.+)_SUCCESS$/,FAILURE_LIST_REGEXP=/^MT_LIST@(.+)_FAILURE$/,SUCCESS_FILTERS_DATA_REGEXP=/^MT_FILTERS_DATA@(.+)_SUCCESS$/,tableExample={items:[],isLastPage:null,isLoading:!1,scroll:{},subLineData:{},filtersValue:{},blockedItems:[]},initialState={filtersData:{}},mainTableReducer=function(){var e,t,r,n,a,o,i,l,s,c,d,u,p,f,_,m,y,T,h,g,b,E,S,R,v,O,I,x,L,P,C=0<arguments.length&&void 0!==arguments[0]?arguments[0]:initialState,M=1<arguments.length?arguments[1]:void 0;return M.type===MT_REMOVE_SUBLINE_DATA&&(r=M.id,e=M.reducer,(t=index$2.lodash_clonedeep(C))[e].subLineData[r]&&delete t[e].subLineData[r]),M.type===MT_GET_SUBLINE_DATA_REQUEST&&(i=(r=M.meta).id,n=r.subLineKey,r=r.reducer,(t=index$2.lodash_clonedeep(C))[r].subLineData[i]={isLoading:!0,items:[],key:n}),M.type===MT_GET_SUBLINE_DATA_FAILURE&&(o=(a=M.meta).id,l=a.reducer,(t=index$2.lodash_clonedeep(C))[l].subLineData[o]&&delete t[l].subLineData[o]),M.type===MT_GET_SUBLINE_DATA_SUCCESS&&(n=(i=M.meta).id,a=i.reducer,o=(l=M.payload).status,i=l.payload,l=!!(t=index$2.lodash_clonedeep(C))[a].subLineData[n],"OK"===o&&i.items.length&&l?(t[a].subLineData[n].isLoading=!1,t[a].subLineData[n].items=_extends._toConsumableArray(i.items)):l&&delete t[a].subLineData[n]),M.type===MT_LIST_REMOVE_ITEM&&(s=M.id,u=M.reducer,_=M.key,c=void 0===_?"id":_,_=(_=(_=index$2.lodash_clonedeep(C[u].items)).map(function(e){var t=index$2.lodash_clonedeep(e),e=t.findIndex(function(e){return e[c]===s});return 0<=e&&delete t[e],t.filter(function(e){return Boolean(e)})})).filter(function(e){return Array.isArray(e)&&e.length}).filter(function(e){return Boolean(e)}),(t=index$2.lodash_clonedeep(C))[u].items=_),M.type===MT_LIST_AUTO_UPDATE_ITEM&&(d=M.item,u=M.reducer,_=M.key,f=d[p=void 0===_?"id":_],_=(_=index$2.lodash_clonedeep(C[u].items)).map(function(e){var t=index$2.lodash_clonedeep(e),e=t.findIndex(function(e){return e[p]===f});return 0<=e&&(t[e]=d),t}),(t=index$2.lodash_clonedeep(C))[u].items=_),M.type===MT_SAVE_TABLE_SCROLL&&(y=M.reducer,T=M.scroll,m=index$2.lodash_clonedeep(C),t=_objectSpread(_objectSpread({},m),{},index._defineProperty({},y,_objectSpread(_objectSpread({},m[y]),{},{scroll:T})))),M.type===MT_CHANGE_FILTERS_VALUE&&(m=M.reducer,y=M.data,T=index$2.lodash_clonedeep(C),h=_objectSpread(_objectSpread({},T[m]),{},{filtersValue:_objectSpread(_objectSpread({},T[m].filtersValue),y)}),Object.entries(h.filtersValue).forEach(function(e){var t=index$2._slicedToArray(e,2),e=t[0],t=t[1];!1!==t&&void 0!==t||delete h.filtersValue[e]}),0===y.offset&&(h.items=[]),t=_objectSpread(_objectSpread({},C),{},index._defineProperty({},M.reducer,h))),SUCCESS_FILTERS_DATA_REGEXP.test(M.type)&&(S=M.type.match(SUCCESS_FILTERS_DATA_REGEXP)[1],"OK"===M.payload.status&&(x=M.payload.payload.items,g=M.meta.modifyResponse,(t=index$2.lodash_clonedeep(C)).filtersData[S]=g?x.map(function(e){return{label:e[g.label],value:e[g.value]}}):x||[])),M.type===MT_DISABLE_ITEM_SWITCHER&&(b=M.data,E=M.reducer,O=M.byIndex,t=index$2.lodash_clonedeep(C),O||Object.keys(b).forEach(function(e){b[e]?t[E].blockedItems.indexOf(e)<0&&t[E].blockedItems.push(e):0<=(e=t[E].blockedItems.indexOf(e))&&delete t[E].blockedItems[e]}),t[E].blockedItems=t[E].blockedItems.filter(function(e){return e})),M.type===MT_SET_ITEMS&&(v=M.items,R=M.reducer,(t=index$2.lodash_clonedeep(C))[R].items=[index$2.lodash_clonedeep(v)]),REQUEST_LIST_REGEXP.test(M.type)&&(I=M.type.match(REQUEST_LIST_REGEXP)[1],(t=index$2.lodash_clonedeep(C))[I].isLoading=!0),SUCCESS_LIST_REGEXP.test(M.type)&&(S=M.type.match(SUCCESS_LIST_REGEXP)[1],(t=index$2.lodash_clonedeep(C))[S].isLoading=!1,"OK"===M.payload.status?(R=(O=(x=M.payload).payload).items,v=O.item,I=x._meta,O=M.meta.reloadItemsOnRequest,I=(x=void 0===I?{is_last_page:!1,total:0}:I).is_last_page,x=x.total,t[S].isLastPage=I,t[S].total=x,R&&R.length||v?t[S].items=O?[R||[v]]:[].concat(_extends._toConsumableArray(t[S].items),[R||[v]]):t[S].isLastPage=!0):t[S].isLastPage=!0),FAILURE_LIST_REGEXP.test(M.type)&&(L=M.type.match(FAILURE_LIST_REGEXP)[1],(t=index$2.lodash_clonedeep(C))[L].isLoading=!1,t[L].isLastPage=!0),M.type===MT_LIST_UPDATE_ITEMS&&(P=M.items,L=M.reducer,(t=index$2.lodash_clonedeep(C))[L].items=P),M.type===MT_UPDATE_VISIBLE_COLUMNS&&(P=M.data,M=M.reducer,(t=index$2.lodash_clonedeep(C))[M].visibleColumns=P),t||C},mainTableReducer$1=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e){initialState[e]=index$2.lodash_clonedeep(tableExample)}),mainTableReducer};function _createSuper(r){var n=_isNativeReflectConstruct();return function(){var e,t=getPrototypeOf._getPrototypeOf(r);return t=n?(e=getPrototypeOf._getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),getPrototypeOf._possibleConstructorReturn(this,t)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var FilterColumns=function(e){getPrototypeOf._inherits(o,e);var n=_createSuper(o);function o(e){var a;getPrototypeOf._classCallCheck(this,o),a=n.call(this,e),index._defineProperty(getPrototypeOf._assertThisInitialized(a),"changeColumnState",function(n){a.setState(function(e){var t=index$2.lodash_clonedeep(e.settingsColumns);t[n].active=!t[n].active;var r=[];return Object.keys(t).forEach(function(e){t[e].active&&r.push(t[e].active)}),r.length?{settingsColumns:t}:null},function(){a.updateSettingsColumnsStorage(),a.getVisibleColumns()})}),index._defineProperty(getPrototypeOf._assertThisInitialized(a),"updateSettingsColumnsStorage",function(e){var t=a.props.tableName,e=JSON.stringify(e||a.state.settingsColumns);localStorage.setItem(t,e)}),index._defineProperty(getPrototypeOf._assertThisInitialized(a),"getVisibleColumns",function(){var t=a.state.settingsColumns,e=a.props,r=e.mainTableName,e=e.dispatch,n=[];Object.keys(t).forEach(function(e){n.push(t[e].active)}),e(MTupdateVisibleColumns(n,r))}),index._defineProperty(getPrototypeOf._assertThisInitialized(a),"selectMultiOpener",function(){a.setState(function(e){return{selectMultiOpened:!e.selectMultiOpened}})}),index._defineProperty(getPrototypeOf._assertThisInitialized(a),"clickOut",function(e){e=e.target;!document.querySelector(".select-multi").classList.contains("active")||e.classList.contains("select-multi")||e.closest(".select-multi")||a.setState({selectMultiOpened:!1})});var t=e.tableName,r=e.columnCategories,e=e.settingsColumns,t=localStorage.getItem(t),e=e;return t?e=JSON.parse(t):a.updateSettingsColumnsStorage(e),a.state={selectMultiOpened:!1,settingsColumns:e,columnCategories:r},a}return getPrototypeOf._createClass(o,[{key:"componentDidMount",value:function(){this.getVisibleColumns(),utils.addEvent(window,"click",this.clickOut)}},{key:"componentWillUnmount",value:function(){utils.removeEvent(window,"click",this.clickOut)}},{key:"render",value:function(){var r=this,e=this.state,t=e.selectMultiOpened,n=e.columnCategories,a=e.settingsColumns;return React__default.default.createElement("div",{className:t?"select-multi active":"select-multi"},React__default.default.createElement("div",{role:"presentation",className:"select-multi__label",onClick:this.selectMultiOpener},this.props.title),React__default.default.createElement("ul",{className:"select-multi__list"},Object.keys(n).map(function(e){return React__default.default.createElement("li",{key:e},React__default.default.createElement("span",{className:"cat"},n[e]),utils.findByValue(a,e,"cat").map(function(e){var t=a[e];return React__default.default.createElement("span",{key:e,onClick:function(){if(t.fixed)return!1;r.changeColumnState(e)},className:"item".concat(t.active?" active":"").concat(t.fixed?" fixed":"")},t.name)}))})))}}]),o}(React.Component);index._defineProperty(FilterColumns,"defaultProps",{columnCategories:{0:"Колонки"},mainTableName:null,title:"Настройка колонок"}),index._defineProperty(FilterColumns,"propTypes",{tableName:index$1.propTypes.string.isRequired,columnCategories:index$1.propTypes.object,settingsColumns:index$1.propTypes.object.isRequired,mainTableName:index$1.propTypes.string,title:index$1.propTypes.string,dispatch:index$1.propTypes.func.isRequired}),FilterColumns.displayName="FilterColumns",exports.FilterColumns=FilterColumns,exports.MT_CHANGE_FILTERS_VALUE=MT_CHANGE_FILTERS_VALUE,exports.MT_DISABLE_ITEM_SWITCHER=MT_DISABLE_ITEM_SWITCHER,exports.MT_GET_SUBLINE_DATA_FAILURE=MT_GET_SUBLINE_DATA_FAILURE,exports.MT_GET_SUBLINE_DATA_REQUEST=MT_GET_SUBLINE_DATA_REQUEST,exports.MT_GET_SUBLINE_DATA_SUCCESS=MT_GET_SUBLINE_DATA_SUCCESS,exports.MT_LIST_AUTO_UPDATE_ITEM=MT_LIST_AUTO_UPDATE_ITEM,exports.MT_LIST_AUTO_UPDATE_ITEMS=MT_LIST_AUTO_UPDATE_ITEMS,exports.MT_LIST_REMOVE_ITEM=MT_LIST_REMOVE_ITEM,exports.MT_LIST_UPDATE_ITEMS=MT_LIST_UPDATE_ITEMS,exports.MT_REMOVE_SUBLINE_DATA=MT_REMOVE_SUBLINE_DATA,exports.MT_SAVE_TABLE_SCROLL=MT_SAVE_TABLE_SCROLL,exports.MT_UPDATE_VISIBLE_COLUMNS=MT_UPDATE_VISIBLE_COLUMNS,exports.MTautoUpdateItem=MTautoUpdateItem,exports.MTautoUpdateItems=MTautoUpdateItems,exports.MTchangeFiltersValue=MTchangeFiltersValue,exports.MTdisableItemSwitcher=MTdisableItemSwitcher,exports.MTfiltersDataGet=MTfiltersDataGet,exports.MTgetSubLineData=MTgetSubLineData,exports.MTlistGet=MTlistGet,exports.MTlistRemoveItem=MTlistRemoveItem,exports.MTremoveSubLineData=MTremoveSubLineData,exports.MTsaveTableScroll=MTsaveTableScroll,exports.MTsetItems=MTsetItems,exports.MTupdateItems=MTupdateItems,exports.MTupdateVisibleColumns=MTupdateVisibleColumns,exports.MainTable=MainTableComponent,exports.mainTableBeforeMiddleware=mainTableBeforeMiddleware,exports.mainTableReducer=mainTableReducer$1;
