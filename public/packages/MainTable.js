"use strict";function ___$insertStyle(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var win,__chunk_1=require("./chunk-4303bea9.js"),__chunk_2=require("./chunk-3adc7329.js"),__chunk_3=require("./chunk-c7bed517.js"),React=require("react"),React__default=_interopDefault(React),__chunk_4=require("./chunk-1ad05ee2.js"),crud=require("./crud.js"),window_1=win="undefined"!=typeof window?window:void 0!==__chunk_1.commonjsGlobal?__chunk_1.commonjsGlobal:"undefined"!=typeof self?self:{},navigator$1=window_1.navigator,isIos=function(e){return/iPad|iPhone|iPod/.test(e)}(navigator$1?navigator$1.userAgent:""),getAfterLineObjs=function(e,t,n){var r={};if(e&&Object.keys(t).length){var a,i=Object.keys(t);if(i.length){a=t[i[0]].key;var s=n.filter(function(e){return 0<=i.indexOf(e[a].toString())});if(s.length)for(var o=0;o<s.length;o+=1){var l=s[o][a];r[l]=t[l]}}}return r},TBodyPart=function(e){function l(e){var f;__chunk_3._classCallCheck(this,l),f=__chunk_3._possibleConstructorReturn(this,__chunk_3._getPrototypeOf(l).call(this,e)),__chunk_1._defineProperty(__chunk_3._assertThisInitialized(f),"generateFromTemplate",function(){return f.mainFabric()}),__chunk_1._defineProperty(__chunk_3._assertThisInitialized(f),"mainFabric",function(){for(var e=f.props,n=e.tableTemplate,r=e.titleTemplate,_=e.partItems,d=e.visibleColumns,a=e.afterLineTemplate,i=e.afterLineData,s=f.state.afterLineObjs,c=[],p=[],o=[],t=function(o){var e=Object.keys(s);if(e.length){var t=i[e[0]].key;0<=e.indexOf(_[o][t].toString())&&(p[o]={id:_[o][t],items:[]})}var l=[];r&&Array.isArray(r)&&r.forEach(function(e,t){var n=e.columns.map(function(){return t});l.push.apply(l,__chunk_2._toConsumableArray(n))}),n.forEach(function(e,t){var n=e.tbody;if(!d||d[t]){var r,a,i=_[o];if(c[o]||(c[o]=[],i.id&&(c[o].id=i.id)),"function"==typeof n.value)try{r=n.value(i)}catch(e){r="n/a"}else"string"==typeof n.value?r=n.value:!n.value&&n.key&&(r=i[n.key]);"function"==typeof n.className&&(a=n.className(i));var s=n.props?__chunk_4.cloneDeep(n.props):{};l.length&&(s["js-title-index"]=l[t]),c[o][t]=a?React__default.createElement("td",__chunk_2._extends({className:a},s),r):React__default.createElement("td",s,r)}})},l=0;l<_.length;l+=1)t(l);if(p.length){p.forEach(function(e,c){for(var u=s[e.id].items,t=function(_){a.forEach(function(e,t){var n=e.tbody;if(!d||d[t]){p[c].items[_]||(p[c].items[_]=[]);var r,a,i=u[_];if("function"==typeof n.value)try{r=n.value(i)}catch(e){r="n/a"}else r="string"==typeof n.value?n.value:!(n.value||!n.key)&&i[n.key];if("function"==typeof n.className){for(var s={},o="string"==typeof n.key?[n.key]:n.key,l=0;l<o.length;l+=1)s[o[l]]=i[o[l]];a=n.className(s)}p[c].items[_][t]=a?React__default.createElement("td",__chunk_2._extends({className:a},n.props),r):React__default.createElement("td",n.props,r)}})},n=0;n<u.length;n+=1)t(n);u.length||p[c].items.push([React__default.createElement("td",{className:"no-border",colSpan:d.length},React__default.createElement("span",{className:"loading"},React__default.createElement("span",null)))])});var u=0;p.forEach(function(e,t){c.splice.apply(c,[t+u+1,0].concat(__chunk_2._toConsumableArray(e.items)));for(var n=0;n<e.items.length;n++)o.push(n+t+u+1);u+=e.items.length})}return{items:c,afterLineIndexes:o}});var t=f.props,n=t.rerenderById,r=t.partItems,a=t.afterLineTemplate,i=t.afterLineData,s=null;n&&r.find(function(e){return e.id===n})&&(s=n);var o=getAfterLineObjs(a,i,e.partItems);return f.state={rerenderById:s,afterLineObjs:o},f}return __chunk_3._inherits(l,e),__chunk_3._createClass(l,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,r=this.state.afterLineObjs,a=JSON.stringify(n.partItems)!==JSON.stringify(e.partItems),i=JSON.stringify(n.dataForRender)!==JSON.stringify(e.dataForRender),s=Boolean(t.rerenderById)&&n.rerenderById!==e.rerenderById,o=JSON.stringify(n.visibleColumns)!==JSON.stringify(e.visibleColumns),l=JSON.stringify(t.afterLineObjs)!==JSON.stringify(r);return a||i||s||o||l}},{key:"render",value:function(){var e=this.generateFromTemplate(),t=e.items,r=e.afterLineIndexes;return t.map(function(e,t){var n=0<=r.indexOf(t)?"mt_subline":"mt_line";return React__default.createElement("tr",{key:t,"data-id":e.id?e.id:t,className:n},React__default.createElement("td",{className:"padding-table"}," "),e.map(function(e,t){return React__default.createElement(React__default.Fragment,{key:t},e)}),React__default.createElement("td",{className:"padding-table"}," "))})}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(t.rerenderById&&!e.rerenderById&&t.partItems.find(function(e){return e.id===t.rerenderById}))return{rerenderById:t.rerenderById};return t.afterLineTemplate?{afterLineObjs:getAfterLineObjs(t.afterLineTemplate,t.afterLineData,t.partItems)}:null}}]),l}(React.Component);__chunk_1._defineProperty(TBodyPart,"defaultProps",{rerenderById:null,visibleColumns:null,afterLineData:null,afterLineTemplate:null}),__chunk_1._defineProperty(TBodyPart,"propTypes",{tableTemplate:__chunk_3.PropTypes.array.isRequired,partItems:__chunk_3.PropTypes.array.isRequired,dataForRender:__chunk_3.PropTypes.object.isRequired,rerenderById:__chunk_3.PropTypes.number,visibleColumns:__chunk_3.PropTypes.array,afterLineData:__chunk_3.PropTypes.object,afterLineTemplate:__chunk_3.PropTypes.array}),TBodyPart.displayName="TBodyPart";var TBody=function(e){function i(){var e,t;__chunk_3._classCallCheck(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=__chunk_3._possibleConstructorReturn(this,(e=__chunk_3._getPrototypeOf(i)).call.apply(e,[this].concat(r))),__chunk_1._defineProperty(__chunk_3._assertThisInitialized(t),"blockedItemsPosition",function(){var o=t.props.refs.parent.current,l=document.querySelectorAll(".blocked-item");l.forEach(function(e,t){var n=l[t],r=n.getAttribute("item-data-id"),a=document.querySelector('tbody tr[data-id="'.concat(r,'"]'));if(!a.length){var i=o.scrollTop+(Math.abs(__chunk_4.elemOffset(a).top)-__chunk_4.elemOffset(o).top)+1,s=a.offsetHeight-1;n.style.top="".concat(i,"px"),n.style.height="".concat(s,"px"),n.style.lineHeight="".concat(s,"px")}})}),t}return __chunk_3._inherits(i,e),__chunk_3._createClass(i,[{key:"componentDidMount",value:function(){__chunk_4.addEvent(window,"resize",this.blockedItemsPosition)}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=JSON.stringify(t.items)!==JSON.stringify(e.items),r=JSON.stringify(t.dataForRender)!==JSON.stringify(e.dataForRender),a=t.rerenderById!==e.rerenderById,i=JSON.stringify(t.visibleColumns)!==JSON.stringify(e.visibleColumns),s=JSON.stringify(t.afterLineData)!==JSON.stringify(e.afterLineData),o=JSON.stringify(t.blockedItems)!==JSON.stringify(e.blockedItems);return n||r||a||i||s||o}},{key:"componentDidUpdate",value:function(){this.blockedItemsPosition()}},{key:"componentWillUnmount",value:function(){__chunk_4.removeEvent(window,"resize",this.blockedItemsPosition)}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.tableTemplate,r=e.dataForRender,a=e.rerenderById,i=e.visibleColumns,s=e.afterLineTemplate,o=e.blockedItems,l=e.afterLineData,_=e.titleTemplate;return React__default.createElement(React__default.Fragment,null,t.map(function(e,t){return React__default.createElement(TBodyPart,{key:t,index:t,partItems:e,dataForRender:r,tableTemplate:n,rerenderById:a,visibleColumns:i,afterLineTemplate:s,afterLineData:l,titleTemplate:_})}),o.map(function(e){return React__default.createElement("tr",{className:"blocked-item",key:e,"item-data-id":e},React__default.createElement("td",null,React__default.createElement("span",{className:"loading"})))}))}}]),i}(React.Component);TBody.displayName="TBody";var ORDER_BY_DESC="DESC",ORDER_BY_ASC="ASC",THead=function(e){function a(){var e,v;__chunk_3._classCallCheck(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v=__chunk_3._possibleConstructorReturn(this,(e=__chunk_3._getPrototypeOf(a)).call.apply(e,[this].concat(n))),__chunk_1._defineProperty(__chunk_3._assertThisInitialized(v),"changeSortType",function(e,t){return t.sort_by!==e?ORDER_BY_DESC:t.sort_type===ORDER_BY_DESC?ORDER_BY_ASC:ORDER_BY_DESC}),__chunk_1._defineProperty(__chunk_3._assertThisInitialized(v),"generateFromTemplate",function(){var e=v.props,t=e.tableTemplate,d=e.filtersValue,p=e.reducer,f=e.getItems,m=e.items,h=e.changeFiltersValue,T=e.softSort,y=e.sortType,E=e.sortBy,b=e.visibleColumns,n=e.titleTemplate,g=e.setItems,k=[],S=[];return n&&Array.isArray(n)&&n.forEach(function(e,t){var n=e.columns.map(function(){return t});S.push.apply(S,__chunk_2._toConsumableArray(n))}),t.forEach(function(e,t){if(!b||b[t]){var n=e.thead,r=n.className,a=n.value,i=n.title,s=n.sortKey,o=n.sortLtr,l=e.thead,_=a;"function"==typeof a&&(_=a());var c=l.props?__chunk_4.cloneDeep(l.props):{};S.length&&(c["js-title-index"]=S[t]);var u=React__default.createElement("th",__chunk_2._extends({key:t,title:i||a,className:"".concat(r||"").concat(s?" cup":""),onClick:function(){if(!s)return!1;var i=v.changeSortType(s,d);if(T){h({sort_type:i,sort_by:s},p);var n=[];m.forEach(function(e){var t;(t=n).push.apply(t,__chunk_2._toConsumableArray(__chunk_4.cloneDeep(e)))}),n=n.sort(function(e,t){var n=e[s],r=t[s],a=0;return r<n?a="DESC"===i?-1:1:n<r&&(a="DESC"===i?1:-1),a}),g(n,p)}else f({sort_type:i,sort_by:s,offset:0},p)}},c),!(!o||!s)&&React__default.createElement("span",{className:"sorting ltr ".concat(E===s?y.toLowerCase():"")}),_,!(o||!s)&&React__default.createElement("span",{className:"sorting fal ".concat(E===s?y.toLowerCase():"")}));k.push(u)}}),k}),v}return __chunk_3._inherits(a,e),__chunk_3._createClass(a,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=JSON.stringify(t.items)!==JSON.stringify(e.items),r=JSON.stringify(t.tableTemplate)!==JSON.stringify(e.tableTemplate),a=JSON.stringify(t.sortType)!==JSON.stringify(e.sortType),i=JSON.stringify(t.sortBy)!==JSON.stringify(e.sortBy),s=JSON.stringify(t.visibleColumns)!==JSON.stringify(e.visibleColumns),o=JSON.stringify(t.dataForRender)!==JSON.stringify(e.dataForRender);return r||a||i||s||o||n}},{key:"render",value:function(){var e=this.props,t=e.isHidden,n=e.setRef,r=this.generateFromTemplate();return React__default.createElement("thead",{ref:n,className:t?"no-js":"js"},React__default.createElement("tr",null,React__default.createElement("th",{className:"padding-table"}," "),r,React__default.createElement("th",{className:"padding-table"}," ")))}}]),a}(React.Component);__chunk_1._defineProperty(THead,"defaultProps",{getItems:function(){console.log('not imported function "getItems"')},reducer:"",filtersValue:{},sortType:null,sortBy:null,isHidden:!1,softSort:!1,visibleColumns:null}),__chunk_1._defineProperty(THead,"propTypes",{tableTemplate:__chunk_3.PropTypes.array.isRequired,reducer:__chunk_3.PropTypes.string,getItems:__chunk_3.PropTypes.func,filtersValue:__chunk_3.PropTypes.object,sortType:__chunk_3.PropTypes.string,sortBy:__chunk_3.PropTypes.string,isHidden:__chunk_3.PropTypes.bool,setRef:__chunk_3.PropTypes.object.isRequired,changeFiltersValue:__chunk_3.PropTypes.func.isRequired,setItems:__chunk_3.PropTypes.func.isRequired,softSort:__chunk_3.PropTypes.bool,visibleColumns:__chunk_3.PropTypes.array}),THead.displayName="THead";var TTitle=function(e){function i(){var e,n;__chunk_3._classCallCheck(this,i);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=__chunk_3._possibleConstructorReturn(this,(e=__chunk_3._getPrototypeOf(i)).call.apply(e,[this].concat(r))),__chunk_1._defineProperty(__chunk_3._assertThisInitialized(n),"generateFromTemplate",function(){var e=n.props,t=e.titleTemplate,o=e.visibleColumns,l=[],_=0;return t.forEach(function(e,t){var n,r=e.props,a=e.value,i=__chunk_2._toConsumableArray(e.columns);if(o&&i.forEach(function(){o[_]&&(n=!0),_++}),!o||n){var s=React__default.createElement("th",__chunk_2._extends({key:t,"js-title-index":t},r),React__default.createElement("span",null,a));l.push(s)}}),l}),n}return __chunk_3._inherits(i,e),__chunk_3._createClass(i,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=JSON.stringify(t.titleTemplate)!==JSON.stringify(e.titleTemplate),r=JSON.stringify(t.visibleColumns)!==JSON.stringify(e.visibleColumns);return n||r}},{key:"render",value:function(){var e=this.props.setRef,t=this.generateFromTemplate();return React__default.createElement("thead",{ref:e},React__default.createElement("tr",null,React__default.createElement("th",{className:"padding-table"}," "),t,React__default.createElement("th",{className:"padding-table"}," ")))}}]),i}(React.Component);__chunk_1._defineProperty(TTitle,"defaultProps",{visibleColumns:null}),__chunk_1._defineProperty(TTitle,"propTypes",{titleTemplate:__chunk_3.PropTypes.array.isRequired,visibleColumns:__chunk_3.PropTypes.array}),TTitle.displayName="TTitle";var TFoot=function(e){function i(){var e,r;__chunk_3._classCallCheck(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r=__chunk_3._possibleConstructorReturn(this,(e=__chunk_3._getPrototypeOf(i)).call.apply(e,[this].concat(n))),__chunk_1._defineProperty(__chunk_3._assertThisInitialized(r),"generateFromTemplate",function(){var e=r.props,t=e.tableTemplate,i=e.visibleColumns,n=e.tfootItem,s=[],o=n?n.item:null;return!!n&&(t.forEach(function(e,t){var n,r,a=e.tfoot;if(!i||!0===i[t])if(a){if("function"==typeof a.value)try{n=a.value(o)}catch(e){n="n/a"}else"string"==typeof a.value?n=a.value:!a.value&&a.key&&(n=o[a.key]);"function"==typeof a.className&&(r=a.className(o)),s[t]=r?React__default.createElement("td",__chunk_2._extends({key:t,className:r},a.props),n):React__default.createElement("td",__chunk_2._extends({key:t},a.props),n)}else s[t]=React__default.createElement("td",{key:t})}),s)}),r}return __chunk_3._inherits(i,e),__chunk_3._createClass(i,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=JSON.stringify(t.tableTemplate)!==JSON.stringify(e.tableTemplate),r=JSON.stringify(t.visibleColumns)!==JSON.stringify(e.visibleColumns),a=JSON.stringify(t.dataForRender)!==JSON.stringify(e.dataForRender),i=JSON.stringify(t.tfootItem)!==JSON.stringify(e.tfootItem),s=JSON.stringify(t.items)!==JSON.stringify(e.items),o=JSON.stringify(t.tfootDataForRender)!==JSON.stringify(e.tfootDataForRender);return n||r||a||i||s||o}},{key:"render",value:function(){var e=this.props,t=e.setRef,n=e.tfootItem,r=e.isHidden,a=n?n.item:null,i=n?n.isLoading:null,s=this.generateFromTemplate();return React__default.createElement("tfoot",{ref:t,className:r?"no-js":"js"},!r&&this.props.tfootOtherTemplate,React__default.createElement("tr",{className:"tfoot-data",id:r?"":"tfoot-data"},React__default.createElement("td",{className:"padding-table"}," "),s,React__default.createElement("td",{className:"padding-table"}," ")),!(!a||!i||Object.keys(a).length||r)&&React__default.createElement("tr",{className:"tfoot-loading no-border"},React__default.createElement("td",null,React__default.createElement("span",{className:"loading"},React__default.createElement("span",null)))))}}]),i}(React.Component);function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(n,!0).forEach(function(e){__chunk_1._defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}__chunk_1._defineProperty(TFoot,"defaultProps",{visibleColumns:null,tfootItem:null,dataForRender:{},items:[],tfootDataForRender:null}),__chunk_1._defineProperty(TFoot,"propTypes",{tableTemplate:__chunk_3.PropTypes.array.isRequired,setRef:__chunk_3.PropTypes.object.isRequired,dataForRender:__chunk_3.PropTypes.object,visibleColumns:__chunk_3.PropTypes.array,tfootItem:__chunk_3.PropTypes.object,items:__chunk_3.PropTypes.array,tfootDataForRender:__chunk_3.PropTypes.object}),TFoot.displayName="TFoot";var mobileAndTabletcheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},isMobileOrTablet=mobileAndTabletcheck(),MainTableComponent=function(e){function t(e){var B;return __chunk_3._classCallCheck(this,t),B=__chunk_3._possibleConstructorReturn(this,__chunk_3._getPrototypeOf(t).call(this,e)),__chunk_1._defineProperty(__chunk_3._assertThisInitialized(B),"scrollHeads",function(){var e=B.table,t=e.parent.current,n=e.theadVisible.current,r=e.tfoot.current,a=e.ttitle.current,i=B.props,s=i.id,o=i.tfootItem,l=i.leftMenuWidth,_=i.titleTemplate,c=i.tfootOtherTemplate,u=i.offsetHeight,d=i.fixedFooter;if(t){var p=l-t.scrollLeft;isIos||mobileAndTabletcheck()||(p-=document.body.scrollLeft||document.documentElement.scrollLeft),n.style.left="".concat(p,"px"),(o||c)&&(r.style.left="".concat(p,"px"),r.style.width="".concat(t.clientWidth+t.scrollLeft,"px")),_&&(a.style.left="".concat(p,"px"),a.style.width="".concat(t.clientWidth+t.scrollLeft,"px"))}var f=document.getElementsByClassName("page__content");if(f.length){var m=B.table,h=m.theadVisible.current,T=m.ttitle.current,y=document.getElementsByClassName("table__filters")[0],E=document.getElementsByClassName("switch__pages")[0],b=y?y.offsetHeight:0,g=E?E.offsetHeight:0,k=T?T.offsetHeight:0;g&&!b&&(g+=20);var S=61+b+g,v=h.getAttribute("js-data-top");if(!v)v=+window.getComputedStyle(h).top.split("px")[0],h.setAttribute("js-data-top",v);if(B.addNewStyle(".page__content #".concat(s," .table__thead thead { top: ").concat(S+k+u-f[0].scrollTop,"px !important }")),r&&d){var R=32+b+g;r.style.top="".concat(R+k+u+t.offsetHeight-f[0].scrollTop-(t.offsetHeight-t.clientHeight),"px"),r.style.bottom="initial"}}}),__chunk_1._defineProperty(__chunk_3._assertThisInitialized(B),"addNewStyle",function(e){var t=B.props.id,n=document.getElementById("".concat(t,"_js"));n||((n=document.createElement("style")).type="text/css",n.id="".concat(t,"_js"),document.getElementsByTagName("body")[0].appendChild(n)),n.innerHTML=e}),__chunk_1._defineProperty(__chunk_3._assertThisInitialized(B),"resizeTableColumns",function(){var e=B.props,t=e.data,n=e.reducer,r=e.tfootItem,a=e.tfootOtherTemplate,i=e.titleTemplate,s=(e.disableLazyLoad,e.offsetHeight),o=e.fixedFooter,l=t[n],_=l.items,c=l.isLoading,u=l.isLastPage,d=B.table,p=d.parent.current,f=d.tbody.current,m=d.theadHidden.current,h=d.theadVisible.current,T=d.tfoot.current,y=d.ttitle.current,E=document.getElementsByClassName("table__filters")[0],b=document.getElementsByClassName("switch__pages")[0],g=E?E.offsetHeight:0,k=b?b.offsetHeight:0,S=y?y.offsetHeight:0;k&&!g&&(k+=20);var v=32+g+k,R=61+g+k;if(p.style.top="".concat(v+S+s,"px"),h.style.top="".concat(R+S+s,"px"),y&&(y.style.top="".concat(R,"px")),!c&&_.length||c&&null===u||!c&&null==u||!c&&!_.length&&u){if(h.style.width="".concat(f.offsetWidth,"px"),i){var I=document.getElementsByTagName("html")[0];y.style.width="".concat(p.clientWidth+p.scrollLeft+I.scrollLeft,"px")}if(r||a){var L=document.getElementsByClassName("page__content"),M=document.getElementsByTagName("html")[0];T.style.width="".concat(p.clientWidth+p.scrollLeft+M.scrollLeft,"px"),o?(T.style.top="".concat(v+S+s+p.offsetHeight-L[0].scrollTop-(p.offsetHeight-p.clientHeight),"px"),T.style.bottom="initial"):T.style.bottom="".concat(p.offsetHeight-p.clientHeight,"px")}for(var P,O=(_.length?(P="td",f.getElementsByTagName("tr")):(P="th",m.getElementsByTagName("tr")))[0].getElementsByTagName(P),C=h.getElementsByTagName("th"),A=0;A<O.length;A+=1){var D=Math.floor(O[A].offsetWidth);C[A].style.width="".concat(D,"px")}if(r&&!T.getElementsByClassName("no-border").length)for(var N=T.getElementsByTagName("td"),U=0;U<O.length;U+=1){var w=Math.floor(O[U].offsetWidth);N[U].style.width="".concat(w,"px")}if(i){var F={};Array.prototype.forEach.call(O,function(e){var t=e.getAttribute("js-title-index");t&&(F[t]||(F[t]=0),F[t]+=+Math.floor(e.offsetWidth))}),Array.prototype.forEach.call(y.getElementsByTagName("th"),function(e,t){var n=e.getAttribute("js-title-index"),r=0;r=n?F[n]:0===t?+Math.floor(O[t].offsetWidth):+Math.floor(O[O.length-1].offsetWidth),e.style.width="".concat(r,"px")})}}B.scrollHeads()}),__chunk_1._defineProperty(__chunk_3._assertThisInitialized(B),"lazyLoad",function(){var e=B.props,t=e.data,n=e.reducer;if(e.disableLazyLoad)return!1;var r=t[n],a=r.isLastPage,i=r.isLoading;if(a||i)return!1;var s=B.table.parent.current,o=B.table.tbody.current,l=o.offsetHeight-s.offsetHeight,_=Math.abs(__chunk_4.elemOffset(o).top-__chunk_4.elemOffset(s).top);l-document.getElementsByTagName("html")[0].offsetHeight/2<_&&B.getItems()}),__chunk_1._defineProperty(__chunk_3._assertThisInitialized(B),"getItems",function(e){var t=B.props,n=t.listGet,r=t.changeFiltersValue,a=t.reducer,i=t.url,s=t.data,o=t.reloadItemsOnRequest,l=t.disableFilters,_=t.requiredFilters,c=s[a],u=c.filtersValue,d=u.offset,p=u.limit,f=c.filtersValue;r(e||{offset:d+p},a);var m=!0,h=_objectSpread({},__chunk_4.cloneDeep(f),{},__chunk_4.cloneDeep(e||{}));if(B.props.requiredFilterValues.forEach(function(e){h[e]||(m=!1)}),!B.state.canDoRequest||!m)return!1;n(a,i,o,l,_)}),B.state={colsCount:e.tableTemplate.length+2,canDoRequest:!e.requiredFilterValues.length},B.table={parent:React__default.createRef(),ttitle:React__default.createRef(),theadVisible:React__default.createRef(),theadHidden:React__default.createRef(),tbody:React__default.createRef(),tfoot:React__default.createRef(),tfootHidden:React__default.createRef()},B}return __chunk_3._inherits(t,e),__chunk_3._createClass(t,[{key:"componentDidMount",value:function(){var e=this.props.onInit;"function"==typeof e&&e(this.getItems);var t=this.table.parent.current,n=this.props,r=n.reducer,a=n.listGet,i=n.url,s=n.data,o=n.history.action,l=n.initFiltersValue,_=n.changeFiltersValue,c=n.refreshTableOnPush,u=n.reloadItemsOnRequest,d=n.disableFilters,p=n.requiredFilters;l&&(!Object.keys(s[r].filtersValue).length||c&&"PUSH"===o)&&_(l,r),(c&&"PUSH"===o||!s[r].items.length&&null===s[r].isLastPage)&&this.state.canDoRequest&&i&&a(r,i,u,d,p);var f=document.getElementsByClassName("page__content");__chunk_4.addEvent(window,"resize",this.resizeTableColumns),__chunk_4.addEvent(t,"scroll",this.scrollHeads),__chunk_4.addEvent(window,"scroll",this.scrollHeads),__chunk_4.addEvent(document.body,"scroll",this.scrollHeads),f.length&&__chunk_4.addEvent(f[0],"scroll",this.scrollHeads),this.resizeTableColumns();var m=s[r],h=m.items,T=m.scroll;if(T){var y=T.scrollLeft,E=T.scrollTop;h.length&&(E||y)&&this.table.parent.current.scrollTo(y,E)}}},{key:"componentDidUpdate",value:function(){var e=new Event("resize");window.dispatchEvent(e)}},{key:"componentWillUnmount",value:function(){var e=this.table.parent,t=e.current,n=e.current,r=n.scrollTop,a=n.scrollLeft,i=this.props,s=i.saveTableScroll,o=i.reducer,l=document.getElementsByTagName("html")[0],_=document.getElementsByClassName("page__content");s({scrollTop:r,scrollLeft:a},o),__chunk_4.removeEvent(window,"resize",this.resizeTableColumns),__chunk_4.removeEvent(t,"scroll",this.scrollHeads),__chunk_4.removeEvent(l,"scroll",this.scrollHeads),__chunk_4.removeEvent(document.body,"scroll",this.scrollHeads),_.length&&__chunk_4.removeEvent(_[0],"scroll",this.scrollHeads)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.className,r=e.data,a=e.tableTemplate,i=e.reducer,s=e.changeFiltersValue,o=e.dataForRender,l=e.rerenderById,_=e.afterLineTemplate,c=e.tfootItem,u=e.tfootOtherTemplate,d=e.titleTemplate,p=e.visibleColumnsMiddleware,f=e.requiredFilterValuesMessage,m=e.noDataContent,h=e.setItems,T=e.softSort,y=r[i],E=y.isLoading,b=y.isLastPage,g=y.items,k=y.filtersValue,S=y.visibleColumns,v=y.blockedItems,R=y.subLineData,I=this.state,L=I.colsCount,M=I.canDoRequest,P=p(S),O=!g.length&&b&&!E&&M;return React__default.createElement("div",{id:t,ref:this.table.parent,className:"table-list__parent ".concat(n).concat(O?" table__no-data":""),onWheel:this.lazyLoad,onTouchMove:this.lazyLoad},!!d&&React__default.createElement("table",{className:"table__title table-list"},React__default.createElement(TTitle,{setRef:this.table.ttitle,titleTemplate:d,visibleColumns:P})),React__default.createElement("table",{className:"table__thead table-list"},React__default.createElement(THead,{setRef:this.table.theadVisible,tableTemplate:a,changeFiltersValue:s,filtersValue:k,isLastPage:b,getItems:this.getItems,reducer:i,softSort:T,setItems:h,sortType:k.sort_type,sortBy:k.sort_by,visibleColumns:P,dataForRender:__chunk_4.cloneDeep(o),items:__chunk_4.cloneDeep(g)})),React__default.createElement("table",{className:"table__tbody table-list"},React__default.createElement(THead,{setRef:this.table.theadHidden,changeFiltersValue:s,tableTemplate:a,titleTemplate:d,filtersValue:k,isLastPage:b,getItems:this.getItems,reducer:i,softSort:T,setItems:h,isHidden:!0,sortType:k.sort_type,sortBy:k.sort_by,visibleColumns:P,dataForRender:__chunk_4.cloneDeep(o),items:__chunk_4.cloneDeep(g)}),React__default.createElement("tbody",{ref:this.table.tbody},M?React__default.createElement(TBody,{items:__chunk_4.cloneDeep(g),tableTemplate:a,titleTemplate:d,rerenderById:l,dataForRender:__chunk_4.cloneDeep(o),visibleColumns:P,afterLineTemplate:_,afterLineData:R,blockedItems:v,refs:this.table}):React__default.createElement("tr",{className:"no-border"},React__default.createElement("td",{colSpan:L},React__default.createElement("span",{className:"no-data"},f))),!!O&&React__default.createElement("tr",{className:"no-border"},React__default.createElement("td",{colSpan:L},React__default.createElement("span",{className:"no-data"},m))),!!E&&React__default.createElement("tr",{className:"no-border"},React__default.createElement("td",{colSpan:L},React__default.createElement("span",{className:"loading"},React__default.createElement("span",null))))),!!c&&React__default.createElement(TFoot,{tableTemplate:a,dataForRender:__chunk_4.cloneDeep(o),tfootItem:c,isHidden:!0,setRef:this.table.tfootHidden,visibleColumns:P})),!(!c&&!u)&&React__default.createElement("table",{className:"table__thead table-list"},React__default.createElement(TFoot,{tableTemplate:a,dataForRender:__chunk_4.cloneDeep(o),tfootItem:c,items:__chunk_4.cloneDeep(g),tfootDataForRender:this.props.tfootDataForRender,tfootOtherTemplate:this.props.tfootOtherTemplate,setRef:this.table.tfoot,visibleColumns:P})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!e.url)return{};if(e.requiredFilterValues.length&&!t.canDoRequest){var n=!0,r=e.reducer,a=e.data,i=e.listGet,s=e.url,o=e.reloadItemsOnRequest,l=e.disableFilters,_=e.requiredFilters,c=a[r].filtersValue;return e.requiredFilterValues.forEach(function(e){c[e]||(n=!1)}),n&&i(r,s,o,l,_),{canDoRequest:n}}if(e.requiredFilterValues.length){var u=!0,d=e.reducer,p=e.data[d].filtersValue;if(e.requiredFilterValues.forEach(function(e){p[e]||(u=!1)}),!u)return{canDoRequest:u}}return{}}}]),t}(React.Component);function ownKeys$1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function _objectSpread$1(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$1(n,!0).forEach(function(e){__chunk_1._defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$1(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}__chunk_1._defineProperty(MainTableComponent,"defaultProps",{url:null,reducer:"",className:"",dataForRender:{},rerenderById:null,initFiltersValue:null,refreshTableOnPush:!1,onInit:null,afterLineTemplate:null,tfootItem:null,tfootDataForRender:null,reloadItemsOnRequest:!1,disableFilters:!1,leftMenuWidth:200,offsetHeight:0,titleTemplate:null,disableLazyLoad:!1,requiredFilters:[],softSort:!1,requiredFilterValues:[],visibleColumnsMiddleware:function(e){return e},requiredFilterValuesMessage:"Empty required filters",noDataContent:"No data"}),__chunk_1._defineProperty(MainTableComponent,"propTypes",{url:__chunk_3.PropTypes.string,id:__chunk_3.PropTypes.string.isRequired,tableTemplate:__chunk_3.PropTypes.array.isRequired,titleTemplate:__chunk_3.PropTypes.array,reducer:__chunk_3.PropTypes.string,data:__chunk_3.PropTypes.object.isRequired,className:__chunk_3.PropTypes.string,dataForRender:__chunk_3.PropTypes.object,rerenderById:__chunk_3.PropTypes.number,offsetHeight:__chunk_3.PropTypes.number,initFiltersValue:__chunk_3.PropTypes.object,refreshTableOnPush:__chunk_3.PropTypes.bool,listGet:__chunk_3.PropTypes.func.isRequired,reloadItemsOnRequest:__chunk_3.PropTypes.bool,saveTableScroll:__chunk_3.PropTypes.func.isRequired,changeFiltersValue:__chunk_3.PropTypes.func.isRequired,history:__chunk_3.PropTypes.object.isRequired,onInit:__chunk_3.PropTypes.func,softSort:__chunk_3.PropTypes.bool,setItems:__chunk_3.PropTypes.func.isRequired,afterLineTemplate:__chunk_3.PropTypes.array,tfootItem:__chunk_3.PropTypes.object,tfootDataForRender:__chunk_3.PropTypes.object,leftMenuWidth:__chunk_3.PropTypes.number,disableFilters:__chunk_3.PropTypes.bool,requiredFilters:__chunk_3.PropTypes.array,visibleColumnsMiddleware:__chunk_3.PropTypes.func,requiredFilterValues:__chunk_3.PropTypes.array,disableLazyLoad:__chunk_3.PropTypes.bool,requiredFilterValuesMessage:__chunk_3.PropTypes.string,noDataContent:__chunk_3.PropTypes.oneOfType([__chunk_3.PropTypes.string,__chunk_3.PropTypes.object])}),MainTableComponent.displayName="MainTableComponent";var REQUEST_REGEXP=/^MT_LIST@(.+)_REQUEST$/,RSAA="@@redux-api-middleware/RSAA",mainTableBeforeMiddleware=function(c){return function(_){return function(e){if(e[RSAA]){var t=_objectSpread$1({},e),n="object"===__chunk_1._typeof(e[RSAA].types[0])?e[RSAA].types[0].type:e[RSAA].types[0];if(REQUEST_REGEXP.test(n)){var r=n.match(REQUEST_REGEXP)[1],a=c.getState().mainTable[r],i=a.isLoading,s=a.filtersValue;if(i)return!1;if(s&&Object.keys(s).length){var o=__chunk_4.cloneDeep(s);Object.entries(o).forEach(function(e){var t=__chunk_4._slicedToArray(e,2),n=t[0],r=t[1],a=Array.isArray(r)?r:[r];o[n]=__chunk_4.compact(a)});var l=__chunk_4.queryBuilder.stringify(o);l.length&&(t[RSAA].endpoint="".concat(t[RSAA].endpoint,"?").concat(l))}return _(t)}return _(t)}return _(e)}}};function ownKeys$2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function _objectSpread$2(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$2(n,!0).forEach(function(e){__chunk_1._defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$2(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var MT_SAVE_TABLE_SCROLL="MT_SAVE_TABLE_SCROLL",saveTableScrollAction=function(e,t){return{type:MT_SAVE_TABLE_SCROLL,scroll:e,reducer:t}},MT_CHANGE_FILTERS_VALUE="MT_CHANGE_FILTERS_VALUE",changeFiltersValueAction=function(e,t){return{type:MT_CHANGE_FILTERS_VALUE,data:e,reducer:t}},MT_UPDATE_VISIBLE_COLUMNS="MT_UPDATE_VISIBLE_COLUMNS",updateVisibleColumnsAction=function(e,t){return{type:MT_UPDATE_VISIBLE_COLUMNS,data:e,reducer:t}},MT_GET_SUBLINE_DATA_REQUEST="MT_GET_SUBLINE_DATA_REQUEST",MT_GET_SUBLINE_DATA_SUCCESS="MT_GET_SUBLINE_DATA_SUCCESS",MT_GET_SUBLINE_DATA_FAILURE="MT_GET_SUBLINE_DATA_FAILURE",MTgetSubLineData=function(e){var t=e.id,n=e.subLineKey,r=void 0===n?"id":n,a=e.query,i=void 0===a?{}:a,s=e.url,o=e.reducer;return crud.crud({endpoint:s,query:_objectSpread$2({},i,__chunk_1._defineProperty({},r,t)),crudTypes:{request:MT_GET_SUBLINE_DATA_REQUEST,success:MT_GET_SUBLINE_DATA_SUCCESS,failure:MT_GET_SUBLINE_DATA_FAILURE},meta:{reducer:o,subLineKey:r,id:t}})},MT_REMOVE_SUBLINE_DATA="MT_REMOVE_SUBLINE_DATA",MTremoveSubLineData=function(e){var t=e.id,n=e.reducer;return function(e){return e({type:MT_REMOVE_SUBLINE_DATA,id:t,reducer:n})}},MT_LIST_UPDATE_ITEMS="MT_LIST_UPDATE_ITEMS",MTupdateItemsAction=function(e,t){return{type:MT_LIST_UPDATE_ITEMS,items:e,reducer:t}},MT_LIST_AUTO_UPDATE_ITEM="MT_LIST_AUTO_UPDATE_ITEM",MTautoUpdateItemAction=function(e,t,n){return{type:MT_LIST_AUTO_UPDATE_ITEM,item:e,reducer:t,key:n}},MT_LIST_AUTO_UPDATE_ITEMS="MT_LIST_AUTO_UPDATE_ITEMS",MTautoUpdateItems=function(e,t){return{type:MT_LIST_AUTO_UPDATE_ITEMS,items:e,reducer:t}},MT_LIST_REMOVE_ITEM="MT_LIST_REMOVE_ITEM",MTlistRemoveItemAction=function(e,t,n){return{type:MT_LIST_REMOVE_ITEM,id:e,reducer:t,key:2<arguments.length&&void 0!==n?n:"id"}},MT_SET_ITEMS="MT_SET_ITEMS",MTsetItems=function(e,t){return{type:MT_SET_ITEMS,items:e,reducer:t}},filtersDataGetAction=function(e,t,n,r){return crud.crud({endpoint:t,query:n,meta:{modifyResponse:r},crudTypes:{request:"MT_FILTERS_DATA@".concat(e,"_REQUEST"),success:"MT_FILTERS_DATA@".concat(e,"_SUCCESS"),failure:"MT_FILTERS_DATA@".concat(e,"_FAILURE")}})},MT_DISABLE_ITEM_SWITCHER="MT_DISABLE_ITEM_SWITCH",disableItemSwitcherAction=function(e,t,n){return{type:MT_DISABLE_ITEM_SWITCHER,data:e,reducer:t,byIndex:n}},listGetAction=function(e,t,n,r,a){return crud.crud({endpoint:t,crudTypes:{request:"MT_LIST@".concat(e,"_REQUEST"),success:"MT_LIST@".concat(e,"_SUCCESS"),failure:"MT_LIST@".concat(e,"_FAILURE")},meta:{reloadItemsOnRequest:n,mainTableRequest:!0,disableFilters:r,requiredFilters:a}})},MTsaveTableScroll=function(t,n){return function(e){return e(saveTableScrollAction(t,n))}},MTchangeFiltersValue=function(t,n){return function(e){return e(changeFiltersValueAction(t,n))}},MTfiltersDataGet=function(t,n,r,a){return function(e){return e(filtersDataGetAction(t,n,r,a))}},MTupdateItems=function(t,n){return function(e){return e(MTupdateItemsAction(t,n))}},MTupdateVisibleColumns=function(t,n){return function(e){return e(updateVisibleColumnsAction(t,n))}},MTautoUpdateItem=function(t,n,r){return function(e){return e(MTautoUpdateItemAction(t,n,r))}},MTlistRemoveItem=function(t,n,r){return function(e){return e(MTlistRemoveItemAction(t,n,r))}},MTdisableItemSwitcher=function(t,n,r){return function(e){return e(disableItemSwitcherAction(t,n,r))}},MTlistGet=function(t,n,r,a,i){return function(e){return e(listGetAction(t,n,r,a,i))}};function ownKeys$3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function _objectSpread$3(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$3(n,!0).forEach(function(e){__chunk_1._defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$3(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var REQUEST_LIST_REGEXP=/^MT_LIST@(.+)_REQUEST$/,SUCCESS_LIST_REGEXP=/^MT_LIST@(.+)_SUCCESS$/,FAILURE_LIST_REGEXP=/^MT_LIST@(.+)_FAILURE$/,SUCCESS_FILTERS_DATA_REGEXP=/^MT_FILTERS_DATA@(.+)_SUCCESS$/,tableExample={items:[],isLastPage:null,isLoading:!1,scroll:{},subLineData:{},filtersValue:{},blockedItems:[]},initialState={filtersData:{}},mainTableReducer=function(e,t){var n,r=0<arguments.length&&void 0!==e?e:initialState,a=1<arguments.length?t:void 0;if(a.type===MT_REMOVE_SUBLINE_DATA){var i=a.id,s=a.reducer;(n=__chunk_4.cloneDeep(r))[s].subLineData[i]&&delete n[s].subLineData[i]}if(a.type===MT_GET_SUBLINE_DATA_REQUEST){var o=a.meta,l=o.id,_=o.subLineKey,c=o.reducer;(n=__chunk_4.cloneDeep(r))[c].subLineData[l]={isLoading:!0,items:[],key:_}}if(a.type===MT_GET_SUBLINE_DATA_FAILURE){var u=a.meta,d=u.id,p=u.reducer;(n=__chunk_4.cloneDeep(r))[p].subLineData[d]&&delete n[p].subLineData[d]}if(a.type===MT_GET_SUBLINE_DATA_SUCCESS){var f=a.meta,m=f.id,h=f.reducer,T=a.payload,y=T.status,E=T.payload,b=!!(n=__chunk_4.cloneDeep(r))[h].subLineData[m];"OK"===y&&E.items.length&&b?(n[h].subLineData[m].isLoading=!1,n[h].subLineData[m].items=__chunk_2._toConsumableArray(E.items)):b&&delete n[h].subLineData[m]}if(a.type===MT_LIST_REMOVE_ITEM){var g=a.id,k=a.reducer,S=a.key,v=void 0===S?"id":S,R=__chunk_4.cloneDeep(r[k].items);R=(R=R.map(function(e){var t=__chunk_4.cloneDeep(e),n=t.findIndex(function(e){return e[v]===g});return 0<=n&&delete t[n],t.filter(function(e){return Boolean(e)})})).filter(function(e){return Array.isArray(e)&&e.length}).filter(function(e){return Boolean(e)}),(n=__chunk_4.cloneDeep(r))[k].items=R}if(a.type===MT_LIST_AUTO_UPDATE_ITEM){var I=a.item,L=a.reducer,M=a.key,P=void 0===M?"id":M,O=I[P],C=__chunk_4.cloneDeep(r[L].items);C=C.map(function(e){var t=__chunk_4.cloneDeep(e),n=t.findIndex(function(e){return e[P]===O});return 0<=n&&(t[n]=I),t}),(n=__chunk_4.cloneDeep(r))[L].items=C}if(a.type===MT_SAVE_TABLE_SCROLL){var A=a.reducer,D=a.scroll,N=__chunk_4.cloneDeep(r);n=_objectSpread$3({},N,__chunk_1._defineProperty({},A,_objectSpread$3({},N[A],{scroll:D})))}if(a.type===MT_CHANGE_FILTERS_VALUE){var U=a.reducer,w=a.data,F=__chunk_4.cloneDeep(r),B=_objectSpread$3({},F[U],{filtersValue:_objectSpread$3({},F[U].filtersValue,{},w)});Object.entries(B.filtersValue).forEach(function(e){var t=__chunk_4._slicedToArray(e,2),n=t[0],r=t[1];!1!==r&&void 0!==r||delete B.filtersValue[n]}),0===w.offset&&(B.items=[]),n=_objectSpread$3({},r,__chunk_1._defineProperty({},a.reducer,B))}if(SUCCESS_FILTERS_DATA_REGEXP.test(a.type)){var j=a.type.match(SUCCESS_FILTERS_DATA_REGEXP)[1];if("OK"===a.payload.status){var x=a.payload.payload.items,V=a.meta.modifyResponse;(n=__chunk_4.cloneDeep(r)).filtersData[j]=V?x.map(function(e){return{label:e[V.label],value:e[V.value]}}):x||[]}}if(a.type===MT_DISABLE_ITEM_SWITCHER){var q=a.data,H=a.reducer,G=a.byIndex;n=__chunk_4.cloneDeep(r),G||Object.keys(q).forEach(function(e){if(q[e]){n[H].blockedItems.indexOf(e)<0&&n[H].blockedItems.push(e)}else{var t=n[H].blockedItems.indexOf(e);0<=t&&delete n[H].blockedItems[t]}}),n[H].blockedItems=n[H].blockedItems.filter(function(e){return e})}if(a.type===MT_SET_ITEMS){var J=a.items,z=a.reducer;(n=__chunk_4.cloneDeep(r))[z].items=[__chunk_4.cloneDeep(J)]}if(REQUEST_LIST_REGEXP.test(a.type)){var $=a.type.match(REQUEST_LIST_REGEXP)[1];(n=__chunk_4.cloneDeep(r))[$].isLoading=!0}if(SUCCESS_LIST_REGEXP.test(a.type)){var W=a.type.match(SUCCESS_LIST_REGEXP)[1];if((n=__chunk_4.cloneDeep(r))[W].isLoading=!1,"OK"===a.payload.status){var K=a.payload,Q=K.payload,X=Q.items,Y=Q.item,Z=K._meta,ee=void 0===Z?{is_last_page:!1,total:0}:Z,te=a.meta.reloadItemsOnRequest,ne=ee.is_last_page,re=ee.total;n[W].isLastPage=ne,n[W].total=re,X&&X.length||Y?n[W].items=te?[X||[Y]]:[].concat(__chunk_2._toConsumableArray(n[W].items),[X||[Y]]):n[W].isLastPage=!0}else n[W].isLastPage=!0}if(FAILURE_LIST_REGEXP.test(a.type)){var ae=a.type.match(FAILURE_LIST_REGEXP)[1];(n=__chunk_4.cloneDeep(r))[ae].isLoading=!1,n[ae].isLastPage=!0}if(a.type===MT_LIST_UPDATE_ITEMS){var ie=a.items,se=a.reducer;(n=__chunk_4.cloneDeep(r))[se].items=ie}if(a.type===MT_UPDATE_VISIBLE_COLUMNS){var oe=a.data,le=a.reducer;(n=__chunk_4.cloneDeep(r))[le].visibleColumns=oe}return n||r},mainTableReducer$1=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e){initialState[e]=__chunk_4.cloneDeep(tableExample)}),mainTableReducer},FilterColumns=function(e){function o(e){var i;__chunk_3._classCallCheck(this,o),i=__chunk_3._possibleConstructorReturn(this,__chunk_3._getPrototypeOf(o).call(this,e)),__chunk_1._defineProperty(__chunk_3._assertThisInitialized(i),"changeColumnState",function(r){i.setState(function(e){var t=__chunk_4.cloneDeep(e.settingsColumns);t[r].active=!t[r].active;var n=[];return Object.keys(t).forEach(function(e){t[e].active&&n.push(t[e].active)}),n.length?{settingsColumns:t}:null},function(){i.updateSettingsColumnsStorage(),i.getVisibleColumns()})}),__chunk_1._defineProperty(__chunk_3._assertThisInitialized(i),"updateSettingsColumnsStorage",function(e){var t=i.props.tableName,n=JSON.stringify(e||i.state.settingsColumns);localStorage.setItem(t,n)}),__chunk_1._defineProperty(__chunk_3._assertThisInitialized(i),"getVisibleColumns",function(){var t=i.state.settingsColumns,e=i.props,n=e.mainTableName,r=e.dispatch,a=[];Object.keys(t).forEach(function(e){a.push(t[e].active)}),r(MTupdateVisibleColumns(a,n))}),__chunk_1._defineProperty(__chunk_3._assertThisInitialized(i),"selectMultiOpener",function(){i.setState(function(e){return{selectMultiOpened:!e.selectMultiOpened}})}),__chunk_1._defineProperty(__chunk_3._assertThisInitialized(i),"clickOut",function(e){var t=e.target;!document.querySelector(".select-multi").classList.contains("active")||t.classList.contains("select-multi")||t.closest(".select-multi")||i.setState({selectMultiOpened:!1})});var t=e.tableName,n=e.columnCategories,r=e.settingsColumns,a=localStorage.getItem(t),s=r;return a?s=JSON.parse(a):i.updateSettingsColumnsStorage(s),i.state={selectMultiOpened:!1,settingsColumns:s,columnCategories:n},i}return __chunk_3._inherits(o,e),__chunk_3._createClass(o,[{key:"componentDidMount",value:function(){this.getVisibleColumns(),__chunk_4.addEvent(window,"click",this.clickOut)}},{key:"componentWillUnmount",value:function(){__chunk_4.removeEvent(window,"click",this.clickOut)}},{key:"render",value:function(){var n=this,e=this.state,t=e.selectMultiOpened,r=e.columnCategories,a=e.settingsColumns;return React__default.createElement("div",{className:t?"select-multi active":"select-multi"},React__default.createElement("div",{role:"presentation",className:"select-multi__label",onClick:this.selectMultiOpener},this.props.title),React__default.createElement("ul",{className:"select-multi__list"},Object.keys(r).map(function(e){return React__default.createElement("li",{key:e},React__default.createElement("span",{className:"cat"},r[e]),__chunk_4.findByValue(a,e,"cat").map(function(e){var t=a[e];return React__default.createElement("span",{key:e,onClick:function(){if(t.fixed)return!1;n.changeColumnState(e)},className:"item".concat(t.active?" active":"").concat(t.fixed?" fixed":"")},t.name)}))})))}}]),o}(React.Component);__chunk_1._defineProperty(FilterColumns,"defaultProps",{columnCategories:{0:"Колонки"},mainTableName:null,title:"Настройка колонок"}),__chunk_1._defineProperty(FilterColumns,"propTypes",{tableName:__chunk_3.PropTypes.string.isRequired,columnCategories:__chunk_3.PropTypes.object,settingsColumns:__chunk_3.PropTypes.object.isRequired,mainTableName:__chunk_3.PropTypes.string,title:__chunk_3.PropTypes.string,dispatch:__chunk_3.PropTypes.func.isRequired}),FilterColumns.displayName="FilterColumns",exports.FilterColumns=FilterColumns,exports.MT_CHANGE_FILTERS_VALUE=MT_CHANGE_FILTERS_VALUE,exports.MT_DISABLE_ITEM_SWITCHER=MT_DISABLE_ITEM_SWITCHER,exports.MT_GET_SUBLINE_DATA_FAILURE=MT_GET_SUBLINE_DATA_FAILURE,exports.MT_GET_SUBLINE_DATA_REQUEST=MT_GET_SUBLINE_DATA_REQUEST,exports.MT_GET_SUBLINE_DATA_SUCCESS=MT_GET_SUBLINE_DATA_SUCCESS,exports.MT_LIST_AUTO_UPDATE_ITEM=MT_LIST_AUTO_UPDATE_ITEM,exports.MT_LIST_AUTO_UPDATE_ITEMS=MT_LIST_AUTO_UPDATE_ITEMS,exports.MT_LIST_REMOVE_ITEM=MT_LIST_REMOVE_ITEM,exports.MT_LIST_UPDATE_ITEMS=MT_LIST_UPDATE_ITEMS,exports.MT_REMOVE_SUBLINE_DATA=MT_REMOVE_SUBLINE_DATA,exports.MT_SAVE_TABLE_SCROLL=MT_SAVE_TABLE_SCROLL,exports.MT_UPDATE_VISIBLE_COLUMNS=MT_UPDATE_VISIBLE_COLUMNS,exports.MTautoUpdateItem=MTautoUpdateItem,exports.MTautoUpdateItems=MTautoUpdateItems,exports.MTchangeFiltersValue=MTchangeFiltersValue,exports.MTdisableItemSwitcher=MTdisableItemSwitcher,exports.MTfiltersDataGet=MTfiltersDataGet,exports.MTgetSubLineData=MTgetSubLineData,exports.MTlistGet=MTlistGet,exports.MTlistRemoveItem=MTlistRemoveItem,exports.MTremoveSubLineData=MTremoveSubLineData,exports.MTsaveTableScroll=MTsaveTableScroll,exports.MTsetItems=MTsetItems,exports.MTupdateItems=MTupdateItems,exports.MTupdateVisibleColumns=MTupdateVisibleColumns,exports.MainTable=MainTableComponent,exports.mainTableBeforeMiddleware=mainTableBeforeMiddleware,exports.mainTableReducer=mainTableReducer$1;
