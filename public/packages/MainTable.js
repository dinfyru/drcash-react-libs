function ___$insertStyle(e){var t;if(e&&"undefined"!=typeof window)return(t=document.createElement("style")).setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}Object.defineProperty(exports,"__esModule",{value:!0});var index$1=require("./index-bf4ad33c.js"),index=require("./index-bef46dc5.js"),React=require("react"),index$2=require("./index-d113335a.js"),_extends=require("./extends-bd35137c.js"),utils=require("./utils-67ca7a5d.js");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var React__default=_interopDefaultLegacy(React),win="undefined"!=typeof window?window:void 0!==index.commonjsGlobal?index.commonjsGlobal:"undefined"!=typeof self?self:{},window_1=win,navigator$1=win.navigator,isIos=function(e){return/iPad|iPhone|iPod/.test(e.userAgent||"")||"MacIntel"===e.platform&&1<e.maxTouchPoints}(navigator$1||{});function _callSuper$6(e,t,n){return t=index$1.getPrototypeOf(t),index$1.possibleConstructorReturn(e,_isNativeReflectConstruct$6()?Reflect.construct(t,n||[],index$1.getPrototypeOf(e).constructor):t.apply(e,n))}function _isNativeReflectConstruct$6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_isNativeReflectConstruct$6=function(){return!!e})()}var getAfterLineObjs=function(e,t,n){var a={};if(e&&Object.keys(t).length){var r=Object.keys(t);if(r.length){var i=t[r[0]].key,l=n.filter(function(e){return 0<=r.indexOf(e[i].toString())});if(l.length)for(var o=0;o<l.length;o+=1){var s=l[o][i];a[s]=t[s]}}}return a},TBodyPart=function(e){function l(e){index$1.classCallCheck(this,l),c=_callSuper$6(this,l,[e]),index.defineProperty(index$1.assertThisInitialized(c),"generateFromTemplate",function(){return c.mainFabric()}),index.defineProperty(index$1.assertThisInitialized(c),"mainFabric",function(){for(var a,e=c.props,n=e.tableTemplate,r=e.titleTemplate,o=e.partItems,u=e.visibleColumns,i=e.afterLineTemplate,s=e.afterLineData,p=c.state.afterLineObjs,d=[],f=[],l=[],t=0;t<o.length;t+=1)!function(i){var e,t=Object.keys(p),l=(t.length&&(e=s[t[0]].key,0<=t.indexOf(o[i][e].toString()))&&(f[i]={id:o[i][e],items:[]}),[]);r&&Array.isArray(r)&&r.forEach(function(e,t){e=e.columns.map(function(){return t});l.push.apply(l,_extends.toConsumableArray(e))}),n.forEach(function(e,t){e=e.tbody;if(!u||u[t]){var n,a,r=o[i];if(d[i]||(d[i]=[],r.id&&(d[i].id=r.id)),"function"==typeof e.value)try{n=e.value(r)}catch(e){n="n/a"}else"string"==typeof e.value?n=e.value:!e.value&&e.key&&(n=r[e.key]);"function"==typeof e.className&&(a=e.className(r));r=e.props?index$2.lodash_clonedeep(e.props):{};l.length&&(r["js-title-index"]=l[t]),d[i][t]=a?React__default.default.createElement("td",_extends._extends_1({className:a},r),n):React__default.default.createElement("td",r,n)}})}(t);return f.length&&(f.forEach(function(e,d){for(var c=p[e.id].items,t=0;t<c.length;t+=1)!function(s){i.forEach(function(e,t){e=e.tbody;if(!u||u[t]){f[d].items[s]||(f[d].items[s]=[]);var n,a,r=c[s];if("function"==typeof e.value)try{n=e.value(r)}catch(e){n="n/a"}else n="string"==typeof e.value?e.value:!(e.value||!e.key)&&r[e.key];if("function"==typeof e.className){for(var i={},l="string"==typeof e.key?[e.key]:e.key,o=0;o<l.length;o+=1)i[l[o]]=r[l[o]];a=e.className(i)}f[d].items[s][t]=a?React__default.default.createElement("td",_extends._extends_1({className:a},e.props),n):React__default.default.createElement("td",e.props,n)}})}(t);c.length||f[d].items.push([React__default.default.createElement("td",{className:"no-border",colSpan:u.length},React__default.default.createElement("span",{className:"loading"},React__default.default.createElement("span",null)))])}),a=0,f.forEach(function(e,t){d.splice.apply(d,[t+a+1,0].concat(_extends.toConsumableArray(e.items)));for(var n=0;n<e.items.length;n++)l.push(n+t+a+1);a+=e.items.length})),{items:d,afterLineIndexes:l}});var c,t=c.props,n=t.rerenderById,a=t.partItems,r=t.afterLineTemplate,t=t.afterLineData,i=null,a=(n&&a.find(function(e){return e.id===n})&&(i=n),getAfterLineObjs(r,t,e.partItems));return c.state={rerenderById:i,afterLineObjs:a},c}return index$1.inherits(l,e),index$1.createClass(l,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,a=this.state.afterLineObjs,r=JSON.stringify(n.partItems)!==JSON.stringify(e.partItems),i=JSON.stringify(n.dataForRender)!==JSON.stringify(e.dataForRender),l=Boolean(t.rerenderById)&&n.rerenderById!==e.rerenderById,n=JSON.stringify(n.visibleColumns)!==JSON.stringify(e.visibleColumns),e=JSON.stringify(t.afterLineObjs)!==JSON.stringify(a);return r||i||l||n||e}},{key:"render",value:function(){var e=this.generateFromTemplate(),t=e.items,a=e.afterLineIndexes;return t.map(function(e,t){var n=0<=a.indexOf(t)?"mt_subline":"mt_line";return React__default.default.createElement("tr",{key:t,"data-id":e.id||t,className:n},React__default.default.createElement("td",{className:"padding-table"}," "),e.map(function(e,t){return React__default.default.createElement(React__default.default.Fragment,{key:t},e)}),React__default.default.createElement("td",{className:"padding-table"}," "))})}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(t.rerenderById&&!e.rerenderById&&t.partItems.find(function(e){return e.id===t.rerenderById}))return{rerenderById:t.rerenderById};return t.afterLineTemplate?{afterLineObjs:getAfterLineObjs(t.afterLineTemplate,t.afterLineData,t.partItems)}:null}}]),l}(React.Component);function _callSuper$5(e,t,n){return t=index$1.getPrototypeOf(t),index$1.possibleConstructorReturn(e,_isNativeReflectConstruct$5()?Reflect.construct(t,n||[],index$1.getPrototypeOf(e).constructor):t.apply(e,n))}function _isNativeReflectConstruct$5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_isNativeReflectConstruct$5=function(){return!!e})()}index.defineProperty(TBodyPart,"defaultProps",{rerenderById:null,visibleColumns:null,afterLineData:null,afterLineTemplate:null}),index.defineProperty(TBodyPart,"propTypes",{tableTemplate:index$1.propTypes.array.isRequired,partItems:index$1.propTypes.array.isRequired,dataForRender:index$1.propTypes.object.isRequired,rerenderById:index$1.propTypes.number,visibleColumns:index$1.propTypes.array,afterLineData:index$1.propTypes.object,afterLineTemplate:index$1.propTypes.array}),TBodyPart.displayName="TBodyPart";var TBody=function(e){function r(){var e;index$1.classCallCheck(this,r);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=_callSuper$5(this,r,[].concat(n)),index.defineProperty(index$1.assertThisInitialized(e),"blockedItemsPosition",function(){var r=e.props.refs.parent.current,i=document.querySelectorAll(".blocked-item");i.forEach(function(e,t){var n,t=i[t],a=t.getAttribute("item-data-id"),a=document.querySelector('tbody tr[data-id="'.concat(a,'"]'));a.length||(n=r.scrollTop+(Math.abs(utils.elemOffset(a).top)-utils.elemOffset(r).top)+1,a=a.offsetHeight-1,t.style.top="".concat(n,"px"),t.style.height="".concat(a,"px"),t.style.lineHeight="".concat(a,"px"))})}),e}return index$1.inherits(r,e),index$1.createClass(r,[{key:"componentDidMount",value:function(){utils.addEvent(window,"resize",this.blockedItemsPosition)}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=JSON.stringify(t.items)!==JSON.stringify(e.items),a=JSON.stringify(t.dataForRender)!==JSON.stringify(e.dataForRender),r=t.rerenderById!==e.rerenderById,i=JSON.stringify(t.visibleColumns)!==JSON.stringify(e.visibleColumns),l=JSON.stringify(t.afterLineData)!==JSON.stringify(e.afterLineData),t=JSON.stringify(t.blockedItems)!==JSON.stringify(e.blockedItems);return n||a||r||i||l||t}},{key:"componentDidUpdate",value:function(){this.blockedItemsPosition()}},{key:"componentWillUnmount",value:function(){utils.removeEvent(window,"resize",this.blockedItemsPosition)}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.tableTemplate,a=e.dataForRender,r=e.rerenderById,i=e.visibleColumns,l=e.afterLineTemplate,o=e.blockedItems,s=e.afterLineData,d=e.titleTemplate;return React__default.default.createElement(React__default.default.Fragment,null,t.map(function(e,t){return React__default.default.createElement(TBodyPart,{key:t,index:t,partItems:e,dataForRender:a,tableTemplate:n,rerenderById:r,visibleColumns:i,afterLineTemplate:l,afterLineData:s,titleTemplate:d})}),o.map(function(e){return React__default.default.createElement("tr",{className:"blocked-item",key:e,"item-data-id":e},React__default.default.createElement("td",null,React__default.default.createElement("span",{className:"loading"})))}))}}]),r}(React.Component);function _callSuper$4(e,t,n){return t=index$1.getPrototypeOf(t),index$1.possibleConstructorReturn(e,_isNativeReflectConstruct$4()?Reflect.construct(t,n||[],index$1.getPrototypeOf(e).constructor):t.apply(e,n))}function _isNativeReflectConstruct$4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_isNativeReflectConstruct$4=function(){return!!e})()}TBody.displayName="TBody";var ORDER_BY_DESC="DESC",ORDER_BY_ASC="ASC",THead=function(e){function a(){var h;index$1.classCallCheck(this,a);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h=_callSuper$4(this,a,[].concat(t)),index.defineProperty(index$1.assertThisInitialized(h),"changeSortType",function(e,t){return t.sort_by===e&&t.sort_type===ORDER_BY_DESC?ORDER_BY_ASC:ORDER_BY_DESC}),index.defineProperty(index$1.assertThisInitialized(h),"generateFromTemplate",function(){var e=h.props,t=e.tableTemplate,s=e.filtersValue,d=e.reducer,c=e.getItems,u=e.items,p=e.changeFiltersValue,f=e.softSort,m=e.sortType,_=e.sortBy,T=e.visibleColumns,n=e.titleTemplate,y=e.setItems,b=[],E=[];return n&&Array.isArray(n)&&n.forEach(function(e,t){e=e.columns.map(function(){return t});E.push.apply(E,_extends.toConsumableArray(e))}),t.forEach(function(e,t){var n,a,r,i,l,o;T&&!T[t]||(n=(l=e.thead).className,a=l.value,r=l.title,i=l.sortKey,l=l.sortLtr,e=e.thead,"function"==typeof(o=a)&&(o=a()),e=e.props?index$2.lodash_clonedeep(e.props):{},E.length&&(e["js-title-index"]=E[t]),t=React__default.default.createElement("th",_extends._extends_1({key:t,title:r||a,className:"".concat(n||"").concat(i?" cup":""),onClick:function(){if(!i)return!1;var t,a=h.changeSortType(i,s);f?(p({sort_type:a,sort_by:i},d),t=[],u.forEach(function(e){t.push.apply(t,_extends.toConsumableArray(index$2.lodash_clonedeep(e)))}),t=t.sort(function(e,t){var e=e[i],t=t[i],n=0;return t<e?n="DESC"===a?-1:1:e<t&&(n="DESC"===a?1:-1),n}),y(t,d)):c({sort_type:a,sort_by:i,offset:0},d)}},e),!(!l||!i)&&React__default.default.createElement("span",{className:"sorting ltr ".concat(_===i?m.toLowerCase():"")}),o,!(l||!i)&&React__default.default.createElement("span",{className:"sorting fal ".concat(_===i?m.toLowerCase():"")})),b.push(t))}),b}),h}return index$1.inherits(a,e),index$1.createClass(a,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=JSON.stringify(t.items)!==JSON.stringify(e.items),a=JSON.stringify(t.tableTemplate)!==JSON.stringify(e.tableTemplate),r=JSON.stringify(t.sortType)!==JSON.stringify(e.sortType),i=JSON.stringify(t.sortBy)!==JSON.stringify(e.sortBy),l=JSON.stringify(t.visibleColumns)!==JSON.stringify(e.visibleColumns),t=JSON.stringify(t.dataForRender)!==JSON.stringify(e.dataForRender);return a||r||i||l||t||n}},{key:"render",value:function(){var e=this.props,t=e.isHidden,e=e.setRef,n=this.generateFromTemplate();return React__default.default.createElement("thead",{ref:e,className:t?"no-js":"js"},React__default.default.createElement("tr",null,React__default.default.createElement("th",{className:"padding-table"}," "),n,React__default.default.createElement("th",{className:"padding-table"}," ")))}}]),a}(React.Component);function _callSuper$3(e,t,n){return t=index$1.getPrototypeOf(t),index$1.possibleConstructorReturn(e,_isNativeReflectConstruct$3()?Reflect.construct(t,n||[],index$1.getPrototypeOf(e).constructor):t.apply(e,n))}function _isNativeReflectConstruct$3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_isNativeReflectConstruct$3=function(){return!!e})()}index.defineProperty(THead,"defaultProps",{getItems:function(){console.log('not imported function "getItems"')},reducer:"",filtersValue:{},sortType:null,sortBy:null,isHidden:!1,softSort:!1,visibleColumns:null}),index.defineProperty(THead,"propTypes",{tableTemplate:index$1.propTypes.array.isRequired,reducer:index$1.propTypes.string,getItems:index$1.propTypes.func,filtersValue:index$1.propTypes.object,sortType:index$1.propTypes.string,sortBy:index$1.propTypes.string,isHidden:index$1.propTypes.bool,setRef:index$1.propTypes.object.isRequired,changeFiltersValue:index$1.propTypes.func.isRequired,setItems:index$1.propTypes.func.isRequired,softSort:index$1.propTypes.bool,visibleColumns:index$1.propTypes.array}),THead.displayName="THead";var TTitle=function(e){function r(){var n;index$1.classCallCheck(this,r);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n=_callSuper$3(this,r,[].concat(t)),index.defineProperty(index$1.assertThisInitialized(n),"generateFromTemplate",function(){var e=n.props,t=e.titleTemplate,i=e.visibleColumns,l=[],o=0;return t.forEach(function(e,t){var n,a=e.props,r=e.value,e=_extends.toConsumableArray(e.columns);i&&e.forEach(function(){i[o]&&(n=!0),o++}),i&&!n||(e=React__default.default.createElement("th",_extends._extends_1({key:t,"js-title-index":t},a),React__default.default.createElement("span",null,r)),l.push(e))}),l}),n}return index$1.inherits(r,e),index$1.createClass(r,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=JSON.stringify(t.titleTemplate)!==JSON.stringify(e.titleTemplate),t=JSON.stringify(t.visibleColumns)!==JSON.stringify(e.visibleColumns);return n||t}},{key:"render",value:function(){var e=this.props.setRef,t=this.generateFromTemplate();return React__default.default.createElement("thead",{ref:e},React__default.default.createElement("tr",null,React__default.default.createElement("th",{className:"padding-table"}," "),t,React__default.default.createElement("th",{className:"padding-table"}," ")))}}]),r}(React.Component);function _callSuper$2(e,t,n){return t=index$1.getPrototypeOf(t),index$1.possibleConstructorReturn(e,_isNativeReflectConstruct$2()?Reflect.construct(t,n||[],index$1.getPrototypeOf(e).constructor):t.apply(e,n))}function _isNativeReflectConstruct$2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_isNativeReflectConstruct$2=function(){return!!e})()}index.defineProperty(TTitle,"defaultProps",{visibleColumns:null}),index.defineProperty(TTitle,"propTypes",{titleTemplate:index$1.propTypes.array.isRequired,visibleColumns:index$1.propTypes.array}),TTitle.displayName="TTitle";var TFoot=function(e){function r(){var n;index$1.classCallCheck(this,r);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n=_callSuper$2(this,r,[].concat(t)),index.defineProperty(index$1.assertThisInitialized(n),"generateFromTemplate",function(){var e=n.props,t=e.tableTemplate,r=e.visibleColumns,e=e.tfootItem,i=[],l=e?e.item:null;return!!e&&(t.forEach(function(e,t){var n,a,e=e.tfoot;if(!r||!0===r[t])if(e){if("function"==typeof e.value)try{n=e.value(l)}catch(e){n="n/a"}else"string"==typeof e.value?n=e.value:!e.value&&e.key&&(n=l[e.key]);"function"==typeof e.className&&(a=e.className(l)),i[t]=a?React__default.default.createElement("td",_extends._extends_1({key:t,className:a},e.props),n):React__default.default.createElement("td",_extends._extends_1({key:t},e.props),n)}else i[t]=React__default.default.createElement("td",{key:t})}),i)}),n}return index$1.inherits(r,e),index$1.createClass(r,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=JSON.stringify(t.tableTemplate)!==JSON.stringify(e.tableTemplate),a=JSON.stringify(t.visibleColumns)!==JSON.stringify(e.visibleColumns),r=JSON.stringify(t.dataForRender)!==JSON.stringify(e.dataForRender),i=JSON.stringify(t.tfootItem)!==JSON.stringify(e.tfootItem),l=JSON.stringify(t.items)!==JSON.stringify(e.items),t=JSON.stringify(t.tfootDataForRender)!==JSON.stringify(e.tfootDataForRender);return n||a||r||i||l||t}},{key:"render",value:function(){var e=this.props,t=e.setRef,n=e.tfootItem,e=e.isHidden,a=n?n.item:null,n=n?n.isLoading:null,r=this.generateFromTemplate();return React__default.default.createElement("tfoot",{ref:t,className:e?"no-js":"js"},!e&&this.props.tfootOtherTemplate,React__default.default.createElement("tr",{className:"tfoot-data",id:e?"":"tfoot-data"},React__default.default.createElement("td",{className:"padding-table"}," "),r,React__default.default.createElement("td",{className:"padding-table"}," ")),!(!a||!n||Object.keys(a).length||e)&&React__default.default.createElement("tr",{className:"tfoot-loading no-border"},React__default.default.createElement("td",null,React__default.default.createElement("span",{className:"loading"},React__default.default.createElement("span",null)))))}}]),r}(React.Component);function ownKeys$3(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function _objectSpread$3(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$3(Object(n),!0).forEach(function(e){index.defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$3(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _callSuper$1(e,t,n){return t=index$1.getPrototypeOf(t),index$1.possibleConstructorReturn(e,_isNativeReflectConstruct$1()?Reflect.construct(t,n||[],index$1.getPrototypeOf(e).constructor):t.apply(e,n))}function _isNativeReflectConstruct$1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_isNativeReflectConstruct$1=function(){return!!e})()}index.defineProperty(TFoot,"defaultProps",{visibleColumns:null,tfootItem:null,dataForRender:{},items:[],tfootDataForRender:null}),index.defineProperty(TFoot,"propTypes",{tableTemplate:index$1.propTypes.array.isRequired,setRef:index$1.propTypes.object.isRequired,dataForRender:index$1.propTypes.object,visibleColumns:index$1.propTypes.array,tfootItem:index$1.propTypes.object,items:index$1.propTypes.array,tfootDataForRender:index$1.propTypes.object}),TFoot.displayName="TFoot";var mobileAndTabletcheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))?!0:t},MainTableComponent=(mobileAndTabletcheck(),function(e){function t(e){var L;return index$1.classCallCheck(this,t),L=_callSuper$1(this,t,[e]),index.defineProperty(index$1.assertThisInitialized(L),"scrollHeads",function(){var e,t=L.table,n=t.parent.current,a=t.theadVisible.current,r=t.tfoot.current,t=t.ttitle.current,i=L.props,l=i.id,o=i.tfootItem,s=i.leftMenuWidth,d=i.titleTemplate,c=i.tfootOtherTemplate,u=i.offsetHeight,i=i.fixedFooter,a=(n&&(s=s-n.scrollLeft,isIos||mobileAndTabletcheck()||(s-=document.body.scrollLeft||document.documentElement.scrollLeft),a.style.left="".concat(s,"px"),(o||c)&&(r.style.left="".concat(s,"px"),r.style.width="".concat(n.clientWidth+n.scrollLeft,"px")),d)&&(t.style.left="".concat(s,"px"),t.style.width="".concat(n.clientWidth+n.scrollLeft,"px")),document.getElementsByClassName("page__content"));a.length&&(c=(o=L.table).theadVisible.current,d=o.ttitle.current,s=document.getElementsByClassName("table__filters")[0],t=document.getElementsByClassName("switch__pages")[0],o=s?s.offsetHeight:0,s=t?t.offsetHeight:0,t=d?d.offsetHeight:0,s&&!o&&(s+=20),d=61+o+s,(e=c.getAttribute("js-data-top"))||(e=+window.getComputedStyle(c).top.split("px")[0],c.setAttribute("js-data-top",e)),L.addNewStyle(".page__content #".concat(l," .table__thead thead { top: ").concat(d+t+u-a[0].scrollTop,"px !important }")),r)&&i&&(r.style.top="".concat(32+o+s+t+u+n.offsetHeight-a[0].scrollTop-(n.offsetHeight-n.clientHeight),"px"),r.style.bottom="initial")}),index.defineProperty(index$1.assertThisInitialized(L),"addNewStyle",function(e){var t=L.props.id,n=document.getElementById("".concat(t,"_js"));n||((n=document.createElement("style")).type="text/css",n.id="".concat(t,"_js"),document.getElementsByTagName("body")[0].appendChild(n)),n.innerHTML=e}),index.defineProperty(index$1.assertThisInitialized(L),"resizeTableColumns",function(){var e=L.props,t=e.data,n=e.reducer,a=e.tfootItem,r=e.tfootOtherTemplate,i=e.titleTemplate,l=(e.disableLazyLoad,e.offsetHeight),e=e.fixedFooter,t=t[n],n=t.items,o=t.isLoading,t=t.isLastPage,s=L.table,d=s.parent.current,c=s.tbody.current,u=s.theadHidden.current,p=s.theadVisible.current,f=s.tfoot.current,s=s.ttitle.current,m=document.getElementsByClassName("table__filters")[0],_=document.getElementsByClassName("switch__pages")[0],m=m?m.offsetHeight:0,_=_?_.offsetHeight:0,T=s?s.offsetHeight:0,y=(_&&!m&&(_+=20),32+m+_),m=61+m+_;if(d.style.top="".concat(y+T+l,"px"),p.style.top="".concat(m+T+l,"px"),s&&(s.style.top="".concat(m,"px")),!o&&n.length||o&&null===t||!o&&null==t||!o&&!n.length&&t){p.style.width="".concat(c.offsetWidth,"px"),i&&(_=document.getElementsByTagName("html")[0],s.style.width="".concat(d.clientWidth+d.scrollLeft+_.scrollLeft,"px")),(a||r)&&(m=document.getElementsByClassName("page__content"),o=document.getElementsByTagName("html")[0],f.style.width="".concat(d.clientWidth+d.scrollLeft+o.scrollLeft,"px"),e?(f.style.top="".concat(y+T+l+d.offsetHeight-m[0].scrollTop-(d.offsetHeight-d.clientHeight),"px"),f.style.bottom="initial"):f.style.bottom="".concat(d.offsetHeight-d.clientHeight,"px"));for(var b,E,h=(n.length?(b="td",c):(b="th",u)).getElementsByTagName("tr")[0].getElementsByTagName(b),g=p.getElementsByTagName("th"),S=0;S<h.length;S+=1){var x=Math.floor(h[S].offsetWidth);g[S].style.width="".concat(x,"px")}if(a&&!f.getElementsByClassName("no-border").length)for(var R=f.getElementsByTagName("td"),v=0;v<h.length;v+=1){var I=Math.floor(h[v].offsetWidth);R[v].style.width="".concat(I,"px")}i&&(E={},Array.prototype.forEach.call(h,function(e){var t=e.getAttribute("js-title-index");t&&(E[t]||(E[t]=0),E[t]+=+Math.floor(e.offsetWidth))}),Array.prototype.forEach.call(s.getElementsByTagName("th"),function(e,t){var n=e.getAttribute("js-title-index"),a=0,a=n?E[n]:0===t?+Math.floor(h[t].offsetWidth):+Math.floor(h[h.length-1].offsetWidth);e.style.width="".concat(a,"px")}))}L.scrollHeads()}),index.defineProperty(index$1.assertThisInitialized(L),"lazyLoad",function(){var e=L.props,t=e.data,n=e.reducer;return!e.disableLazyLoad&&(t=(e=t[n]).isLastPage,n=e.isLoading,!t)&&!n&&(e=L.table.parent.current,n=(t=L.table.tbody.current).offsetHeight-e.offsetHeight,t=Math.abs(utils.elemOffset(t).top-utils.elemOffset(e).top),void(n-document.getElementsByTagName("html")[0].offsetHeight/2<t&&L.getItems()))}),index.defineProperty(index$1.assertThisInitialized(L),"getItems",function(e){var t=L.props,n=t.listGet,a=t.changeFiltersValue,r=t.reducer,i=t.url,l=t.data,o=t.reloadItemsOnRequest,s=t.disableFilters,t=t.requiredFilters,l=l[r],d=l.filtersValue,c=d.offset,d=d.limit,l=l.filtersValue,u=(a(e||{offset:c+d},r),!0),p=_objectSpread$3(_objectSpread$3({},index$2.lodash_clonedeep(l)),index$2.lodash_clonedeep(e||{}));if(L.props.requiredFilterValues.forEach(function(e){p[e]||(u=!1)}),!L.state.canDoRequest||!u)return!1;n(r,i,o,s,t)}),L.state={colsCount:e.tableTemplate.length+2,canDoRequest:!e.requiredFilterValues.length,firstLoad:!0},L.table={parent:React__default.default.createRef(),ttitle:React__default.default.createRef(),theadVisible:React__default.default.createRef(),theadHidden:React__default.default.createRef(),tbody:React__default.default.createRef(),tfoot:React__default.default.createRef(),tfootHidden:React__default.default.createRef()},L}return index$1.inherits(t,e),index$1.createClass(t,[{key:"componentDidMount",value:function(){var e=this.props.onInit,e=("function"==typeof e&&e(this.getItems),this.table.parent.current),t=this.props,n=t.reducer,a=t.listGet,r=t.url,i=t.data,l=t.history.action,o=t.initFiltersValue,s=t.changeFiltersValue,d=t.refreshTableOnPush,c=t.reloadItemsOnRequest,u=t.saveTableInitFilters,p=t.disableFilters,t=t.requiredFilters,u=(o&&(u(index$2.lodash_clonedeep(o),n),Object.keys(i[n].filtersValue).length&&(!d||"PUSH"!==l&&"POP"!==l)||(s(o,n,this.state.firstLoad),this.setState({firstLoad:!1}))),(d&&("PUSH"===l||"POP"===l)||!i[n].items.length&&null===i[n].isLastPage)&&this.state.canDoRequest&&r&&a(n,r,c,p,t),document.getElementsByClassName("page__content")),s=(utils.addEvent(window,"resize",this.resizeTableColumns),utils.addEvent(e,"scroll",this.scrollHeads),utils.addEvent(window,"scroll",this.scrollHeads),utils.addEvent(document.body,"scroll",this.scrollHeads),u.length&&utils.addEvent(u[0],"scroll",this.scrollHeads),this.resizeTableColumns(),i[n]),o=s.items,d=s.scroll;d&&(l=d.scrollLeft,a=d.scrollTop,o.length)&&(a||l)&&this.table.parent.current.scrollTo(l,a)}},{key:"componentDidUpdate",value:function(){var e=new Event("resize");window.dispatchEvent(e)}},{key:"componentWillUnmount",value:function(){var e=this.table.parent,t=e.current,e=e.current,n=e.scrollTop,e=e.scrollLeft,a=this.props,r=a.saveTableScroll,i=a.reducer,l=a.initFiltersValue,o=a.refreshTableOnPush,a=a.changeFiltersValue,s=document.getElementsByTagName("html")[0],o=(o&&a(l,i,!0),document.getElementsByClassName("page__content"));r({scrollTop:n,scrollLeft:e},i),utils.removeEvent(window,"resize",this.resizeTableColumns),utils.removeEvent(t,"scroll",this.scrollHeads),utils.removeEvent(s,"scroll",this.scrollHeads),utils.removeEvent(document.body,"scroll",this.scrollHeads),o.length&&utils.removeEvent(o[0],"scroll",this.scrollHeads)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.className,a=e.data,r=e.tableTemplate,i=e.reducer,l=e.changeFiltersValue,o=e.dataForRender,s=e.rerenderById,d=e.afterLineTemplate,c=e.tfootItem,u=e.tfootOtherTemplate,p=e.titleTemplate,f=e.visibleColumnsMiddleware,m=e.requiredFilterValuesMessage,_=e.noDataContent,T=e.setItems,e=e.softSort,a=a[i],y=a.isLoading,b=a.isLastPage,E=a.items,h=a.filtersValue,g=a.visibleColumns,S=a.blockedItems,a=a.subLineData,x=this.state,R=x.colsCount,x=x.canDoRequest,f=f(g),g=!E.length&&b&&!y&&x;return React__default.default.createElement("div",{id:t,ref:this.table.parent,className:"table-list__parent ".concat(n).concat(g?" table__no-data":""),onWheel:this.lazyLoad,onTouchMove:this.lazyLoad},!!p&&React__default.default.createElement("table",{className:"table__title table-list"},React__default.default.createElement(TTitle,{setRef:this.table.ttitle,titleTemplate:p,visibleColumns:f})),React__default.default.createElement("table",{className:"table__thead table-list"},React__default.default.createElement(THead,{setRef:this.table.theadVisible,tableTemplate:r,changeFiltersValue:l,filtersValue:h,isLastPage:b,getItems:this.getItems,reducer:i,softSort:e,setItems:T,sortType:h.sort_type,sortBy:h.sort_by,visibleColumns:f,dataForRender:index$2.lodash_clonedeep(o),items:index$2.lodash_clonedeep(E)})),React__default.default.createElement("table",{className:"table__tbody table-list"},React__default.default.createElement(THead,{setRef:this.table.theadHidden,changeFiltersValue:l,tableTemplate:r,titleTemplate:p,filtersValue:h,isLastPage:b,getItems:this.getItems,reducer:i,softSort:e,setItems:T,isHidden:!0,sortType:h.sort_type,sortBy:h.sort_by,visibleColumns:f,dataForRender:index$2.lodash_clonedeep(o),items:index$2.lodash_clonedeep(E)}),React__default.default.createElement("tbody",{ref:this.table.tbody},x?React__default.default.createElement(TBody,{items:index$2.lodash_clonedeep(E),tableTemplate:r,titleTemplate:p,rerenderById:s,dataForRender:index$2.lodash_clonedeep(o),visibleColumns:f,afterLineTemplate:d,afterLineData:a,blockedItems:S,refs:this.table}):React__default.default.createElement("tr",{className:"no-border"},React__default.default.createElement("td",{colSpan:R},React__default.default.createElement("span",{className:"no-data"},m))),!!g&&React__default.default.createElement("tr",{className:"no-border"},React__default.default.createElement("td",{colSpan:R},React__default.default.createElement("span",{className:"no-data"},_))),!!y&&React__default.default.createElement("tr",{className:"no-border"},React__default.default.createElement("td",{colSpan:R},React__default.default.createElement("span",{className:"loading"},React__default.default.createElement("span",null))))),!!c&&React__default.default.createElement(TFoot,{tableTemplate:r,dataForRender:index$2.lodash_clonedeep(o),tfootItem:c,isHidden:!0,setRef:this.table.tfootHidden,visibleColumns:f})),!(!c&&!u)&&React__default.default.createElement("table",{className:"table__thead table-list"},React__default.default.createElement(TFoot,{tableTemplate:r,dataForRender:index$2.lodash_clonedeep(o),tfootItem:c,items:index$2.lodash_clonedeep(E),tfootDataForRender:this.props.tfootDataForRender,tfootOtherTemplate:this.props.tfootOtherTemplate,setRef:this.table.tfoot,visibleColumns:f})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.url){var n,a,r,i,l,o,s;if(e.requiredFilterValues.length&&!t.canDoRequest)return n=!0,t=e.reducer,c=e.data,a=e.listGet,r=e.url,i=e.reloadItemsOnRequest,l=e.disableFilters,o=e.requiredFilters,s=c[t].filtersValue,e.requiredFilterValues.forEach(function(e){s[e]||(n=!1)}),n&&a(t,r,i,l,o),{canDoRequest:n};if(e.requiredFilterValues.length){var d=!0,c=e.reducer,u=e.data[c].filtersValue;if(e.requiredFilterValues.forEach(function(e){u[e]||(d=!1)}),!d)return{canDoRequest:d}}}return{}}}]),t}(React.Component));function ownKeys$2(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function _objectSpread$2(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$2(Object(n),!0).forEach(function(e){index.defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$2(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}index.defineProperty(MainTableComponent,"defaultProps",{url:null,reducer:"",className:"",dataForRender:{},rerenderById:null,initFiltersValue:null,refreshTableOnPush:!1,onInit:null,afterLineTemplate:null,tfootItem:null,tfootDataForRender:null,reloadItemsOnRequest:!1,disableFilters:!1,leftMenuWidth:200,offsetHeight:0,titleTemplate:null,disableLazyLoad:!1,requiredFilters:[],softSort:!1,requiredFilterValues:[],visibleColumnsMiddleware:function(e){return e},requiredFilterValuesMessage:"Empty required filters",noDataContent:"No data"}),index.defineProperty(MainTableComponent,"propTypes",{url:index$1.propTypes.string,id:index$1.propTypes.string.isRequired,tableTemplate:index$1.propTypes.array.isRequired,titleTemplate:index$1.propTypes.array,reducer:index$1.propTypes.string,data:index$1.propTypes.object.isRequired,className:index$1.propTypes.string,dataForRender:index$1.propTypes.object,rerenderById:index$1.propTypes.number,offsetHeight:index$1.propTypes.number,initFiltersValue:index$1.propTypes.object,refreshTableOnPush:index$1.propTypes.bool,listGet:index$1.propTypes.func.isRequired,reloadItemsOnRequest:index$1.propTypes.bool,saveTableScroll:index$1.propTypes.func.isRequired,saveTableInitFilters:index$1.propTypes.func.isRequired,changeFiltersValue:index$1.propTypes.func.isRequired,history:index$1.propTypes.object.isRequired,onInit:index$1.propTypes.func,softSort:index$1.propTypes.bool,setItems:index$1.propTypes.func.isRequired,afterLineTemplate:index$1.propTypes.array,tfootItem:index$1.propTypes.object,tfootDataForRender:index$1.propTypes.object,leftMenuWidth:index$1.propTypes.number,disableFilters:index$1.propTypes.bool,requiredFilters:index$1.propTypes.array,visibleColumnsMiddleware:index$1.propTypes.func,requiredFilterValues:index$1.propTypes.array,disableLazyLoad:index$1.propTypes.bool,requiredFilterValuesMessage:index$1.propTypes.string,noDataContent:index$1.propTypes.oneOfType([index$1.propTypes.string,index$1.propTypes.object])}),MainTableComponent.displayName="MainTableComponent";var REQUEST_REGEXP=/^MT_LIST@(.+)_REQUEST$/,RSAA="@@redux-api-middleware/RSAA",mainTableBeforeMiddleware=function(o){return function(l){return function(e){var t,n,a,r,i;return e[RSAA]?(t=_objectSpread$2({},e),a="object"===index._typeof_1(e[RSAA].types[0])?e[RSAA].types[0].type:e[RSAA].types[0],REQUEST_REGEXP.test(a)?(a=a.match(REQUEST_REGEXP)[1],i=(a=o.getState().mainTable[a]).isLoading,a=a.filtersValue,!i&&(a&&Object.keys(a).length&&(n=index$2.lodash_clonedeep(a),Object.entries(n).forEach(function(e){var e=utils.slicedToArray(e,2),t=e[0],e=e[1],e=Array.isArray(e)?e:[e];n[t]=utils.lodash_compact(e)}),a=(i=t[RSAA].types[0].meta).disableFilters,r=i.requiredFilters,a&&r&&r.length&&Object.keys(n).forEach(function(e){r.indexOf(e)<0&&delete n[e]}),(i=utils.queryString.stringify(n)).length)&&(t[RSAA].endpoint="".concat(t[RSAA].endpoint,"?").concat(i)),l(t))):l(t)):l(e)}}};function ownKeys$1(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function _objectSpread$1(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$1(Object(n),!0).forEach(function(e){index.defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var MT_SAVE_TABLE_SCROLL="MT_SAVE_TABLE_SCROLL",saveTableScrollAction=function(e,t){return{type:MT_SAVE_TABLE_SCROLL,scroll:e,reducer:t}},MT_CHANGE_FILTERS_VALUE="MT_CHANGE_FILTERS_VALUE",changeFiltersValueAction=function(e,t,n){return{type:MT_CHANGE_FILTERS_VALUE,data:e,reducer:t,firstLoad:n}},MT_UPDATE_VISIBLE_COLUMNS="MT_UPDATE_VISIBLE_COLUMNS",updateVisibleColumnsAction=function(e,t){return{type:MT_UPDATE_VISIBLE_COLUMNS,data:e,reducer:t}},MT_GET_SUBLINE_DATA_REQUEST="MT_GET_SUBLINE_DATA_REQUEST",MT_GET_SUBLINE_DATA_SUCCESS="MT_GET_SUBLINE_DATA_SUCCESS",MT_GET_SUBLINE_DATA_FAILURE="MT_GET_SUBLINE_DATA_FAILURE",MTgetSubLineData=function(e){var t=e.id,n=e.subLineKey,n=void 0===n?"id":n,a=e.query,r=e.url,e=e.reducer;return utils.crud({endpoint:r,query:_objectSpread$1(_objectSpread$1({},void 0===a?{}:a),{},index.defineProperty({},n,t)),crudTypes:{request:MT_GET_SUBLINE_DATA_REQUEST,success:MT_GET_SUBLINE_DATA_SUCCESS,failure:MT_GET_SUBLINE_DATA_FAILURE},meta:{reducer:e,subLineKey:n,id:t}})},MT_REMOVE_SUBLINE_DATA="MT_REMOVE_SUBLINE_DATA",MTremoveSubLineData=function(e){var t=e.id,n=e.reducer;return function(e){return e({type:MT_REMOVE_SUBLINE_DATA,id:t,reducer:n})}},MT_LIST_UPDATE_ITEMS="MT_LIST_UPDATE_ITEMS",MTupdateItemsAction=function(e,t){return{type:MT_LIST_UPDATE_ITEMS,items:e,reducer:t}},MT_LIST_AUTO_UPDATE_ITEM="MT_LIST_AUTO_UPDATE_ITEM",MTautoUpdateItemAction=function(e,t,n){return{type:MT_LIST_AUTO_UPDATE_ITEM,item:e,reducer:t,key:n}},MT_LIST_AUTO_UPDATE_ITEMS="MT_LIST_AUTO_UPDATE_ITEMS",MTautoUpdateItems=function(e,t){return{type:MT_LIST_AUTO_UPDATE_ITEMS,items:e,reducer:t}},MT_LIST_REMOVE_ITEM="MT_LIST_REMOVE_ITEM",MTlistRemoveItemAction=function(e,t){return{type:MT_LIST_REMOVE_ITEM,id:e,reducer:t,key:2<arguments.length&&void 0!==arguments[2]?arguments[2]:"id"}},MT_SET_ITEMS="MT_SET_ITEMS",MTsetItems=function(e,t){return{type:MT_SET_ITEMS,items:e,reducer:t}},filtersDataGetAction=function(e,t,n,a){return utils.crud({endpoint:t,query:n,meta:{modifyResponse:a},crudTypes:{request:"MT_FILTERS_DATA@".concat(e,"_REQUEST"),success:"MT_FILTERS_DATA@".concat(e,"_SUCCESS"),failure:"MT_FILTERS_DATA@".concat(e,"_FAILURE")}})},MT_DISABLE_ITEM_SWITCHER="MT_DISABLE_ITEM_SWITCH",disableItemSwitcherAction=function(e,t,n){return{type:MT_DISABLE_ITEM_SWITCHER,data:e,reducer:t,byIndex:n}},MT_SAVE_TABLE_INIT_FILTERS="MT_SAVE_TABLE_INIT_FILTERS",saveTableInitFilters=function(e,t){return{type:MT_SAVE_TABLE_INIT_FILTERS,data:e,reducer:t}},listGetAction=function(e,t,n,a,r){return utils.crud({endpoint:t,crudTypes:{request:"MT_LIST@".concat(e,"_REQUEST"),success:"MT_LIST@".concat(e,"_SUCCESS"),failure:"MT_LIST@".concat(e,"_FAILURE")},meta:{reloadItemsOnRequest:n,mainTableRequest:!0,disableFilters:a,requiredFilters:r}})},MTsaveTableScroll=function(t,n){return function(e){return e(saveTableScrollAction(t,n))}},MTchangeFiltersValue=function(t,n,a){return function(e){return e(changeFiltersValueAction(t,n,a))}},MTfiltersDataGet=function(t,n,a,r){return function(e){return e(filtersDataGetAction(t,n,a,r))}},MTupdateItems=function(t,n){return function(e){return e(MTupdateItemsAction(t,n))}},MTupdateVisibleColumns=function(t,n){return function(e){return e(updateVisibleColumnsAction(t,n))}},MTautoUpdateItem=function(t,n,a){return function(e){return e(MTautoUpdateItemAction(t,n,a))}},MTlistRemoveItem=function(t,n,a){return function(e){return e(MTlistRemoveItemAction(t,n,a))}},MTdisableItemSwitcher=function(t,n,a){return function(e){return e(disableItemSwitcherAction(t,n,a))}},MTsaveTableInitFilters=function(t,n,e){return function(e){return e(saveTableInitFilters(t,n))}},MTlistGet=function(t,n,a,r,i){return function(e){return e(listGetAction(t,n,a,r,i))}};function ownKeys(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){index.defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var REQUEST_LIST_REGEXP=/^MT_LIST@(.+)_REQUEST$/,SUCCESS_LIST_REGEXP=/^MT_LIST@(.+)_SUCCESS$/,FAILURE_LIST_REGEXP=/^MT_LIST@(.+)_FAILURE$/,SUCCESS_FILTERS_DATA_REGEXP=/^MT_FILTERS_DATA@(.+)_SUCCESS$/,tableExample={items:[],isLastPage:null,isLoading:!1,scroll:{},subLineData:{},filtersValue:{},blockedItems:[]},initialState={filtersData:{}},mainTableReducer=function(){var t,n,a,r,i,l,o,s,d,c,e,u,p,f,m,_,T=0<arguments.length&&void 0!==arguments[0]?arguments[0]:initialState,y=1<arguments.length?arguments[1]:void 0;return y.type===MT_REMOVE_SUBLINE_DATA&&(p=y.id,e=y.reducer,(t=index$2.lodash_clonedeep(T))[e].subLineData[p])&&delete t[e].subLineData[p],y.type===MT_GET_SUBLINE_DATA_REQUEST&&(p=(e=y.meta).id,m=e.subLineKey,e=e.reducer,(t=index$2.lodash_clonedeep(T))[e].subLineData[p]={isLoading:!0,items:[],key:m}),y.type===MT_GET_SUBLINE_DATA_FAILURE&&(p=(e=y.meta).id,m=e.reducer,(t=index$2.lodash_clonedeep(T))[m].subLineData[p])&&delete t[m].subLineData[p],y.type===MT_GET_SUBLINE_DATA_SUCCESS&&(m=(e=y.meta).id,p=e.reducer,u=(e=y.payload).status,e=e.payload,f=!!(t=index$2.lodash_clonedeep(T))[p].subLineData[m],"OK"===u&&e.items.length&&f?(t[p].subLineData[m].isLoading=!1,t[p].subLineData[m].items=_extends.toConsumableArray(e.items)):f&&delete t[p].subLineData[m]),y.type===MT_LIST_REMOVE_ITEM&&(n=y.id,u=y.reducer,e=y.key,a=void 0===e?"id":e,f=(f=(f=index$2.lodash_clonedeep(T[u].items)).map(function(e){var e=index$2.lodash_clonedeep(e),t=e.findIndex(function(e){return e[a]===n});return 0<=t&&delete e[t],e.filter(function(e){return Boolean(e)})})).filter(function(e){return Array.isArray(e)&&e.length}).filter(function(e){return Boolean(e)}),(t=index$2.lodash_clonedeep(T))[u].items=f),y.type===MT_LIST_AUTO_UPDATE_ITEM&&(r=y.item,p=y.reducer,m=y.key,l=r[i=void 0===m?"id":m],e=(e=index$2.lodash_clonedeep(T[p].items)).map(function(e){var e=index$2.lodash_clonedeep(e),t=e.findIndex(function(e){return e[i]===l});return 0<=t&&(e[t]=r),e}),(t=index$2.lodash_clonedeep(T))[p].items=e),y.type===MT_SAVE_TABLE_SCROLL&&(u=y.reducer,f=y.scroll,m=index$2.lodash_clonedeep(T),t=_objectSpread(_objectSpread({},m),{},index.defineProperty({},u,_objectSpread(_objectSpread({},m[u]),{},{scroll:f})))),y.type===MT_CHANGE_FILTERS_VALUE&&(p=y.reducer,e=y.data,m=y.firstLoad,u=index$2.lodash_clonedeep(T),(o=_objectSpread({},u[p])).filtersValue=_objectSpread(m?{}:_objectSpread({},u[p].filtersValue),e),Object.entries(o.filtersValue).forEach(function(e){var e=utils.slicedToArray(e,2),t=e[0],e=e[1];!1!==e&&void 0!==e||delete o.filtersValue[t]}),e&&0!==e.offset||(o.items=[]),t=_objectSpread(_objectSpread({},T),{},index.defineProperty({},y.reducer,o))),SUCCESS_FILTERS_DATA_REGEXP.test(y.type)&&(f=y.type.match(SUCCESS_FILTERS_DATA_REGEXP)[1],"OK"===y.payload.status)&&(m=y.payload.payload.items,s=y.meta.modifyResponse,(t=index$2.lodash_clonedeep(T)).filtersData[f]=s?m.map(function(e){return{label:e[s.label],value:e[s.value]}}):m||[]),y.type===MT_DISABLE_ITEM_SWITCHER&&(d=y.data,c=y.reducer,u=y.byIndex,t=index$2.lodash_clonedeep(T),u||Object.keys(d).forEach(function(e){d[e]?t[c].blockedItems.indexOf(e)<0&&t[c].blockedItems.push(e):0<=(e=t[c].blockedItems.indexOf(e))&&delete t[c].blockedItems[e]}),t[c].blockedItems=t[c].blockedItems.filter(function(e){return e})),y.type===MT_SET_ITEMS&&(p=y.items,e=y.reducer,(t=index$2.lodash_clonedeep(T))[e].items=[index$2.lodash_clonedeep(p)]),REQUEST_LIST_REGEXP.test(y.type)&&(f=y.type.match(REQUEST_LIST_REGEXP)[1],(t=index$2.lodash_clonedeep(T))[f].isLoading=!0),SUCCESS_LIST_REGEXP.test(y.type)&&(m=y.type.match(SUCCESS_LIST_REGEXP)[1],(t=index$2.lodash_clonedeep(T))[m].isLoading=!1,"OK"===y.payload.status&&(p=(e=(u=y.payload).payload).items,f=e.item,e=u._meta,u=y.meta.reloadItemsOnRequest,_=(e=void 0===e?{is_last_page:!1,total:0}:e).is_last_page,e=e.total,t[m].isLastPage=_,t[m].total=e,p&&p.length||f)?t[m].items=u?[p||[f]]:[].concat(_extends.toConsumableArray(t[m].items),[p||[f]]):t[m].isLastPage=!0),FAILURE_LIST_REGEXP.test(y.type)&&(_=y.type.match(FAILURE_LIST_REGEXP)[1],(t=index$2.lodash_clonedeep(T))[_].isLoading=!1,t[_].isLastPage=!0),y.type===MT_LIST_UPDATE_ITEMS&&(e=y.items,u=y.reducer,(t=index$2.lodash_clonedeep(T))[u].items=e),y.type===MT_UPDATE_VISIBLE_COLUMNS&&(p=y.data,f=y.reducer,(t=index$2.lodash_clonedeep(T))[f].visibleColumns=p),y.type===MT_SAVE_TABLE_INIT_FILTERS&&(m=y.data,_=y.reducer,(t=index$2.lodash_clonedeep(T))[_].initFiltersValue=index$2.lodash_clonedeep(m)),t||T},mainTableReducer$1=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e){initialState[e]=index$2.lodash_clonedeep(tableExample)}),mainTableReducer};function _callSuper(e,t,n){return t=index$1.getPrototypeOf(t),index$1.possibleConstructorReturn(e,_isNativeReflectConstruct()?Reflect.construct(t,n||[],index$1.getPrototypeOf(e).constructor):t.apply(e,n))}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var FilterColumns=function(e){function a(e){index$1.classCallCheck(this,a),r=_callSuper(this,a,[e]),index.defineProperty(index$1.assertThisInitialized(r),"changeColumnState",function(a){r.setState(function(e){var t=index$2.lodash_clonedeep(e.settingsColumns),n=(t[a].active=!t[a].active,[]);return Object.keys(t).forEach(function(e){t[e].active&&n.push(t[e].active)}),n.length?{settingsColumns:t}:null},function(){r.updateSettingsColumnsStorage(),r.getVisibleColumns()})}),index.defineProperty(index$1.assertThisInitialized(r),"updateSettingsColumnsStorage",function(e){var t=r.props.tableName,e=JSON.stringify(e||r.state.settingsColumns);localStorage.setItem(t,e)}),index.defineProperty(index$1.assertThisInitialized(r),"getVisibleColumns",function(){var t=r.state.settingsColumns,e=r.props,n=e.mainTableName,e=e.dispatch,a=[];Object.keys(t).forEach(function(e){a.push(t[e].active)}),e(MTupdateVisibleColumns(a,n))}),index.defineProperty(index$1.assertThisInitialized(r),"selectMultiOpener",function(){r.setState(function(e){return{selectMultiOpened:!e.selectMultiOpened}})}),index.defineProperty(index$1.assertThisInitialized(r),"clickOut",function(e){e=e.target;!document.querySelector(".select-multi").classList.contains("active")||e.classList.contains("select-multi")||e.closest(".select-multi")||r.setState({selectMultiOpened:!1})});var r,t=e.tableName,n=e.columnCategories,e=e.settingsColumns,t=localStorage.getItem(t);return t?e=JSON.parse(t):r.updateSettingsColumnsStorage(e),r.state={selectMultiOpened:!1,settingsColumns:e,columnCategories:n},r}return index$1.inherits(a,e),index$1.createClass(a,[{key:"componentDidMount",value:function(){this.getVisibleColumns(),utils.addEvent(window,"click",this.clickOut)}},{key:"componentWillUnmount",value:function(){utils.removeEvent(window,"click",this.clickOut)}},{key:"render",value:function(){var n=this,e=this.state,t=e.selectMultiOpened,a=e.columnCategories,r=e.settingsColumns;return React__default.default.createElement("div",{className:t?"select-multi active":"select-multi"},React__default.default.createElement("div",{role:"presentation",className:"select-multi__label",onClick:this.selectMultiOpener},this.props.title),React__default.default.createElement("ul",{className:"select-multi__list"},Object.keys(a).map(function(e){return React__default.default.createElement("li",{key:e},React__default.default.createElement("span",{className:"cat"},a[e]),utils.findByValue(r,e,"cat").map(function(e){var t=r[e];return React__default.default.createElement("span",{key:e,onClick:function(){if(t.fixed)return!1;n.changeColumnState(e)},className:"item".concat(t.active?" active":"").concat(t.fixed?" fixed":"")},t.name)}))})))}}]),a}(React.Component);index.defineProperty(FilterColumns,"defaultProps",{columnCategories:{0:"Колонки"},mainTableName:null,title:"Настройка колонок"}),index.defineProperty(FilterColumns,"propTypes",{tableName:index$1.propTypes.string.isRequired,columnCategories:index$1.propTypes.object,settingsColumns:index$1.propTypes.object.isRequired,mainTableName:index$1.propTypes.string,title:index$1.propTypes.string,dispatch:index$1.propTypes.func.isRequired}),FilterColumns.displayName="FilterColumns",exports.FilterColumns=FilterColumns,exports.MT_CHANGE_FILTERS_VALUE=MT_CHANGE_FILTERS_VALUE,exports.MT_DISABLE_ITEM_SWITCHER=MT_DISABLE_ITEM_SWITCHER,exports.MT_GET_SUBLINE_DATA_FAILURE=MT_GET_SUBLINE_DATA_FAILURE,exports.MT_GET_SUBLINE_DATA_REQUEST=MT_GET_SUBLINE_DATA_REQUEST,exports.MT_GET_SUBLINE_DATA_SUCCESS=MT_GET_SUBLINE_DATA_SUCCESS,exports.MT_LIST_AUTO_UPDATE_ITEM=MT_LIST_AUTO_UPDATE_ITEM,exports.MT_LIST_AUTO_UPDATE_ITEMS=MT_LIST_AUTO_UPDATE_ITEMS,exports.MT_LIST_REMOVE_ITEM=MT_LIST_REMOVE_ITEM,exports.MT_LIST_UPDATE_ITEMS=MT_LIST_UPDATE_ITEMS,exports.MT_REMOVE_SUBLINE_DATA=MT_REMOVE_SUBLINE_DATA,exports.MT_SAVE_TABLE_INIT_FILTERS=MT_SAVE_TABLE_INIT_FILTERS,exports.MT_SAVE_TABLE_SCROLL=MT_SAVE_TABLE_SCROLL,exports.MT_UPDATE_VISIBLE_COLUMNS=MT_UPDATE_VISIBLE_COLUMNS,exports.MTautoUpdateItem=MTautoUpdateItem,exports.MTautoUpdateItems=MTautoUpdateItems,exports.MTchangeFiltersValue=MTchangeFiltersValue,exports.MTdisableItemSwitcher=MTdisableItemSwitcher,exports.MTfiltersDataGet=MTfiltersDataGet,exports.MTgetSubLineData=MTgetSubLineData,exports.MTlistGet=MTlistGet,exports.MTlistRemoveItem=MTlistRemoveItem,exports.MTremoveSubLineData=MTremoveSubLineData,exports.MTsaveTableInitFilters=MTsaveTableInitFilters,exports.MTsaveTableScroll=MTsaveTableScroll,exports.MTsetItems=MTsetItems,exports.MTupdateItems=MTupdateItems,exports.MTupdateVisibleColumns=MTupdateVisibleColumns,exports.MainTable=MainTableComponent,exports.mainTableBeforeMiddleware=mainTableBeforeMiddleware,exports.mainTableReducer=mainTableReducer$1;
